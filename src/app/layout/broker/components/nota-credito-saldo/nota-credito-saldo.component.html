<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 no-left">
            <app-nav-menuprod></app-nav-menuprod>
        </div>
        <div class="col-md-9">
            <div class="container-fluid">
                <div class="header-content pb-2">
                    <div class="containt-item">
                        <div class="header-item">
                            <span class="title">Visualizador de Nota de Crédito con Saldo</span>
                        </div>
                    </div>
                    <div class="containt-item">
                        <div class="header-item rigth-item"
                             *ngIf="contador">
                            <button (click)="descargarExcelTest()"
                                    class="m-0"
                                    [disabled]="!dataNc.length">
                                <img alt=""
                                     src="assets/icons/descargar.png" />
                                <span>Exportar</span>
                            </button>
                        </div>

                    </div>
                </div>
                <div class="filter mt-3"
                     *ngIf="isProtecta">
                    <div class="form-group row filter-row d-flex flex-column">
                        <div class="d-flex flex-row">
                            <div class="col-sm-12 col-lg-5 filter-row-cell">
                                <span>POR CANAL:</span>

                                <select (change)="onSelectChannelSales($any($event.target).value)"
                                        class="form-control mt-2"
                                        id="ChannelSalesSelect"
                                        readonly
                                        [disabled] = "true">
                                    <option *ngFor="let channelsales of channelList"
                                            [selected]="channelsales.nchannel == channelUser"
                                            value="{{ channelsales.nchannel }}">
                                        {{ channelsales.sdescript }}</option>
                                </select>
                            </div>
                            <div class="col-sm-12 col-lg-2 filter-row-cell">
                                <span>NRO.PÓLIZA:</span>
                                <form-input-text placeholder="NRO. PÓLIZA"
                                                [(value)]="nroPoliza"
                                               ></form-input-text>
                            </div>
                            <div class="col-sm-12 col-lg-2 filter-row-cell">
                                <span>COMPROBANTE</span>
                                <form-input-text placeholder="NRO. COMPROBANTE"
                                                [(value)]="nroComprobante"
                                                ></form-input-text>
                            </div>
                        </div>
                        <div class="d-flex flex-row mt-3 mb-2">
                            <div class="col-sm-12 col-lg-2 filter-row-cell">
                                <span>FECHA INICIO:</span>
                                <input type="text"
                                       class="form-control input-search"
                                       #dp="bsDatepicker"
                                       [bsConfig]="bsConfig"
                                       bsDatepicker
                                       [formControl]="startDateControl"
                                       readonly
                                       style="background-color: white"
                                       [maxDate]="bsEndValue" />
                            </div>
                            <div class="col-sm-12 col-lg-2 filter-row-cell">
                                <span>FECHA FIN:</span>
                                <input type="text"
                                       class="form-control input-search"
                                       #dp="bsDatepicker"
                                       [bsConfig]="bsConfig"
                                       bsDatepicker
                                       [formControl]="endDateControl"
                                       readonly
                                       style="background-color: white"
                                       [maxDate]="bsEndValue" />
                            </div>
                        </div>

                    </div>
                </div>
              
                <div class="search-filters d-flex flex-row">
                    <div class="filter-row-cell w-ft pr-0">
                        <span style="color: rgba(0,0,0,0);"></span>
                        <button type="button"
                                class="searchForAdmin"
                                (click)="searchListData()"
                                [disabled]="!isValidDate">Buscar</button>
                    </div>
                    <div class="filter-row-cell w-ft pl-0">
                        <span style="color: rgba(0,0,0,0);"></span>
                        <button type="button"
                                class="searchForAdmin mr-0"
                                (click)="clearFrmSearch()">Limpiar</button>
                    </div>
                </div>
                <div class="grid form-group">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr class="grid-title">
                                    <td class="grid-title-item">Ramo</td>
                                    <td class="grid-title-item">Producto</td>
                                    <td class="grid-title-item">Doc. Referencia</td>
                                    <td class="grid-title-item">Tipo de Comprobante</td>
                                    <td class="grid-title-item">Serie Número</td>
                                    <td class="grid-title-item">Monto</td>
                                    <td class="grid-title-item">Contratante</td>
                                    <td class="grid-title-item">Póliza</td>
                                    <td class="grid-title-item">Fecha Emisión</td>
                                    <td class="grid-title-item">Estado Comprobante</td>

                                </tr>
                            </thead>
                            <div *ngIf="haveBillsData; then ocultarGrilla; else mostrarGrilla"></div>
                        </table>
                        <ng-template #mostrarGrilla>
                            <tbody>
                                <tr>
                                    <td colspan="13">No se encontraron Registros..</td>
                                </tr>
                            </tbody>
                        </ng-template>
                        <ng-template #ocultarGrilla>
                            <tbody *ngFor="let row of dataNc  | paginate: { itemsPerPage: 20, currentPage: p }">
                                <tr>
                                    <td>{{ row.RAMO }}</td>
                                    <td>{{ row.PRODUCTO }}</td>
                                    <td>{{ row.DOC_REF }}</td>
                                    <td>{{ row.COMPROBANTE }}</td>
                                    <td>{{ row.SERIENUM}} </td>
                                    <td>{{ row.NAMOUNT }} </td>
                                    <td>{{ row.SCLIENAME }}</td>
                                    <td>{{ row.NPOLICY }}</td>
                                    <td>{{ row.DEFFECDATE}}</td>
                                    <td>{{ row.STATUS }}</td>
                                </tr>
                            </tbody>
                        </ng-template>
                        <pagination-controls *ngIf="haveBillsData"
                                             class="my-pagination"
                                             (pageChange)="p = $event"
                                             autoHide="true"
                                             responsive="true"
                                             previousLabel="Anterior"
                                             nextLabel="Siguiente"
                                             screenReaderPaginationLabel="Paginación"
                                             screenReaderPageLabel="pagina"
                                             screenReaderCurrentLabel="Estás en la pagina"></pagination-controls>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>