<!--**********************************************************************************************/
/*  NOMBRE              :   INTERFACE-BANKPAYMENT.COMPONENT.HTML                                 */
/*  DESCRIPCIÓN         :   BROKER COMPONENTS                                                    */
/*  AUTOR               :   MATERIA GRIS - DIEGO ARMANDO GONZALES CHOCANO                        */
/*  FECHA               :   24/10/2023                                                           */
/*  PROYECTO            :   INTERFAZ EN LÍNEA - TESORERÍA                                        */
/***********************************************************************************************-->

<div class="row">
    <div class="col-lg-3">
        <app-nav-menuprod></app-nav-menuprod>
    </div>
    
    <!--PANTALLA DETALLE DE APROBACION BANCO-->
    <div class="col-lg-9">
        <div class="container-fluid">
            <div class="header-content">
                <div class="containt-item">
                    <div class="header-item">
                        <span class="title">APROBACIÓN DE PAGO A BANCOS</span>
                    </div>
                </div>
            </div>

            <div class="filter">
                <div class="row">
                    <div class="col-sm-12"
                         [formGroup]="filterForm">
                        <div class="card m-1">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <span>ORIGEN</span>
                                        <select class="form-control"
                                                (change)="seleccionarOrigen($any($event.target).value)"
                                                formControlName="P_NNUMORI">
                                            <option *ngFor="let item of origen"
                                                    value="{{ item.mvt_nnumori }}">{{ item.mvt_cdescri }}</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>INTERFAZ</span>
                                        <select class="form-control"
                                                formControlName="P_NCODGRU">
                                            <option value="0">TODOS</option>
                                            <option *ngFor="let item of interfaces"
                                                    value="{{ item.mvt_ncodgru }}">{{ item.mvt_cdescri }}</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>BANCO ORIGEN</span>
                                        <select class="form-control"
                                                formControlName="P_NBANK_CODE">
                                            <option value="null">TODOS</option>
                                            <option *ngFor="let item of bancos"
                                                    value="{{ item.NBANK_CODE }}">{{ item.SBANK_DES }}</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>ESTADO</span>
                                        <select class="form-control"
                                                formControlName="P_NSTATUS">
                                            <option value="null">TODOS</option>
                                            <option *ngFor="let item of estados"
                                                    value="{{ item.NESTADO }}">{{ item.SESTADO_DES }}</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>FECHA INTERFAZ DESDE</span>
                                        <input class="form-control"
                                               type="text"
                                               #dp="bsDatepicker"
                                               bsDatepicker
                                               DateDirective
                                               [bsConfig]="bsConfig"
                                               formControlName="P_DFECINI"
                                               [ngClass]="{'error-validate': submitted && (!filterForm.controls.P_DFECINI.valid || filterForm.hasError('datesNotSortedCorrectly'))}" />
                                        <ng-container [ngSwitch]="true"
                                                      *ngIf="submitted && (!filterForm.controls.P_DFECINI.valid || filterForm.hasError('datesNotSortedCorrectly')) && !filterForm.valid">
                                            <span *ngSwitchCase="filterForm.get('P_DFECINI').hasError('required')"
                                                  class="mensaje-error-control">
                                                La fecha inicial es requerida.
                                            </span>
                                            <span *ngSwitchCase="!filterForm.controls.P_DFECINI.valid && !filterForm.get('P_DFECINI').hasError('required')"
                                                  class="mensaje-error-control">
                                                La fecha inicial no es válida.
                                            </span>
                                            <span *ngSwitchCase="filterForm.hasError('datesNotSortedCorrectly')"
                                                  class="mensaje-error-control">
                                                La fecha inicial debe ser menor a la fecha final.
                                            </span>
                                        </ng-container>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>FECHA INTERFAZ HASTA</span>
                                        <input class="form-control"
                                               type="text"
                                               #dp="bsDatepicker"
                                               bsDatepicker
                                               DateDirective
                                               [bsConfig]="bsConfig"
                                               formControlName="P_DFECFIN"
                                               [ngClass]="{'error-validate': submitted && (!filterForm.controls.P_DFECFIN.valid || filterForm.hasError('datesNotSortedCorrectly'))}" />
                                        <ng-container [ngSwitch]="true"
                                                      *ngIf="submitted && (!filterForm.controls.P_DFECFIN.valid || filterForm.hasError('datesNotSortedCorrectly')) && !filterForm.valid">
                                            <span *ngSwitchCase="filterForm.get('P_DFECFIN').hasError('required')"
                                                  class="mensaje-error-control">
                                                La fecha final es requerida.
                                            </span>
                                            <span *ngSwitchCase="!filterForm.controls.P_DFECFIN.valid && !filterForm.get('P_DFECFIN').hasError('required')"
                                                  class="mensaje-error-control">
                                                La fecha final no es válida.
                                            </span>
                                            <span *ngSwitchCase="filterForm.hasError('datesNotSortedCorrectly')"
                                                  class="mensaje-error-control">
                                                La fecha final debe ser mayor a la fecha inicial.
                                            </span>
                                        </ng-container>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>&nbsp;</span>
                                        <button class="full-color"
                                                (click)="ListarAprobaciones()">
                                            <span>BUSCAR</span>
                                        </button>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>&nbsp;</span>
                                        <button class="full-colorN" (click)="getReportAproCAB_XLS()">
                                            <span>DESCARGAR EXCEL</span>
                                            <img class="icon-btn"
                                                 src="./assets/icons/download2.png" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 mt-2"
                         [formGroup]="docForm">
                        <div class="card m-1">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <span>BUSCAR POR</span>
                                        <select class="form-control"
                                                formControlName="P_NTIPO"
                                                (change)="seleccionarTipo($any($event.target).value)"
                                                [ngClass]="{'error-validate': submittedDoc && (!docForm.controls.P_NTIPO.valid || docForm.hasError('required'))}">
                                            <option value="null"
                                                    disabled>SELECCIONE</option>
                                            <option *ngFor="let item of tipoBusquedas"
                                                    value="{{ item.CODIGO }}">{{ item.DESCRIPCION }}</option>
                                        </select>
                                        <ng-container [ngSwitch]="true"
                                                      *ngIf="submittedDoc && (!docForm.controls.P_NTIPO.valid || docForm.hasError('required')) && !docForm.valid">
                                            <span *ngSwitchCase="docForm.get('P_NTIPO').hasError('required')"
                                                  class="mensaje-error-control">
                                                Seleccione una opción.
                                            </span>
                                        </ng-container>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>&nbsp;</span>
                                        <input class="form-control"
                                               formControlName="P_SVALOR"
                                               type="text"
                                               placeholder="INGRESE BÚSQUEDA"
                                               [ngClass]="{'error-validate': submittedDoc && (!docForm.controls.P_SVALOR.valid || docForm.hasError('required'))}"
                                               (keyup)="buscarNombreRazonSocial()" />
                                        <ng-container [ngSwitch]="true"
                                                      *ngIf="submittedDoc && (!docForm.controls.P_SVALOR.valid || docForm.hasError('required')) && !docForm.valid">
                                            <span *ngSwitchCase="docForm.get('P_SVALOR').hasError('required')"
                                                  class="mensaje-error-control">
                                                Ingrese un valor.
                                            </span>
                                        </ng-container>
                                        <ng-container [ngSwitch]="true"
                                                      *ngIf="submittedDoc && (!docForm.controls.P_SVALOR.valid || (docForm.hasError('pattern') || docForm.hasError('minlength') || docForm.hasError('maxlength'))) && !docForm.valid">
                                            <span *ngSwitchCase="docForm.get('P_SVALOR').hasError('pattern') || docForm.get('P_SVALOR').hasError('minlength') || docForm.get('P_SVALOR').hasError('maxlength')"
                                                  class="mensaje-error-control">
                                                Ingrese un valor correcto.
                                            </span>
                                        </ng-container>
                                    </div>
                                    <div class="col-sm-3">
                                        <span>&nbsp;</span>
                                        <button class="full-colorN"
                                                (click)="ListarAprobacionesDoc()">
                                            <span>BUSCAR</span>
                                            <img class="icon-btn"
                                                 src="./assets/icons/buscar_certificado.png" />
                                        </button>
                                    </div>
                                    <div class="col-sm-3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="row m-2">
                    <div class="grid form-group">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr class="grid-title">
                                        <td class="grid-title-item text-center">INTERFAZ</td>
                                        <td class="grid-title-item text-center">ORIGEN</td>
                                        <td class="grid-title-item text-center">BANCO ORIGEN</td>
                                        <td class="grid-title-item text-center">MONEDA</td>
                                        <td class="grid-title-item text-center">MONTO</td>
                                        <td class="grid-title-item text-center">FECHA INTERFAZ</td>
                                        <td class="grid-title-item text-center">ESTADO</td>
                                    </tr>
                                </thead>
                                <ng-container
                                              *ngIf="listToShow == null || listToShow.length == 0; then hideGrid else showGrid"></ng-container>
                            </table>
                            <ng-template #hideGrid>
                                <tbody>
                                    <tr>
                                        <td class="text-center"
                                            colspan="7">No se encontraron registros.</td>
                                    </tr>
                                </tbody>
                            </ng-template>
                            <ng-template #showGrid>
                                <tbody *ngFor="let item of listToShow">
                                    <tr>
                                        <td class="data-table-tr-td text-center">
                                            {{ item.NIDPROCESS }}
                                        </td>
                                        <td class="data-table-tr-td text-center">
                                            {{ item.SORIGEN_DES }}
                                        </td>
                                        <td class="data-table-tr-td text-center">
                                            {{ item.SBANK_ORI_DES }}
                                        </td>
                                        <td class="data-table-tr-td text-center">
                                            {{ item.SCURRENCY_DES }}
                                        </td>
                                        <td class="data-table-tr-td text-right">
                                            {{ item.NAMOUNT }}
                                        </td>
                                        <td class="data-table-tr-td text-center">
                                            {{ item.DFEC_INT }}
                                        </td>
                                        <!-- <td [ngClass]="item.NSTATUS == '1' || item.NSTATUS == '3' ? 'data-table-tr-td onHover' : 'null'" -->
                                        <td class="data-table-tr-td onHover"
                                            (click)="seleccionarAprob(contentDetalle, item)">
                                            <img *ngIf="item.NSTATUS == '0'" src="./assets/icons/process2.png" />
                                            <img *ngIf="item.NSTATUS == '1'" src="./assets/icons/inProcess.png" />
                                            <img *ngIf="item.NSTATUS == '2'" src="./assets/icons/process.png" />
                                            <img *ngIf="item.NSTATUS == '3'" src="./assets/icons/process-error.png" />
                                            <img *ngIf="item.NSTATUS == '4'" src="./assets/icons/reproceso.png"/>
                                            &nbsp;{{ item.SSTATUS_DES }}
                                        </td>
                                    </tr>
                                </tbody>
                            </ng-template>
                        </div>
                    </div>
                    <div *ngIf="listToShow != null && listToShow.length > 0"
                         class="row"
                         style="display: flex;">
                        <div class="col-sm-12">
                            <ngb-pagination [(page)]="currentPage"
                                            [pageSize]="itemsPerPage"
                                            [collectionSize]="totalItems"
                                            [maxSize]="maxSize"
                                            (pageChange)="pageChanged(currentPage)">
                                <ng-template ngbPaginationPrevious>ANTERIOR</ng-template>
                                <ng-template ngbPaginationNext>SIGUIENTE</ng-template>
                            </ngb-pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--PANTALLA DETALLE DE APROBACION BANCO-->
<ng-template #contentDetalle
             let-modal>
    <div class="modal-header">
        <h4 class="modal-title"
            id="modal-basic-title">
            DETALLE DE PAGO A BANCOS
        </h4>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="row row-cols-5 m-2">
                <div class="col">
                    <span>INTERFAZ</span>
                    <input type="text"
                           class="form-control"
                           disabled
                           [(ngModel)]="detalle.PROCESO" />
                </div>
                <div class="col">
                    <span>ORIGEN</span>
                    <input type="text"
                           class="form-control"
                           disabled
                           [(ngModel)]="detalle.ORIGEN" />
                </div>
                <div class="col">
                    <span>BANCO ORIGEN</span>
                    <input type="text"
                           class="form-control"
                           disabled
                           [(ngModel)]="detalle.BANCO" />
                </div>
                <div class="col">
                    <span>MONEDA</span>
                    <input type="text"
                           class="form-control"
                           disabled
                           [(ngModel)]="detalle.MONEDA" />
                </div>
                <div class="col">
                    <span>ESTADO</span>
                    <select class="form-control"
                            (change)="selectEstado()"
                            [(ngModel)]="detalle.P_NSTATUS">
                        <option value="null">TODOS</option>
                        <option *ngFor="let item of estadosDet"
                                value="{{ item.NESTADO }}">{{ item.SESTADO_DES }}</option>
                    </select>
                </div>
            </div>
            <div class="row row-cols-5 m-2">
                <div class="col">
                    <span>BUSCAR POR</span>
                    <select class="form-control"
                            [(ngModel)]="detalle.P_NTIPO"
                            (change)="seleccionarTipoDet()">
                        <option value="null"
                                >TODOS</option>                                
                        <option *ngFor="let item of tipoBusquedas"
                                value="{{ item.CODIGO }}">{{ item.DESCRIPCION }}</option>
                    </select>
                </div>
                <div class="col">
                    <span>&nbsp;</span>
                    <input type="text"
                           placeholder="INGRESE BÚSQUEDA"
                           class="form-control"
                           [(ngModel)]="detalle.P_SVALOR" 
                           
                           (keyup)="buscarNombreRazonSocialD()"/>
                </div>
                <div class="col">
                    <span>&nbsp;</span>
                    <button class="full-color"
                            (click)="searchDetalleDoc()">
                        <span>BUSCAR</span>
                    </button>
                </div>
                <div class="col">
                    <!--<span>OPERACIÓN BANCO</span>-->
                    OPERACIÓN BANCO
                    <span style="display: flex;">                        
                        <input type="text"
                           placeholder="NÚMERO DE PROCESO"
                           class="form-control"
                           [(ngModel)]="detalle.PROC_BANCO"
                           maxlength="30" />
                          <button class="btn-filtro" (click)="setNumProc()">...</button>
                    </span>
                </div>
                <div class="col">
                    <span>&nbsp;</span>
                    <button class="full-colorN" (click)="getReportAproDET_XLS()">
                        <span>DESCARGAR EXCEL</span>
                        <img class="icon-btn"
                             src="./assets/icons/download2.png" />
                    </button>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="row m-2">
                <div class="grid form-group">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr class="grid-title">
                                    <td class="grid-title-item text-center">DETALLE</td>
                                    <td class="grid-title-item text-center">TIP.DOC.</td>
                                    <td class="grid-title-item text-center">DOCUMENTO</td>
                                    <td class="grid-title-item text-center" *ngIf="NNUMORI !== 1">POLIZA</td>
                                    <td class="grid-title-item text-center">BENEFICIARIO</td>
                                    <td class="grid-title-item text-center">IMPORTE</td>
                                    <!--<td class="grid-title-item text-center">NÚM EXACTUS</td>-->
                                    <td class="grid-title-item text-center">OPER.BANCO</td>
                                    <td class="grid-title-item text-center">FECHA OPERACIÓN</td>
                                    <td class="grid-title-item text-center">FECHA APROBADO</td>
                                    <td class="grid-title-item text-center" style="width: 30%;">ESTADO</td>
                                    <td class="grid-title-item text-center">OBSERVACIÓN</td>
                                    <!--<td class="grid-title-item text-center">R</td>-->
                                    <td class="grid-title-item text-center">
                                        <input type="checkbox"
                                               [(ngModel)]="checked"
                                               [disabled]="checkedAll"
                                               (change)="checkAllProc()" />
                                    </td>
                                    <td class="grid-title-item text-center"></td>
                                </tr>
                            </thead>
                            <ng-container *ngIf="listToShowDet == null || listToShowDet.length == 0; then hideGrid else showGrid"></ng-container>
                        </table>
                        <ng-template #hideGrid>
                            <tbody>
                                <tr>
                                    <td class="text-center"
                                        colspan="12">No se encontraron registros.</td>
                                </tr>
                            </tbody>
                        </ng-template>
                        <ng-template #showGrid>
                            <tbody *ngFor="let item of listToShowDet">
                                <tr>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.NIDPAYBNKD }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.SBEN_DOC_DESC }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.SBEN_DOC_NUM }}
                                    </td>
                                    <td class="data-table-tr-td text-center" *ngIf="NNUMORI !== 1">
                                        {{ item.POLIZA }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.SBEN_NOM_CLI }}
                                    </td>
                                    <td class="data-table-tr-td text-right">
                                        {{ item.NAMOUNT }}
                                    </td>
                                    <!-- <td class="data-table-tr-td text-center">
                                        {{ item.CNUMEXA }}
                                    </td> -->
                                    <td class="data-table-tr-td text-center" *ngIf="!item.NSTATUS == '0'">
                                        {{ item.CIDOPERBNK }}
                                    </td>
                                    <td class="data-table-tr-td text-center" *ngIf="item.NSTATUS == '0'">
                                        <input type="text" class="widthInput" [(ngModel)]="item.CIDOPERBNK" />
                                    </td>
                                    <td class="data-table-tr-td text-center" *ngIf="!item.NSTATUS == '0'">
                                        {{ item.DFEC_OPER }}
                                    </td>
                                    <td class="data-table-tr-td text-center" *ngIf="item.NSTATUS == '0'">
                                        <input type="text" class="widthInput" #dp="bsDatepicker" bsDatepicker DateDirective [bsConfig]="bsConfig" [maxDate]="diaActual" [(ngModel)]="item.DFEC_OPER" />
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.DFEC_APROB }}
                                    </td>
                                    <td class="data-table-tr-td" style="width: 30%;">
                                        <img *ngIf="item.NSTATUS == '0'" src="./assets/icons/process2.png" />
                                        <img *ngIf="item.NSTATUS == '1'" src="./assets/icons/inProcess.png" />
                                        <img *ngIf="item.NSTATUS == '2'" src="./assets/icons/process.png" />
                                        <img *ngIf="item.NSTATUS == '3'" src="./assets/icons/process-error.png" />
                                        <img *ngIf="item.NSTATUS == '4'" src="./assets/icons/reproceso.png"/>
                                        &nbsp;{{ item.SSTATUS_DES }}
                                    </td>
                                    <td [ngClass]="item.OBSERVACION ? 'data-table-tr-td text-center onHover' : 'text-center'" (click)="seleccionarCons(contentConsulta, item);">
                                        {{ item.OBSERVACION }}
                                    </td>
                                    <!-- <td class="data-table-tr-td text-center">
                                        {{ item.CID_RE_OPEN }}
                                    </td> -->
                                    <td class="data-table-tr-td text-center">
                                        <input type="checkbox"
                                               [(ngModel)]="item.IS_SELECTED"
                                               [disabled]="item.NSTATUS == '0' ? null : true"
                                               (change)="checkProc()" />
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        <a (click)="seleccionarDet(contentObservacion, item)">
                                            <i title="Editar"
                                               style="cursor: pointer;"
                                               class="fa fa-edit fa-lg"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </ng-template>
                    </div>
                </div>
                <div *ngIf="listToShowDet != null && listToShowDet.length > 0"
                     class="row"
                     style="display: flex">
                    <div class="col-sm-12">
                        <ngb-pagination [(page)]="currentPageDet"
                                        [pageSize]="itemsPerPageDet"
                                        [collectionSize]="totalItemsDet"
                                        [maxSize]="maxSizeDet"
                                        (pageChange)="pageChangedDet(currentPageDet)">
                            <ng-template ngbPaginationPrevious>ANTERIOR</ng-template>
                            <ng-template ngbPaginationNext>SIGUIENTE</ng-template>
                        </ngb-pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button"
                class="btn btn-secondary buttonN"
                (click)="modal.dismiss('Cross click')">
            CANCELAR
        </button>
        <button type="button"
                class="btn btn-secondary ml-2 buttonN"
                (click)="aprobar()">
            APROBAR
        </button>
    </div>
</ng-template>

<ng-template #contentConsulta
             let-modal>
    <div class="modal-header">
        <h4 class="modal-title"
            id="modal-basic-title">
            DETALLE DE OBSERVACIÓN
        </h4>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="row m-2">
                <div class="grid form-group">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr class="grid-title">
                                    <td class="grid-title-item text-center">DETALLE</td>
                                    <td class="grid-title-item text-center">FECHA OBSERVACIÓN</td>
                                    <td class="grid-title-item text-center">USUARIO</td>
                                    <td class="grid-title-item text-center">FECHA APROBACIÓN</td>
                                    <td class="grid-title-item text-center">RESUELTO</td>
                                </tr>
                            </thead>
                            <ng-container
                                          *ngIf="observaciones == null || observaciones.length == 0; then hideGrid else showGrid"></ng-container>
                        </table>
                        <ng-template #hideGrid>
                            <tbody>
                                <tr>
                                    <td class="text-center"
                                        colspan="5">No se encontraron registros.</td>
                                </tr>
                            </tbody>
                        </ng-template>
                        <ng-template #showGrid>
                            <tbody *ngFor="let item of observaciones">
                                <tr>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.SDES_OBSERV }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.DFEC_OBSERV }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.CUSERCODE }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.DFEC_RESULT }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        <input type="checkbox"
                                            [(ngModel)]="item.IS_SELECTED"
                                            [disabled]="true" />
                                    </td>
                                </tr>
                            </tbody>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button"
                class="btn btn-secondary buttonN"
                (click)="modal.dismiss('Cross click')">
            CANCELAR
        </button>
    </div>
</ng-template>

<ng-template #contentObservacion
             let-modal>
    <div class="modal-header">
        <h4 class="modal-title"
            id="modal-basic-title">
            DETALLE DE OBSERVACIÓN
        </h4>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="row m-2">
                <div class="col-sm-2">
                    <span>DESCRIPCIÓN:</span>
                </div>
                <div class="col-sm-7">
                    <textarea class="form-control"
                              [(ngModel)]="agregarObservacion.P_SDES_OBSERV"
                              placeholder="INGRESE UNA OBSERVACIÓN"
                              [disabled]="saveObsTxtBool"></textarea>
                </div>
                <div class="col-sm-3">
                    <button class="mt-2"
                            (click)="newObs()"
                            [disabled]="saveObsButBool"
                            [ngClass]="saveObsButBool ? 'disabled' : 'full-color'">
                        <span>AGREGAR</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="row m-2">
                <div class="grid form-group">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr class="grid-title">
                                    <td class="grid-title-item text-center">DETALLE</td>
                                    <td class="grid-title-item text-center">FECHA OBSERVACIÓN</td>
                                    <td class="grid-title-item text-center">USUARIO</td>
                                    <td class="grid-title-item text-center">FECHA APROBACIÓN</td>
                                    <td class="grid-title-item text-center">RESUELTO</td>
                                </tr>
                            </thead>
                            <ng-container
                                          *ngIf="observaciones == null || observaciones.length == 0; then hideGrid else showGrid"></ng-container>
                        </table>
                        <ng-template #hideGrid>
                            <tbody>
                                <tr>
                                    <td class="text-center"
                                        colspan="5">No se encontraron registros.</td>
                                </tr>
                            </tbody>
                        </ng-template>
                        <ng-template #showGrid>
                            <tbody *ngFor="let item of observaciones">
                                <tr>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.SDES_OBSERV }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.DFEC_OBSERV }}
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        {{ item.CUSERCODE }}
                                    </td>
                                    <!-- <td class="data-table-tr-td text-center">
                                        {{ item.DFEC_RESULT }}
                                    </td> -->
                                    <td class="data-table-tr-td text-center">
                                        <input type="text" #dp="bsDatepicker" bsDatepicker DateDirective [bsConfig]="bsConfig" [(ngModel)]="item.DFEC_RESULT" [disabled]="true" class="widthInputN" />
                                    </td>
                                    <td class="data-table-tr-td text-center">
                                        <!-- [disabled]="item.NSTA_RESULT == '1'" -->
                                        <input type="checkbox"
                                            [(ngModel)]="item.IS_SELECTED"
                                            [disabled]="true"
                                            (change)="getCheckedObsList()" />
                                    </td>
                                </tr>
                            </tbody>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button"
                class="btn btn-secondary buttonN"
                (click)="modal.dismiss('Cross click')">
            CANCELAR
        </button>
        <!-- <button type="button"
                class="btn btn-secondary ml-2 buttonN"
                (click)="resolver()">
            RESOLVER
        </button> -->
    </div>
</ng-template>