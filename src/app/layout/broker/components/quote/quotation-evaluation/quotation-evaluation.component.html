<div class="form-group row">
    <div class="col-lg-3">
      <app-nav-menuprod></app-nav-menuprod>
    </div>
    <div class="col-lg-9">
      <div class="container-fluid">
        <div class="header-content mb-3">
          <div class="containt-item">
            <!--Gestión de Trámite EHH-->
          <div
            class="header-item"
            *ngIf="
              isTransact ||
              isPolizaMatriz ||
              flagGobiernoIniciado ||
              emitirCertificadoOperaciones ||
              emitirPolizaOperaciones ||
              procesarPolizaOperaciones"
          >
            <span class="title">
              {{ titleTransact }} | Trámite N° {{ transactNumber }}</span
            >
              <span class="title">
                <h6>
                Cotización N° {{ quotationNumber }} | Fecha Cotización:
                  {{ inputsQuotation.Date | date: "dd/MM/yyyy" }}
                </h6>
              </span>
            </div>
          <div
            class="header-item"
            *ngIf="
              !isTransact &&
              !isPolizaMatriz &&
              !flagGobiernoIniciado &&
              !emitirCertificadoOperaciones &&
              !emitirPolizaOperaciones &&
              !procesarPolizaOperaciones"
          >
            <span class="title"
              >Detalle de Cotización N° {{ quotationNumber }} |
              {{ TitleOperacion }}</span
            >
              <span class="title">
                <h6>
                  Fecha Cotización:
                  {{ inputsQuotation.Date | date: "dd/MM/yyyy" }}
                </h6>
              </span>
            </div>
          </div>
          <p class="eps-title">{{ lblProducto }}</p>
        </div>
        <div class="collapse-list">
          <div>
            <input class="collapse-open" type="checkbox" id="contratante" />
            <label class="collapse-btn title" for="contratante">
              DATOS DEL CONTRATANTE
              <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <div class="row">
                  <div class="col-sm-3">
                    <span>TIPO DOCUMENTO (*)</span>
                    <select disabled [(ngModel)]="inputsQuotation.DocumentTypeId" class="minimal">
                      <option value="{{ inputsQuotation.DocumentTypeId }}">
                        {{ inputsQuotation.DocumentTypeName }}
                      </option>
                    </select>
                  </div>
                  <div class="col-sm-3">
                    <span>NRO DE DOCUMENTO (*)</span>
                    <input type="text" placeholder="Nro Documento" [(ngModel)]="inputsQuotation.DocumentNumber" disabled
                      value="{{ inputsQuotation.DocumentNumber }}" />
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-9">
                    <span>NOMBRES Y APELLIDOS / RAZÓN SOCIAL</span>
                    <input type="text" placeholder="Nombres" disabled [(ngModel)]="inputsQuotation.P_SNOMBRES" />
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <span>DIRECCIÓN</span>
                    <input type="text" placeholder="Dirección" disabled [(ngModel)]="inputsQuotation.P_SDESDIREBUSQ" />
                  </div>
                  <div class="col-sm-3">
                    <span>CORREO ELECTRÓNICO</span>
                    <input type="text" placeholder="Correo Electrónico" [disabled]="!flagEmail"
                      [(ngModel)]="inputsQuotation.P_SE_MAIL" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Agregar Contacto -->
        <div class="collapse-list" *ngIf="
            contractingdata != null && flagContact && template.ins_addContact
          ">
          <div>
            <input class="collapse-open" type="checkbox" id="contactos" />
            <label class="collapse-btn title" for="contactos">Datos de contacto del cliente
              <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <div class="row">
                  <div class="col-sm-12 mt-15">
                    <button *ngIf="contactList.length == 0" class="pull-right" (click)="openModal('add-contact')"
                      style="margin: 0">
                      <span>Agregar Contacto</span>
                    </button>
                    <table class="table table-borderless riesgo tblbroker" style="margin-top: 60px">
                      <thead>
                        <tr class="d-flex">
                          <td class="col-sm text-center">N°</td>
                          <td class="col-sm text-center">Parentesco</td>
                          <td class="col-sm text-center">Nombres y Apellidos</td>
                          <td class="col-sm text-center">Teléfono</td>
                          <td class="col-sm text-center">Correo Electrónico</td>
                          <td class="col-sm text-center">Acciones</td>
                        </tr>
                      </thead>
                      <tbody *ngFor="let contacto of contactList; let row = index">
                        <tr class="d-flex">
                          <td class="col-sm text-center">{{ row + 1 }}</td>
                          <td class="col-sm text-center">
                            {{ contacto.P_DESTICONTACTO }}
                          </td>
                          <td class="col-sm text-center">
                            {{ contacto.P_SNOMBRES }} {{ contacto.P_SAPEPAT }}
                            {{ contacto.P_SAPEMAT }}
                          </td>
                          <td class="col-sm text-center">
                            {{ contacto.P_SPHONE }}
                          </td>
                          <td class="col-sm text-center">
                            {{ contacto.P_SE_MAIL }}
                          </td>
                          <td class="col-sm text-center">
                            <img *ngIf="contacto.P_CLASS == ''" src="assets/icons/editar.png"
                              (click)="editContact(contacto.P_NROW)" title="Editar" alt="Editar" />
                            &nbsp;
                            <img *ngIf="contacto.P_CLASS == ''" src="assets/icons/anular.png" (click)="deleteContact(row)"
                              title="Eliminar" alt="Eliminar" />
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="contactList.length == 0">
                        <tr class="d-flex">
                          <td class="col-sm text-center">No tiene Contactos</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Fin Agregar Contacto -->
        <div class="collapse-list">
          <div>
            <input class="collapse-open" type="checkbox" id="comercializador" />
            <label class="collapse-btn title" for="comercializador">
              DATOS DE BROKERS
              <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <div class="row" style="margin-top: 20px">
                  <div class="col-sm-12" *ngIf="
                      inputsQuotation.SecondaryBrokerList != null &&
                      inputsQuotation.SecondaryBrokerList.length > 0
                    ">
                    <table class="table table-borderless riesgo tblbroker">
                      <thead>
                        <tr class="d-flex">
                          <th class="col-sm text-center">
                            <label>Tipo Documento</label>
                          </th>
                          <th class="col-sm text-center">
                            <label>Nro Documento</label>
                          </th>
                          <th class="col-sm text-center">
                            <label>Nombres y Apellidos / Razón Social </label>
                          </th>
                          <th class="col-sm text-center" *ngIf="isTransact && nTransac == 13">
                            <label>Tipo de Contrantante </label>
                          </th>
                          <th class="col-sm text-center" *ngIf="isTransact && nTransac == 13">
                            <label>Coódigo SBS</label>
                          </th>
                        <th class="col-sm text-center"
                            *ngIf="codProducto == 3"> <!-- AVS - Comisiones 31/05/2023 -->
                            <label>{{ variable.var_desComisionVL }}</label>
                        </th>
                        <ng-container
                          *ngIf="
                              inputsQuotation.SaludDetailsList != null &&
                              inputsQuotation.SaludDetailsList.length > 0 &&
                            template.ins_comSalud">
                            <th class="col-sm text-center">
                              <label>{{ variable.var_desComisionSalud }}</label>
                            </th>
                          <th class="col-sm text-center ctasa"
                              *ngIf="template.ins_comSaludPro">
                            <label>
                              <input
                                *ngIf="mode == 'Recotizar' && template.ins_recotizarSalud"
                                [disabled]="mode != 'Recotizar'"
                                type="checkbox"
                                [checked]="false"
                                class="checkbox"
                                [(ngModel)]="enabledHealthSecondaryPropCommission"
                                (ngModelChange)="switchHealthSecondaryPropCommissionValue()"/>
                              <span class="schk">{{variable.var_desComisionSaludPro}}</span>
                            </label>
                            </th>
                          <th
                            class="col-sm text-center ctasa"
                            *ngIf="mode != 'Recotizar'">
                            <label>
                              <input
                                *ngIf="mode == 'Evaluar' && canProposeRate && template.ins_comSaludProCheck"
                                type="checkbox"
                                [checked]="false"
                                class="checkbox"
                                [(ngModel)]="enabledHealthSecondaryAuthCommission"
                                (ngModelChange)="switchHealthSecondaryAuthCommissionValue()"/>
                                <span class="schk"> Autorizada</span></label>
                            </th>
                          </ng-container>
                        <ng-container
                          *ngIf="inputsQuotation.PensionDetailsList?.length > 0 && template.ins_comPension">
                            <th class="col-sm text-center">
                              <label>{{ variable.var_desComisionPension }}</label>
                            </th>
                            <th class="col-sm text-center ctasa" *ngIf="template.ins_comPensionPro">
                              <label><input *ngIf="
                                    mode == 'Recotizar' &&
                                    template.ins_recotizarPension
                                  " [disabled]="mode != 'Recotizar'" type="checkbox" [checked]="false" class="checkbox"
                                  [(ngModel)]="
                                    enabledPensionSecondaryPropCommission
                                  " (ngModelChange)="
                                    switchPensionSecondaryPropCommissionValue()
                                  " />
                                <span class="schk">
                                  {{ variable.var_desComisionPensionPro }}</span></label>
                            </th>
                            <th class="col-sm text-center ctasa" *ngIf="mode != 'Recotizar'">
                              <label><input *ngIf="
                                    mode == 'Evaluar' &&
                                    canProposeRate &&
                                    template.ins_comPensionProCheck
                                  " type="checkbox" [checked]="false" class="checkbox" [(ngModel)]="
                                    enabledPensionSecondaryAuthCommission
                                  " (ngModelChange)="
                                    switchPensionSecondaryAuthCommissionValue()
                                  " />
                                <span class="schk"> Autorizada</span></label>
                            </th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody *ngFor="let item of inputsQuotation.SecondaryBrokerList">
                        <tr class="d-flex">
                          <td class="col-sm text-center">
                            <span>{{ item.DES_DOC_COMER }}</span>
                          </td>
                          <td class="col-sm text-center">
                            <span>{{ item.DOC_COMER }}</span>
                          </td>
                          <td class="col-sm text-center">
                            <span>{{ item.COMERCIALIZADOR }}</span>
                          </td>
                          <td class="col-sm text-center" *ngIf="isTransact && nTransac == 13">
                            <span>{{ item.TYPE_INTERMEDIARY }}</span>
                          </td>
                          <td class="col-sm text-center" *ngIf="isTransact && nTransac == 13">
                            <span>{{ item.CODE_SBS }}</span>
                          </td>
                        <ng-container
                          *ngIf="inputsQuotation.SaludDetailsList?.length > 0 && template.ins_comSalud || codProducto == 3">
                          <td class="col-sm text-center" *ngIf="codProducto != 3">
                            <span>{{ item.COMISION_SALUD }}</span>
                          </td>
                            <td class="col-sm text-center">
                            <span>{{ item.COMISION_SALUD_AUT | number: '1.2-2' }}%</span> <!-- AVS - Comisiones 31/05/2023 -->
                            </td>
                          <td class="col-sm" *ngIf="codProducto != 3">
                            <input
                              *ngIf="item.COMISION_SALUD != 0"
                              type="text"
                              placeholder="0"
                              maxlength="5"
                              class="text-center"
                              [disabled]="mode != 'Recotizar' || !enabledHealthSecondaryPropCommission"
                              [(ngModel)]="item.COMISION_SALUD_PRO"
                              [ngClass]="{'error-validate': item.valItemSalPr}"
                              (ngModelChange)="changeSaludPropuestaPr($event, item.DOC_COMER)"
                              FloatDirective/>
                            <input
                              *ngIf="item.COMISION_SALUD == 0"
                              type="text"
                              class="text-center"
                              placeholder="0"
                              disabled/>
                            </td>
                          <td class="col-sm" *ngIf="mode != 'Recotizar' && codProducto != 3">
                            <input
                              *ngIf="item.COMISION_SALUD != 0"
                              type="text"
                              class="text-center"
                              [ngClass]="{ 'error-validate': item.valItemSal }"
                              maxlength="5"
                              [disabled]="!enabledHealthSecondaryAuthCommission"
                              [(ngModel)]="item.COMISION_SALUD_AUT"
                              (ngModelChange)="changeSaludPropuesta($event, item.DOC_COMER)"
                              FloatDirective/>
                            <input
                              *ngIf="item.COMISION_SALUD == 0"
                              type="text"
                              class="text-center"
                              placeholder="0"
                              disabled/>
                            </td>
                          </ng-container>
                        <ng-container
                          *ngIf="inputsQuotation.PensionDetailsList?.length > 0 && template.ins_comPension">
                            <td class="col-sm text-center">
                              <span>{{ item.COMISION_PENSION }}</span>
                            </td>
                            <td class="col-sm">
                            <input
                              *ngIf="item.COMISION_PENSION != 0"
                              type="text"
                              placeholder="0"
                              maxlength="5"
                              class="text-center"
                              [ngClass]="{
                                  'error-validate': item.valItemPenPr
                              }"
                              [disabled]="
                                  mode != 'Recotizar' ||
                                  !enabledPensionSecondaryPropCommission
                              "
                              [(ngModel)]="item.COMISION_PENSION_PRO"
                              FloatDirective
                              (ngModelChange)="
                                  changePensionPropuestaPr($event, item.DOC_COMER)
                              "
                            />
                            <input
                              *ngIf="item.COMISION_PENSION == 0"
                              type="text"
                              class="text-center"
                              placeholder="0"
                              disabled
                            />
                            </td>
                            <td *ngIf="mode != 'Recotizar'" class="col-sm">
                            <input
                              *ngIf="item.COMISION_PENSION != 0"
                              type="text"
                              class="text-center"
                              [ngClass]="{ 'error-validate': item.valItemPen }"
                              [disabled]="
                                  !enabledPensionSecondaryAuthCommission
                              "
                              maxlength="5"
                              FloatDirective
                              [(ngModel)]="item.COMISION_PENSION_AUT"
                              (ngModelChange)="
                                  changePensionPropuesta($event, item.DOC_COMER)
                              "
                            />
                            <input
                              *ngIf="item.COMISION_PENSION == 0"
                              type="text"
                              class="text-center"
                              placeholder="0"
                              disabled
                            />
                            </td>
                          </ng-container>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="collapse-list">
          <div>
            <input class="collapse-open" type="checkbox" id="cotizacion" />
            <label class="collapse-btn title" for="cotizacion">{{ variable.var_seccionDatos }}
              <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <ng-container *ngIf="codProducto == 2">
                  <div class="row">
                    <div class="col-sm-3" *ngIf="template.ins_tipRenovacion">
                      <span>TIPO RENOVACIÓN</span>
                      <select [(ngModel)]="inputsQuotation.tipoRenovacion" class="minimal" disabled>
                        <option value="{{ inputsQuotation.tipoRenovacion }}">
                          {{ inputsQuotation.desTipoRenovacion }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_iniVigencia">
                      <span>INICIO VIGENCIA</span>
                      <input type="text" #dp="bsDatepicker" (ngModelChange)="validarTipoRenovacion($event)"
                        [bsConfig]="bsConfig" bsDatepicker [(bsValue)]="inputsQuotation.inicioVigencia"
                        [(ngModel)]="inputsQuotation.inicioVigencia" name="bsValueIni"
                        [(minDate)]="inputsQuotation.inicioVigenciaIni" [(maxDate)]="inputsQuotation.inicioVigenciaFin"
                        disabled readonly #desde />
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_finVigencia">
                      <span>FIN VIGENCIA</span>
                      <input type="text" #dp="bsDatepicker" [bsConfig]="bsConfig" bsDatepicker
                        [(bsValue)]="inputsQuotation.finVigencia" [(ngModel)]="inputsQuotation.finVigencia"
                        name="bsValueFin" disabled readonly #hasta />
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_frecPago">
                      <span>FRECUENCIA PAGO</span>
                      <select [(ngModel)]="inputsQuotation.frecuenciaPago" class="minimal" disabled>
                        <option value="{{ inputsQuotation.frecuenciaPago }}">
                          {{ inputsQuotation.desFrecuenciaPago }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-3">
                      <span>MONEDA</span>
                      <select [(ngModel)]="inputsQuotation.CurrencyId" disabled class="minimal">
                        <option value="{{ inputsQuotation.CurrencyId }}">
                          {{ inputsQuotation.CurrencyName }}
                        </option>
                      </select>
                    </div>
                    <div *ngIf="template.ins_sede" class="col-sm-3">
                      <span>SEDE</span>
                      <select [(ngModel)]="inputsQuotation.LocationId" disabled class="minimal">
                        <option value="{{ inputsQuotation.LocationId }}">
                          {{ inputsQuotation.LocationName }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_mina">
                      <span>&nbsp;</span>
                      <label *ngIf="!inputsQuotation.HasDelimiter"
                        style="width: 100%; margin-bottom: 0"><span></span></label>
                      <label *ngIf="inputsQuotation.HasDelimiter" style="width: 100%; margin-bottom: 0"><span
                          class="spn-delimiter">* La actividad cuenta con delimitación</span></label>
                      <label style="width: 100%; margin-bottom: 0" *ngIf="codProducto == 2"><input disabled
                          type="checkbox" [(ngModel)]="inputsQuotation.IsMining" class="checkbox" /><span
                          class="schk chk-mina">¿Trabajos en mina?</span></label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-6" *ngIf="template.ins_actRealizar">
                      <span>ACTIVIDAD A REALIZAR</span>
                      <select [(ngModel)]="inputsQuotation.TechnicalActivityId" disabled class="minimal"
                        title="{{ inputsQuotation.TechnicalActivityName }}">
                        <option value="{{ inputsQuotation.TechnicalActivityId }}">
                          {{ inputsQuotation.TechnicalActivityName }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-6" *ngIf="template.ins_subActividad">
                      <span>SUB-ACTIVIDADES</span>
                      <select [(ngModel)]="inputsQuotation.EconomicActivityId" disabled class="minimal"
                        title="{{ inputsQuotation.EconomicActivityName }}">
                        <option value="{{ inputsQuotation.EconomicActivityId }}">
                          {{ inputsQuotation.EconomicActivityName }}
                        </option>
                      </select>
                    </div>
                    <div *ngIf="template.ins_departamento" class="col-sm-3">
                      <span>DEPARTAMENTO (*)</span>
                      <select [(ngModel)]="inputsQuotation.DepartmentId" disabled class="minimal">
                        <option value="{{ inputsQuotation.DepartmentId }}">
                          {{ inputsQuotation.DepartmentName }}
                        </option>
                      </select>
                    </div>
                    <div *ngIf="template.ins_provincia" class="col-sm-3">
                      <span>PROVINCIA (*)</span>
                      <select [(ngModel)]="inputsQuotation.ProvinceId" disabled class="minimal">
                        <option value="{{ inputsQuotation.ProvinceId }}" selected>
                          {{ inputsQuotation.ProvinceName }}
                        </option>
                      </select>
                    </div>
                    <div *ngIf="template.ins_distrito" class="col-sm-3">
                      <span>DISTRITO (*)</span>
                      <select [(ngModel)]="inputsQuotation.DistrictId" disabled class="minimal">
                        <option value="{{ inputsQuotation.DistrictId }}" selected>
                          {{ inputsQuotation.DistrictName }}
                        </option>
                      </select>
                    </div>
                  </div>
                </ng-container>
                <ng-container *ngIf="codProducto == 3">
                  <div class="row">
                    <div class="col-sm-3" *ngIf="template.ins_tipRenovacion">
                      <span>TIPO RENOVACIÓN</span>
                    <select
                      [(ngModel)]="inputsQuotation.tipoRenovacion"
                      class="minimal"
                      disabled
                    >
                        <option value="{{ inputsQuotation.tipoRenovacion }}">
                          {{ inputsQuotation.desTipoRenovacion }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_iniVigencia">
                      <span>INICIO VIGENCIA</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      (ngModelChange)="validarTipoRenovacion($event)"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      [(bsValue)]="inputsQuotation.inicioVigencia"
                      [(ngModel)]="inputsQuotation.inicioVigencia"
                      name="bsValueIni"
                      [(minDate)]="inputsQuotation.inicioVigenciaIni"
                      [(maxDate)]="inputsQuotation.inicioVigenciaFin"
                      [disabled]="valModFechaEmision(1)"
                      readonly
                      #desde
                    />
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_finVigencia">
                      <span>FIN VIGENCIA</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      [(bsValue)]="inputsQuotation.finVigencia"
                      [(ngModel)]="inputsQuotation.finVigencia"
                      name="bsValueFin"
                      disabled
                      readonly
                      #hasta
                    />
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-3" *ngIf="template.ins_frecPago">
                      <span>FRECUENCIA PAGO</span>
                    <select
                      [(ngModel)]="inputsQuotation.frecuenciaPago"
                      class="minimal"
                      disabled
                    >
                        <option value="{{ inputsQuotation.frecuenciaPago }}">
                          {{ inputsQuotation.desFrecuenciaPago }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_iniVigenciaAseg">
                      <span>INICIO VIGENCIA DE ASEGURADOS</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      [(bsValue)]="inputsQuotation.FDateIniAseg"
                      #desdeAseg
                      [(ngModel)]="inputsQuotation.FDateIniAseg"
                      [(minDate)]="inputsQuotation.FDateIniAsegMin"
                      [(maxDate)]="inputsQuotation.FDateFinAseg"
                      name="FDateIniAseg"
                      [disabled]="true"
                      readonly
                    />
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_finVigenciaAseg">
                      <span>FIN VIGENCIA DE ASEGURADOS</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      [(ngModel)]="inputsQuotation.FDateFinAseg"
                      [(bsValue)]="inputsQuotation.FDateFinAseg"
                      [(minDate)]="inputsQuotation.inicioVigenciaIni"
                      name="FDateFinAseg"
                      [disabled]="true"
                      value="{{
                          inputsQuotation.FDateFinAseg | date: 'dd/MM/yyyy'
                      }}"
                      #hasta
                      readonly
                    />
                    </div>
                  <div
                    class="col-sm-3"
                    *ngIf="this.perfil != this.variable.var_prefilExterno"
                  >
                      <span>&nbsp;</span>
                      <small>&nbsp;</small>
                    <label style="width: 100%; margin-bottom: 0">
                      <input
                        type="checkbox"
                        disabled
                        [(ngModel)]="inputsQuotation.NREM_EXC"
                        (change)="validarExcel(null, 1)"
                        class="checkbox"
                      />
                        <span class="schk chk-mina">¿Sin tope de ley?</span>
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-3" *ngIf="template.ins_tipoCuenta">
                      <span>TIPO DE CUENTA</span>
                    <select
                      [(ngModel)]="inputsQuotation.P_SISCLIENT_GBD"
                      [disabled]="true"
                      class="minimal"
                    >
                        <option value="2">PRIVADO</option>
                        <option value="1">GOBIERNO</option>
                      </select>
                    </div>
                    <div class="col-sm-3">
                      <span>MONEDA</span>
                    <select
                      [(ngModel)]="inputsQuotation.CurrencyId"
                      disabled
                      class="minimal"
                    >
                        <option value="{{ inputsQuotation.CurrencyId }}">
                          {{ inputsQuotation.CurrencyName }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_actRealizar">
                      <span>ACTIVIDAD ECONÓMICA</span>
                    <select
                      [(ngModel)]="inputsQuotation.TechnicalActivityId"
                      disabled
                      class="minimal"
                      title="{{ inputsQuotation.TechnicalActivityName }}"
                    >
                        <option value="{{ inputsQuotation.TechnicalActivityId }}">
                          {{ inputsQuotation.TechnicalActivityName }}
                        </option>
                      </select>
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_subActividad">
                      <span>CIIU (*)</span>
                    <select
                      [(ngModel)]="inputsQuotation.EconomicActivityId"
                      disabled
                      class="minimal"
                      title="{{ inputsQuotation.EconomicActivityName }}"
                    >
                        <option value="{{ inputsQuotation.EconomicActivityId }}">
                          {{ inputsQuotation.EconomicActivityName }}
                        </option>
                      </select>
                    </div>
                  <div
                    class="col-sm-3"
                    *ngIf="
                      !isTransact &&
                      ((mode == 'Excluir' && codProducto == 3) ||
                        (typeTran == 'Exclusión' &&
                          codProducto == 3 &&
                          mode == 'Visualizar') ||
                        (typeTran == 'Exclusión' &&
                          codProducto == 3 &&
                          mode == 'Recotizar') ||
                        (typeTran == 'Exclusión' &&
                          codProducto == 3 &&
                          mode == 'Enviar'))
                    "
                  >
                      <span>FECHA DE EXCLUSIÓN</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      [(bsValue)]="inputsQuotation.FechaAnulacion"
                      [(ngModel)]="inputsQuotation.FechaAnulacion"
                      [(minDate)]="inputsQuotation.FDateIniAseg"
                      [(maxDate)]="inputsQuotation.FDateFinAseg"
                      value="{{ inputsQuotation.FechaAnulacion | date:'dd/MM/yyyy' }}"
                      [disabled]="true"
                      readonly
                      #anulacion
                    />
                    </div>
                    <div class="col-sm-3" *ngIf="template.ins_mina">
                      <span>&nbsp;</span>
                    <label
                      *ngIf="!inputsQuotation.HasDelimiter"
                      style="width: 100%; margin-bottom: 0"
                      ><span></span
                    ></label>
                    <label
                      *ngIf="inputsQuotation.HasDelimiter"
                      style="width: 100%; margin-bottom: 0"
                      ><span class="spn-delimiter"
                        >* La actividad cuenta con delimitación</span
                      ></label
                    >
                    <label style="width: 100%; margin-bottom: 0"
                      ><input
                        disabled
                        type="checkbox"
                        [(ngModel)]="inputsQuotation.IsMining"
                        class="checkbox"
                      /><span class="schk chk-mina"
                        >¿Trabajos en mina?</span
                      ></label
                    >
                  </div>
                  <div class="col-sm-3" *ngIf="flagGobiernoEstado == true">
                    <span>&nbsp;</span>
                    <small>&nbsp;</small>
                    <label style="width: 100%; margin-bottom: 0">
                      <input
                        type="checkbox"
                        [disabled]="true"
                        [(ngModel)]="PolizaMatrizTransac"
                        (change)="polizaMatriz($event)"
                        class="checkbox"
                      />
                      <span class="schk chk-mina">¿Póliza Matriz?</span>
                    </label>
                    </div>
                  <div class="col-sm-3">
                    <div
                      class="col"
                        *ngIf="flagGobiernoEstado && !flagGobiernoMatriz && infoTransact.STRANSAC != 'AN'"
                    >
                      <span>
                        * SI REQUIERE ENVIAR EL TRÁMITE AL EJECUTIVO COMERCIAL,
                        FAVOR DE ACTIVAR EL INDICADOR</span
                      >
                      <label style="width: 100%; margin-bottom: 0">
                        <input
                          type="checkbox"
                          [(ngModel)]="inputsQuotation.P_APROB_CLI"
                          (change)="aprobacionCliente($event)"
                          class="checkbox"
                          disabled
                        />
                        <span class="schk chk-mina"
                          >APROBACIÓN EJECUTIVO COMERCIAL</span
                        >
                      </label>
                    </div>
                    </div>
                  <div
                    class="col-sm-3"
                    *ngIf="codProducto == '3' && nTransac == 8"
                  >
                      <span>TIPO DE ENDOSO</span>
                    <select
                      [(ngModel)]="inputsQuotation.TYPE_ENDOSO"
                      disabled
                      name="TYPE_ENDOSO"
                      class="minimal"
                    >
                        <option value="">SELECCIONE</option>
                      <option
                        *ngFor="let endoso of tipoEndoso"
                        [value]="endoso.TYPE_ENDOSO"
                      >
                        {{ endoso.DES_TYPE_ENDOSO }}
                        </option>
                      </select>
                    </div>
                  <div
                    class="col-sm-3"
                    *ngIf="isTransact && codProducto == '3' && nTransac == 3"
                  >
                      <span>FECHA DE EXCLUSIÓN</span>
                    <input
                      type="text"
                      #dp="bsDatepicker"
                      [bsConfig]="bsConfig"
                      bsDatepicker
                      disabled
                      [(ngModel)]="inputsQuotation.FechaAnulacion"
                      readonly
                    />
                    </div>
                    <div class="col-sm-3" *ngIf="isTransact && codProducto == '3' && nTransac == 3">
                      <label style="width: 100%;margin-bottom: 0;">
                        <input type="checkbox" disabled
                            [(ngModel)]="inputsQuotation.primaCobrada"
                            name="prima_cobrada"
                            class="checkbox"><span class="schk"
                          style="margin-top: 15px; font-size: 13px;">¿DEVOLVER A PRIMA COBRADA?</span></label>
                    </div>
                    <div class="col-sm-3" *ngIf="isTransact && codProducto == '3' && nTransac == 13">
                      <span>FECHA DE EFECTO</span>
                      <input type="text" #dp="bsDatepicker" [bsConfig]="bsConfig"
                      bsDatepicker name="FDateEffectBroker" #desdeAseg disabled
                        [(ngModel)]="inputsQuotation.FDateEffectBroker" readonly>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>

        <!--------AVS - ANULACION-------->
        <div class="collapse-list" *ngIf="(codProducto == 3 && (perfil == 166 || perfil == 136 || perfil == 157) && infoTransact.STRANSAC == 'AN')">
            <input class="collapse-open" type="checkbox" id="cotizador" />
            <label class="collapse-btn title" for="cotizador">Cotizador
                <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i>
            </label>
            <div class="collapse-panel">
                <div class="collapse-inner collapse-border">
                    <div class="row">
                        <div class="col-sm-6">
                            <span>MOTIVO DE ANULACIÓN</span>
                            <select
                                [(ngModel)]="infoTransact.DES_ANULACION"
                                class="minimal"
                                disabled
                            >
                                <option value="{{infoTransact.DES_ANULACION}}">
                                    {{infoTransact.DES_ANULACION}}
                                </option>
                            </select>
                        </div>
                        <div class="col-sm-3" *ngIf="template.ins_iniVigencia">
                            <span>DESDE</span>
                            <input
                              type="text"
                              #dp="bsDatepicker"
                              [bsConfig]="bsConfig"
                              bsDatepicker
                              [(bsValue)]="inputsQuotation.FechaAnulacion"
                              [(ngModel)]="inputsQuotation.FechaAnulacion"
                              name="bsValueIni"
                              [(minDate)]="inputsQuotation.inicioVigenciaIni"
                              [(maxDate)]="inputsQuotation.inicioVigenciaFin"
                              disabled
                              readonly
                              #anulacion
                            />
                          </div>
                          <div class="col-sm-3" *ngIf="template.ins_finVigencia">
                                <span>HASTA</span>
                                <input
                                type="text"
                                #dp="bsDatepicker"
                                [bsConfig]="bsConfig"
                                bsDatepicker
                                [(bsValue)]="inputsQuotation.finVigencia"
                                [(ngModel)]="inputsQuotation.finVigencia"
                                name="bsValueFin"
                                disabled
                                readonly
                                #hasta
                                />
                          </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------->

      <div
        class="collapse-list"
        *ngIf="
            template.ins_trama &&
            codProducto == 3 &&
          !(flagGobiernoEstado && flagGobiernoMatriz) &&
          ((mode === 'Emitir' &&
              status === 'APROBADO' &&
            !emitirPolizaOperaciones) ||
            (mode === 'EmitirR' && status === 'APROBADO') ||
            isPolizaMatriz ||
            flagGobiernoIniciado)
        "
      >
          <div>
            <input class="collapse-open" type="checkbox" id="planilla" />
          <label class="collapse-btn title" for="planilla"
            >Datos de Trama
            <i
              class="fa fa-angle-down pull-right"
              style="position: relative; top: 4px"
            ></i
          ></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <div class="row">
                <div [hidden]="isPolizaMatriz" class="col-sm-3">
                    <span>TARIFA (*)</span>
                  <select
                    [(ngModel)]="inputsQuotation.P_COMISION"
                    [ngClass]="{ 'error-validate': validateField[16] != '' }"
                    class="minimal"
                    [disabled]="canTasaVL"
                  >
                      <option value="">SELECCIONE</option>
                    <option
                      *ngFor="let comision of comisionList"
                      value="{{ comision.idComision }}"
                    >
                      {{ comision.nroComision }}
                      </option>
                    </select>
                  </div>
                <div class="col-sm-3">
                    <span>TRAMA (*)</span>
                  <input #TramaFile
                    type="file"
                    class="mt-10"
                    (change)="seleccionExcel($event.target.files[0])"
                      [(ngModel)]="archivoExcel"
                    accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel.sheet.macroEnabled.12"
                      style="
                        position: relative;
                        top: 8px;
                        margin: 5px 0px;
                        width: 100%;
                    "
                  />
                  </div>
                  <div class="col-sm-3">
                    <span>&nbsp;</span>
                  <button
                    type="button"
                    style="display: inline-block"
                    (click)="validarExcel()"
                  >
                      <span>Validar</span>
                    </button>
                  </div>

                <div [ngClass]="template.ins_comision ? 'col-sm-3' : 'col-sm-3'">
                  <span>PLANTILLA (*)</span>
                  <button class="formatoTrama"
                         (click)="formatoTrama()"
                         style = "position: relative;
                                  top: 1px;
                                  margin: 5px 0px
                                 "
                  >
                    <i class="fa fa-download mr-2" aria-hidden="true"></i>
                    Descargar Formato
                  </button>
                </div>


                </div>
              </div>
            </div>
          </div>
        </div>
      <div
        class="collapse-list"
        *ngIf="
          codProducto == '3' &&
          (flagGobiernoIniciado == true || flagGobiernoEstado == true) &&
          isTransact
        "
      >
          <div *ngIf="infoTransact.STRANSAC != 'AN'">
          <input class="collapse-open" type="checkbox" id="planilla" />
          <label class="collapse-btn title" for="planilla"
            >Datos de correo de ejecutivo comercial<i
              class="fa fa-angle-down pull-right"
              style="position: relative; top: 4px"
            ></i
          ></label>
          <div class="collapse-panel">
            <div class="collapse-inner collapse-border">
              <div class="row">
                <div class="col-md-4">
                  <span>Correo electrónico (*)</span>
                  <input
                    type="text"
                    [(ngModel)]="inputsQuotation.SMAIL_EJECCOM"
                    [disabled]="true"
                    placeholder="Correo electrónico"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <span
                    >EL CORREO INGRESADO EN ESTA SECCIÓN, SE CONSIDERARÁ PARA EL
                    ENVÍO DEL TRAMITE A EVALUAR PARA LAS TRANSACCIONES.</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
        <div class="collapse-list">
        <!--INI Vista de cotización en modo  VISUALIZAR -->
        <div *ngIf="!isTransact && (this.typeTran != 'Emisión Póliza Matriz' && !( this.typeTran == '' &&  this.mode=='Visualizar' && flagGobiernoMatriz ) )">
            <input class="collapse-open" type="checkbox" id="calculadora" />
            <label class="collapse-btn title" for="calculadora">
              COTIZADOR
            <i
              class="fa fa-angle-down pull-right"
              style="position: relative; top: 4px"
            ></i
          ></label>
            <div class="collapse-panel">
              <div class="collapse-inner collapse-border">
                <div class="row mt-3" *ngIf="template.ins_mostrarTasas">
                  <div class="col-sm-6">
                    <table class="table table-borderless riesgo">
                      <thead>
                        <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                          <th class="col-sm-4">
                            <label style="font-weight: 100">Categoría</label>
                          </th>
                          <th class="col-sm-4">
                          <label style="font-weight: 100"
                            >Total Trabajadores</label
                          >
                          </th>
                          <th class="col-sm-4">
                            <label style="font-weight: 100">Monto Planilla</label>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                      <tr
                        class="d-flex"
                        *ngFor="
                            let item of this.inputsQuotation.SharedDetailsList
                        "
                      >
                          <td class="col-sm-4">
                            <span>{{ item.RiskTypeName }}</span>
                          </td>
                          <td class="col-sm-4">
                          <input
                            disabled
                            type="text"
                            placeholder="0"
                            value="{{ item.WorkersCount }}"
                          />
                          </td>
                          <td class="col-sm-4">
                          <input
                            disabled
                            type="text"
                            placeholder="0"
                            value="{{ item.PayrollAmount | prettyNumber: 2 }}"
                          />
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="row" style="margin-top: 15px">
                  <div [hidden]="hiddenPolizaMatriz" *ngIf="template.ins_categoriaList" class="col-sm-12">
                    <div class="row">
                      <div *ngIf="categoryList.length > 0" [ngClass]="mode != 'Autorizar' ? 'col-sm-6' : 'col-sm-8'">
                        <table class="table table-borderless riesgo">
                          <thead>
                              <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                                  <th *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 ||  tipoProceso == 4 ||  tipoProceso == 6" class="col-sm"><label style="font-weight: 100">Categoría</label></th>
                                  <!-- GCAA 22112023 DETALLE COTIZACION -->
                                  <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="col-sm text-center"><label style="font-weight: 100">Rango de Edad</label></th>
                                  <th class="col-sm text-center"><label style="font-weight: 100">Total Trabajadores</label></th>
                                  <th class="col-sm text-center"><label style="font-weight: 100">Monto Planilla</label></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr class="d-flex" *ngIf="categoryList.length == 0">
                              <td class="col-sm text-center">No hay tasas</td>
                            </tr>
                              <tr class="d-flex" *ngFor="let item of categoryList; let i = index">
                                  <td *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4||  tipoProceso == 6" class="col-sm"><span>{{ item.SCATEGORIA }}</span></td>
                                  <!-- GCAA 22112023 DETALLE COTIZACION -->
                                  <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="col-sm text-center"><span>{{ item.SRANGO_EDAD }}</span></td>
                                  <td class="col-sm text-center"><span>{{ item.NCOUNT }}</span></td>
                                  <td class="col-sm text-center"><span>{{ item.NTOTAL_PLANILLA | number : '1.2-2'}}</span></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    <div
                      class="col-sm-5"
                      *ngIf="mode == 'Recotizar' && typeTran == 'Inclusión'"
                    >
                      <span style="margin-top: 0;">COMENTARIO INCLUSIÓN</span>
                      <textarea
                        class="form-control"
                        cols="40"
                        rows="5"
                        style="width: 100%"
                        placeholder="Comentario"
                        [(ngModel)]="commentTran"
                        maxlength="4000"
                      ></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-12 pr-0 pl-0">
                  <div
                    class="col-sm-12"
                    style="margin-top: 15px"
                    *ngIf="
                        inputsQuotation.SaludDetailsList != null &&
                        inputsQuotation.SaludDetailsList.length > 0
                    "
                  >
                      <div class="row">
                        <div class="col-sm-3" *ngIf="template.ins_primaSaludMin">
                          <label class="mb-0"><span>{{
                              variable.var_primaMinimaSalud
                            }}</span></label>
                          <input type="text" placeholder="0" disabled [(ngModel)]="inputsQuotation.SaludMinPremium" />
                        </div>
                        <div class="col-sm-3" *ngIf="template.ins_primaSaludMinPro">
                          <label class="mb-0">
                            <span><input *ngIf="
                                  mode == 'Recotizar' &&
                                  template.ins_recotizarSalud
                                " type="checkbox" id="" style="top: 3px" class="checkbox"
                                [(ngModel)]="enabledHealthMinPropPremium" [checked]="false" (ngModelChange)="
                                  switchHealthMinPropPremiumValue()
                                " [disabled]="mode != 'Recotizar'" />
                              PRIMA MÍNIMA PROPUESTA</span></label>
                          <input type="text" placeholder="0" maxlength="12" style="margin-top: 4px !important" [disabled]="
                              mode != 'Recotizar' || !enabledHealthMinPropPremium
                            " [(ngModel)]="inputsQuotation.SaludPropMinPremium" (ngModelChange)="
                              checkMinimunPremiumForOriginals(
                                healthProductId,
                                $event
                              )
                            " FloatDirective />
                        </div>
                        <div class="col-sm-3" *ngIf="
                            mode != 'Recotizar' && template.ins_primaSaludAut
                          ">
                          <label class="mb-0"><span><input *ngIf="
                                  mode == 'Evaluar' &&
                                  canProposeRate &&
                                  template.ins_evaluarSalud
                                " type="checkbox" class="checkbox" [checked]="false"
                                [(ngModel)]="enabledHealthAuthorizedPremium" style="top: 3px" (ngModelChange)="
                                  switchHealthMinAuthPremiumValue()
                                " />
                              PRIMA MÍNIMA AUTORIZADA</span></label>
                          <input type="text" placeholder="0" maxlength="12" [disabled]="!enabledHealthAuthorizedPremium"
                            [(ngModel)]="inputsQuotation.HealthAuthMinPremium" style="margin-top: 3px !important"
                            (ngModelChange)="
                              checkMinimunPremiumForAuthorizedAmounts(
                                healthProductId,
                                $event
                              )
                            " FloatDirective />
                        </div>
                      </div>
                      <div class="card mt-3">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm">
                              <h5>SCTR SALUD</h5>
                            </div>
                          </div>
                          <div class="row">
                            <table class="table table-borderless riesgo tblTasas">
                              <thead>
                                <tr class="d-flex">
                                  <th class="col-sm text-center">
                                    <label>Categoría</label>
                                  </th>
                                  <th *ngIf="canSeeRiskRate" class="col-sm text-center">
                                    <label>Tasa Riesgo</label>
                                  </th>
                                  <th class="col-sm text-center">
                                    <label>{{ variable.var_tasaNeta }}</label>
                                  </th>
                                  <th class="col-sm text-center ctasa">
                                    <label><input *ngIf="
                                          mode == 'Recotizar' &&
                                          template.ins_recotizarSalud
                                        " [disabled]="mode != 'Recotizar'" type="checkbox" [checked]="false"
                                        class="checkbox" [(ngModel)]="enabledHealthProposedRate" (ngModelChange)="
                                          switchHealthProposedRateValues()
                                        " />
                                      <span class="schk">
                                        Propuesta (%)</span></label>
                                  </th>
                                  <th class="col-sm text-center">
                                    <label>Prima Mensual</label>
                                  </th>
                                  <th *ngIf="mode != 'Recotizar'" class="col-sm text-center ctasa">
                                    <label><input *ngIf="
                                          mode == 'Evaluar' &&
                                          template.ins_evaluarSalud
                                        " type="checkbox" [disabled]="!canProposeRate" id="" class="checkbox"
                                        [(ngModel)]="enabledHealthAuthorizedRate" (ngModelChange)="
                                          switchHealthAuthorizedRateValues()
                                        " /><span class="schk">
                                        Autorizada (%)</span></label>
                                  </th>
  
                                  <th *ngIf="mode != 'Recotizar' && cotEstado != 2" class="col-sm text-center">
                                    <label>Nueva Prima Mensual</label>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="d-flex" *ngIf="
                                    inputsQuotation.SaludDetailsList == null ||
                                    inputsQuotation.SaludDetailsList.length == 0
                                  ">
                                  <td class="col-sm text-center">
                                    No hay tasas asociadas
                                  </td>
                                </tr>
                                <tr class="d-flex" *ngFor="
                                    let item of inputsQuotation.SaludDetailsList;
                                    let row = index
                                  ">
                                  <td class="col-sm text-center">
                                    <span>{{ item.RiskTypeName }}</span>
                                  </td>
                                  <td *ngIf="canSeeRiskRate" class="col-sm text-center">
                                    <span>{{ item.RiskRate }} %</span>
                                  </td>
                                  <td class="col-sm text-center">
                                    <span>{{ item.Rate }} %</span>
                                  </td>
                                  <td class="col-sm">
                                    <input type="text" class="text-center" [checked]="false"
                                      [disabled]="!enabledHealthProposedRate" placeholder="0" [ngClass]="{
                                        'error-validate': item.valItemPr
                                      }" [(ngModel)]="
                                        inputsQuotation.SaludDetailsList[row]
                                          .ProposedRate
                                      " (ngModelChange)="
                                        changeTasaPropuestaSalud(
                                          $event,
                                          item.RiskTypeId
                                        )
                                      " (mouseup)="$event.target.select()" FloatSixDirective />
                                    <span class="porcentaje">%</span>
                                  </td>
                                  <td class="col-sm text-center">
                                    <span>{{
                                      item.Premium | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td *ngIf="mode != 'Recotizar'" class="col-sm">
                                    <input type="text" class="text-center" [disabled]="!enabledHealthAuthorizedRate"
                                      placeholder="0" [ngClass]="{
                                        'error-validate': item.valItemAu
                                      }" [(ngModel)]="
                                        inputsQuotation.SaludDetailsList[row]
                                          .AuthorizedRate
                                      " (ngModelChange)="
                                        calculateNewPremiums(
                                          $event,
                                          item.RiskTypeId,
                                          healthProductId
                                        )
                                      " (mouseup)="$event.target.select()" FloatSixDirective />
                                    <span class="porcentaje">%</span>
                                  </td>
                                  <td *ngIf="mode != 'Recotizar' && cotEstado != 2" class="col-sm text-center">
                                    <span>{{
                                      item.NewPremium | prettyNumber: 2
                                    }}</span>
                                  </td>
                                </tr>
                                <ng-container *ngIf="
                                    inputsQuotation.SaludDetailsList != null &&
                                    inputsQuotation.SaludDetailsList.length != 0
                                  ">
                                  <hr style="margin-bottom: 0" />
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-rigth" style="text-align: right">
                                      <span>{{ variable.var_primaNeta }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludNetAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludNewNetAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-rigth" style="text-align: right">
                                      <span>{{
                                        variable.var_primaComercial
                                      }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludPrimaComercial
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludNewPrimaComercial
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right">
                                      <span>{{ variable.var_igv }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludCalculatedIGV
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludNewCalculatedIGV
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right">
                                      <span>{{
                                        variable.var_primaComercialTotal
                                      }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludGrossAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.SaludNewGrossAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                </ng-container>
                              </tbody>
                            </table>
                            <div class="col-sm-12">
                              <p class="msg-error">{{ healthMessage }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div [ngClass]="
                        template.ins_pensionWithEvaluar ? 'col-sm-12' : 'col-sm-6'
                      " style="margin-top: 15px" *ngIf="
                        (inputsQuotation.PensionDetailsList != null &&
                          inputsQuotation.PensionDetailsList.length != 0) ||
                        categoryList?.length > 0
                    "
                  >
                    <div [hidden]="hiddenPolizaMatriz" class="row">
                      <div
                        class="col-sm-3"
                        *ngIf="template.ins_primaPensionMin"
                      >
                        <label class="mb-0"
                          ><span>{{
                              inputsQuotation.primaMinimaPension
                            }}</span></label>
                          <input type="text" placeholder="0" disabled [(ngModel)]="inputsQuotation.PensionMinPremium" />
                        </div>
                        <div *ngIf="template.ins_primaPensionMinPro" class="col-sm-3">
                          <label class="mb-0"><span><input *ngIf="
                                  mode == 'Recotizar' &&
                                  template.ins_recotizarPension
                                " type="checkbox" style="top: 3px" class="checkbox" [disabled]="mode != 'Recotizar'"
                                [checked]="false" [(ngModel)]="enabledPensionMinPropPremium" (ngModelChange)="
                                  switchPensionMinPropPremiumValue()
                                " />
                              PRIMA MÍNIMA PROPUESTA</span></label>
                          <input type="text" placeholder="0" maxlength="12" style="margin-top: 4px !important" [disabled]="
                              mode != 'Recotizar' || !enabledPensionMinPropPremium
                            " [(ngModel)]="inputsQuotation.PensionPropMinPremium" (ngModelChange)="
                              checkMinimunPremiumForOriginals(
                                pensionProductId,
                                $event
                              )
                            " FloatDirective />
                        </div>
                        <div class="col-sm-3" *ngIf="
                            mode != 'Recotizar' && template.ins_primaPensionAut
                          ">
                          <label class="mb-0"><span><input *ngIf="
                                  mode == 'Evaluar' &&
                                  canProposeRate &&
                                  template.ins_evaluarPension
                                " type="checkbox" class="checkbox" [checked]="false"
                                [(ngModel)]="enabledPensionAuthorizedPremium" style="top: 3px" (ngModelChange)="
                                  switchPensionMinAuthPremiumValue()
                                " />
                              PRIMA MÍNIMA AUTORIZADA</span></label>
                          <input type="text" placeholder="0" style="margin-top: 3px !important" maxlength="12"
                            [disabled]="!enabledPensionAuthorizedPremium"
                            [(ngModel)]="inputsQuotation.PensionAuthMinPremium" (ngModelChange)="
                              checkMinimunPremiumForAuthorizedAmounts(
                                pensionProductId,
                                $event
                              )
                            " FloatDirective />
                        </div>
                        <div *ngIf="template.ins_plan" class="col-sm-3">
                          <label class="mb-0"><span>{{ variable.var_desPlan }}</span></label>
                          <select [(ngModel)]="inputsQuotation.desTipoPlan" class="minimal" disabled>
                            <option value="{{ inputsQuotation.desTipoPlan }}">
                              {{ inputsQuotation.desTipoPlan }}
                            </option>
                          </select>
                        </div>
                      <!-- INI CAMBIOS COMISIONES VL -->

                      <div *ngIf="template.ins_comision_vl" class="col-sm-1">
                        <label class="mb-0"
                          ><span>{{ variable.var_desComision }}</span></label
                        >
                        <input
                          type="text"
                          [(ngModel)]="descriptionComisionVL"
                          class="minimal"
                          disabled
                        />

                      </div>

                       <!-- FIN CAMBIOS COMISIONES VL -->

                        <!--Ini - Marcos Silverio-->
                        <div *ngIf="template.ins_plan && inputsQuotation.desTipoPlan=='Plan Maestro'" class="col-sm-1">
                          <label class="mb-0"><span>Coberturas</span></label>
                          <br />
                          <a class="col-sm-12" (click)="seeCovers(quotationNumber)">
                            <img alt="Ver planes"
                                 src="assets/icons/see.svg"
                                 style="cursor: pointer;height: 24px;margin-left: 10px">
                          </a>
                        </div>
                        <!--Fin - Marcos Silverio-->
  
                        <div class="col-sm-3" *ngIf="template.ins_comisionPro">
                          <label class="mb-0"><span>COMISIÓN PROPUESTA</span></label>
                          <input type="text" placeholder="0" style="margin-top: 4px !important"
                            [disabled]="!template.ins_comisionPro" maxlength="12"
                            [(ngModel)]="inputsQuotation.comisionPro" FloatDirective />
                        </div>
                        <div class="col-sm-3" *ngIf="template.ins_comisionAut">
                          <label class="mb-0"><span><input type="checkbox" style="top: 3px" class="checkbox"
                                [(ngModel)]="comisionAut" />
                              COMISIÓN AUTORIZADA</span></label>
                          <input type="text" placeholder="0" style="margin-top: 4px !important" [disabled]="!comisionAut"
                            maxlength="12" [(ngModel)]="inputsQuotation.comisionAut" FloatSixDirective />
                        </div>
                      </div>
                      <div class="card mt-3" *ngIf="
                          inputsQuotation.PensionDetailsList != null &&
                          inputsQuotation.PensionDetailsList.length > 0 &&
                          codProducto == 2
                        ">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm">
                              <h5>{{ variable.var_nomSubProducto }}</h5>
                            </div>
                          </div>
                          <!--PENSION-->
                          <div class="row">
                            <table class="table table-borderless riesgo tblTasas">
                              <thead>
                                <tr class="d-flex">
                                  <th class="col-sm text-center">
                                    <label>Categoría</label>
                                  </th>
                                  <th *ngIf="canSeeRiskRate" class="col-sm text-center">
                                    <label>Tasa Riesgo</label>
                                  </th>
                                  <th class="col-sm text-center">
                                    <label>{{ variable.var_tasaNeta }}</label>
                                  </th>
                                  <th class="col-sm text-center ctasa">
                                    <label><input *ngIf="
                                          mode == 'Recotizar' &&
                                          template.ins_recotizarPension
                                        " [disabled]="mode != 'Recotizar'" type="checkbox" [checked]="false"
                                        class="checkbox" [(ngModel)]="enabledPensionProposedRate" (ngModelChange)="
                                          switchPensionProposedRateValues()
                                        " />
                                      <span class="schk">
                                        Propuesta (%)</span></label>
                                  </th>
                                  <th class="col-sm text-center">
                                    <label>Prima Mensual</label>
                                  </th>
                                  <th *ngIf="mode != 'Recotizar'" class="col-sm text-center ctasa">
                                    <label><input *ngIf="
                                          mode == 'Evaluar' &&
                                          template.ins_evaluarPension
                                        " [disabled]="!canProposeRate" type="checkbox" class="checkbox"
                                        [(ngModel)]="enabledPensionAuthorizedRate" (ngModelChange)="
                                          switchPensionAuthorizedRateValues()
                                        " />
                                      <span class="schk"> Autorizada</span></label>
                                  </th>
                                  <th *ngIf="mode != 'Recotizar' && cotEstado != 2" class="col-sm text-center">
                                    <label>Nueva Prima Mensual</label>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="d-flex" *ngIf="
                                    inputsQuotation.PensionDetailsList == null ||
                                    inputsQuotation.PensionDetailsList.length == 0
                                  ">
                                  <td colspan="4" class="col-sm text-center">
                                    No hay tasas asociadas
                                  </td>
                                </tr>
                                <tr class="d-flex" *ngFor="
                                    let item of inputsQuotation.PensionDetailsList;
                                    let row = index
                                  ">
                                  <td class="col-sm text-center">
                                    <span>{{ item.RiskTypeName }}</span>
                                  </td>
                                  <td *ngIf="canSeeRiskRate" class="col-sm text-center">
                                    <span>{{ item.RiskRate }} %</span>
                                  </td>
                                  <td class="col-sm text-center">
                                    <span>{{ item.Rate }} %</span>
                                  </td>
                                  <td class="col-sm">
                                    <input type="text" class="text-center" FloatDirective
                                      [disabled]="!enabledPensionProposedRate" placeholder="0" [ngClass]="{
                                        'error-validate': item.valItemPr
                                      }" [(ngModel)]="
                                        inputsQuotation.PensionDetailsList[row]
                                          .ProposedRate
                                      " (mouseup)="$event.target.select()" (ngModelChange)="
                                        changeTasaPropuestaPension(
                                          $event,
                                          item.RiskTypeId
                                        )
                                      " FloatSixDirective />
                                    <span class="porcentaje">%</span>
                                  </td>
                                  <td class="col-sm text-center">
                                    <span>{{
                                      item.Premium | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td *ngIf="mode != 'Recotizar'" class="col-sm">
                                    <input type="text" class="text-center" [checked]="false"
                                      [disabled]="!enabledPensionAuthorizedRate" placeholder="0" [ngClass]="{
                                        'error-validate': item.valItemAu
                                      }" [(ngModel)]="
                                        inputsQuotation.PensionDetailsList[row]
                                          .AuthorizedRate
                                      " (mouseup)="$event.target.select()" (ngModelChange)="
                                        calculateNewPremiums(
                                          $event,
                                          item.RiskTypeId,
                                          pensionProductId
                                        )
                                      " FloatSixDirective />
                                    <span class="porcentaje">%</span>
                                  </td>
                                  <td *ngIf="mode != 'Recotizar' && cotEstado != 2" class="col-sm text-center">
                                    <span>{{
                                      item.NewPremium | prettyNumber: 2
                                    }}</span>
                                  </td>
                                </tr>
                                <ng-container *ngIf="
                                    inputsQuotation.PensionDetailsList != null &&
                                    inputsQuotation.PensionDetailsList.length != 0
                                  ">
                                  <hr style="margin-bottom: 0" />
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right" style="text-align: right">
                                      <span>{{ variable.var_primaNeta }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionNetAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionNewNetAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right" style="text-align: right">
                                      <span>{{
                                        variable.var_primaComercial
                                      }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionPrimaComercial
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionNewPrimaComercial
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right">
                                      <span>{{ variable.var_igv }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionCalculatedIGV
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionNewCalculatedIGV
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                  <tr class="d-flex">
                                    <td class="col-sm text-center"></td>
                                    <td *ngIf="canSeeRiskRate" class="col-sm text-center"></td>
                                    <td class="col-sm text-center"></td>
                                    <td class="col-sm text-right">
                                      <span>{{
                                        variable.var_primaComercialTotal
                                      }}</span>
                                    </td>
                                    <td class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionGrossAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td *ngIf="mode != 'Recotizar'" class="col-sm text-center"></td>
                                    <td *ngIf="
                                        mode != 'Recotizar' && cotEstado != 2
                                      " class="col-sm text-center">
                                      <span>{{
                                        inputsQuotation.PensionNewGrossAmount
                                          | prettyNumber: 2
                                      }}</span>
                                    </td>
                                  </tr>
                                </ng-container>
                              </tbody>
                            </table>
                            <div class="col-sm-12">
                              <p class="msg-error">{{ pensionMessage }}</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!--VIDA LEY-->
                    <div
                      [hidden]="
                        hiddenPolizaMatriz ||
                        (!flagGobiernoIniciado && flagGobiernoEstado && mode!= 'Visualizar'  && mode!='Enviar' ) ||
                        (emitirPolizaOperaciones && flagGobiernoEstado && mode !='Visualizar'  && mode!='Enviar' ) ||
                        (procesarPolizaOperaciones && flagGobiernoEstado && mode !='Visualizar'  && mode!='Enviar')
                      "class="row"
                      *ngIf="codProducto == 3">
                        <div class="col-sm-4">
                          <div class="card mt-3">
                            <div class="card-body">
                              <div class="row">
                                <div class="col-sm">
                                  <h5>{{ variable.var_nomSubProducto }}</h5>
                                </div>
                              </div>
                            <div
                              *ngIf="
                                !isPolizaMatriz ||
                                flagGobiernoIniciado ||
                                emitirPolizaOperaciones ||
                                procesarPolizaOperaciones
                              "
                              class="row">
                                  <table class="table table-borderless riesgo tblTasas">
                                  <thead>
                                    <tr>
                                              <th *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" class="text-center"><label style="font-size: 12px !important;">Categoría</label></th>
                                              <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label style="font-size: 12px !important;">Rango de Edad</label></th><!-- GCAA 22112023 DETALLE COTIZACION -->
                                              <th class="text-right"><label style="font-size: 12px !important;">Tasa</label></th>
                                              <th class="text-right" *ngIf=" inputsQuotation.frecuenciaPago == 5 "><label style="font-size: 12px !important;">Prima Mensual</label></th>
                                              <th class="text-right" *ngIf=" inputsQuotation.frecuenciaPago == 4 "><label style="font-size: 12px !important;">Prima Bimestral</label></th>
                                              <th class="text-right" *ngIf=" inputsQuotation.frecuenciaPago == 3 "><label style="font-size: 12px !important;">Prima Trimestral</label></th>
                                              <th class="text-right" *ngIf=" inputsQuotation.frecuenciaPago == 2 "><label style="font-size: 12px !important;">Prima Semestral</label></th>
                                              <th class="text-right" *ngIf=" inputsQuotation.frecuenciaPago == 1 "><label style="font-size: 12px !important;">Prima Anual</label></th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                          <tr *ngIf="CalculateList == null || CalculateList.length == 0 " >
                                              <td class="text-center"> No hay tasas asociadas </td>
                                    </tr>
                                          <tr *ngFor="let item of CalculateList; let row = index ">
                                              <td *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 ||  tipoProceso == 4 ||  tipoProceso == 6 "  class="text-center"><span style="font-size: 12px !important;">{{ item.CategoryCalculate }}</span></td>
                                              <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span style="font-size: 12px !important;">{{ item.SRANGO_EDAD }}</span></td><!-- GCAA 22112023 DETALLE COTIZACION -->
                                              <!--<td class="text-right"><span style="font-size: 12px !important;">{{ item.RateCalculate | number:'1.2-2' }}%</span></td>-->
                                              <td class="text-right"><span style="font-size: 12px !important;">{{ item.RateCalculate }}%</span></td>
                                              <td class="text-right"><span style="font-size: 12px !important;">{{ item.PremiumCalculate | number : '1.2-2' }}</span></td>
                                  </tr>
                                          <tr *ngFor="let item of CalculateDetailList; let i = index" style="border-top: 1px solid #ddd">
                                          <!-- GCAA 22112023 DETALLE COTIZACION se cambia colspan de 2 a 3.-->
                                              <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5"  colspan="3" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionCalculate }}</span></td>
                                              <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6"  colspan="2" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionCalculate }}</span></td>
                                              <td class="text-right"><span style="font-size: 12px !important;">{{ item.AmountCalculate | number : '1.2-2' }}</span></td>
                                    </tr>
                                </tbody>
                              </table>
                            </div>
                            <div
                              *ngIf="isPolizaMatriz || (!flagGobiernoIniciado  && flagGobiernoEstado && mode !='Visualizar' && mode!='Enviar')"
                                class="row">
                                <table class="table table-borderless riesgo tblTasas">
                                <thead>
                                  <tr>
                                          <th class="text-center"><label>Categoría</label></th>
                                          <th class="text-right"><label>Tasa</label></th>
                                          <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 5"><label>Prima Mensual</label></th>
                                          <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 4"><label>Prima Bimestral</label></th>
                                          <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 3"><label>Prima Trimestral</label></th>
                                          <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 2"><label>Prima Semestral</label></th>
                                          <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 1"><label>Prima Anual</label></th>
                                  </tr>
                                </thead>
                                <tbody>
                                      <tr *ngIf="CalculateList == null || CalculateList.length == 0">
                                          <td class="text-center">No hay tasas asociadas</td>
                                  </tr>
                                      <tr *ngFor="let item of CalculateList;let i = index">
                                          <td class="text-center" *ngIf="item.sactive == true"><span>{{ item.SCATEGORIA }}</span></td>
                                          <td class="text-center prTasas" *ngIf="item.sactive == true"><span>{{ item.NTASA }}%</span></td>
                                    <td
                                      [className]="
                                        this.inputsQuotation.frecuenciaPago ==
                                          5 && template.ins_cuadroTipoFrecu
                                          ? 'borderSides text-center'
                                                                  : 'text-center'"
                                                              *ngIf="inputsQuotation.frecuenciaPago == 5"><span>{{item.NPREMIUMN_MEN | prettyNumber: 2}}</span>
                                    </td>
                                    <td
                                      [className]="
                                        this.inputsQuotation.frecuenciaPago ==
                                          4 && template.ins_cuadroTipoFrecu
                                          ? 'borderSides text-center'
                                          : 'text-center'
                                      "
                                      *ngIf="
                                        inputsQuotation.frecuenciaPago == 4
                                      "
                                    >
                                      <span>{{
                                        item.NPREMIUMN_BIM | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td
                                      [className]="
                                        this.inputsQuotation.frecuenciaPago ==
                                          3 && template.ins_cuadroTipoFrecu
                                          ? 'borderSides text-center'
                                          : 'text-center'
                                      "
                                      *ngIf="
                                        inputsQuotation.frecuenciaPago == 3
                                      "
                                    >
                                      <span>{{
                                        item.NPREMIUMN_TRI | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td
                                      [className]="
                                        this.inputsQuotation.frecuenciaPago ==
                                          2 && template.ins_cuadroTipoFrecu
                                          ? 'borderSides text-center'
                                          : 'text-center'
                                      "
                                      *ngIf="
                                        inputsQuotation.frecuenciaPago == 2
                                      "
                                    >
                                      <span>{{
                                        item.NPREMIUMN_SEM | prettyNumber: 2
                                      }}</span>
                                    </td>
                                    <td
                                      [className]="
                                        this.inputsQuotation.frecuenciaPago ==
                                          1 && template.ins_cuadroTipoFrecu
                                          ? 'borderSides text-center'
                                          : 'text-center'
                                      "
                                      *ngIf="
                                        inputsQuotation.frecuenciaPago == 1
                                      "
                                    >
                                      <span>{{
                                        item.NPREMIUMN_ANU | prettyNumber: 2
                                        }}</span>
                                      </td>
                                    </tr>
                                  <tr
                                    *ngFor="
                                        let item of CalculateDetailList;
                                        let i = index
                                    "
                                    style="border-top: 1px solid #ddd"
                                  >
                                      <td colspan="2" class="text-right">
                                        <span>{{
                                          item.DescriptionCalculate
                                        }}</span>
                                      </td>

                                      <td class="text-right">
                                        <span>{{
                                        item.AmountCalculate | number: "1.2-2"
                                        }}</span>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                        <div
                          class="card mt-3"
                          *ngIf="
                              ProposalList != null && ProposalList.length > 0
                          "
                        >
                            <div class="card-body">
                              <div class="row">
                                <div class="col-sm">
                                  <h5>&nbsp;</h5>
                                </div>
                              </div>
                              <div class="row" *ngIf="codProducto == 3">
                                  <table class="table table-borderless riesgo tblTasas">
                                  <thead>
                                    <tr>
                                              <th *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" class="text-center"><label style="font-size: 12px !important;">Categoría</label></th>
                                              <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label style="font-size: 12px !important;">Rango de Edad</label></th><!-- GCAA 22112023 DETALLE COTIZACION -->
                                              <th class="text-right"><label style="font-size: 12px !important;">Tasa Propuesta</label></th>
                                              <th class="text-right"><label style="font-size: 12px !important;">Prima Propuesta</label></th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                          <tr *ngIf="ProposalList == null || ProposalList.length == 0">
                                              <td class="text-center">No hay tasas asociadas</td>
                                    </tr>
                                          <tr *ngFor="let item of ProposalList;let row = index">
                                              <td *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" class="text-center"><span style="font-size: 12px !important;">{{ item.CategoryProposal }}</span></td>
                                              <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span style="font-size: 12px !important;">{{ item.SRANGO_EDAD }}</span></td>  <!-- GCAA 22112023 DETALLE COTIZACION -->
                                              <td class="text-right"><span style="font-size: 12px !important;">{{item.RateProposal}}%</span>
                                              <!--<td class="text-right"><span style="font-size: 12px !important;">{{item.RateProposal | number:'1.2-2'}}%</span>-->
                                                 <!-- <input style="width: 75% !important;height: 30px !important;font-size: 12px !important;"
                                        type="text"
                                        class="text-right"
                                        [checked]="false"
                                        placeholder="0"
                                        FloatSixDirective
                                        maxlength="12"
                                        [disabled]="true"
                                        [(ngModel)]="item.RateProposal"
                                        (blur)="changePropossedRate()"
                                        (keyup.enter)="changePropossedRate()"
                                                  />-->
                                      </td>
  
                                              <td style="padding-left: 100px !important" class="text-right">
                                                  <span style="font-size: 12px !important;">{{item.PremiumProposal | number: '1.2-2'}}</span>
                                      </td>
                                    </tr>
                                          <tr *ngFor=" let item of ProposalDetailList;let i = index" style="border-top: 1px solid #ddd">
                                               <!-- GCAA 22112023 DETALLE COTIZACION se cambia colspan de 2 a 3.-->
                                              <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5 " colspan="3" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionProposal }}</span></td>
                                              <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6" colspan="2" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionProposal }}</span></td>
                                              <td class="text-right"><span style="font-size: 12px !important;">{{ item.AmountProposal | number: '1.2-2' }}</span></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>

                      <div class="col-sm-4">
                        <div
                          class="card mt-3"
                          *ngIf="
                            AuthorizedList != null && AuthorizedList.length > 0
                          "
                        >
                          <div class="card-body">
                            <div class="row">
                              <div class="col-sm">
                                <h5>&nbsp;</h5>
                              </div>
                            </div>
                            <div class="row" *ngIf="codProducto == 3">
                                <table class="table table-borderless riesgo tblTasas">
                                <thead>
                                  <tr>
                                          <th *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" class="text-center"><label style="font-size: 12px !important;">Categoría</label></th>
                                          <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label style="font-size: 12px !important;">Rango de Edad</label></th><!-- GCAA 22112023 DETALLE COTIZACION -->
                                          <th class="text-right"><label style="font-size: 12px !important;">Tasa Autorizada</label></th>
                                          <th class="text-right"><label style="font-size: 12px !important;">Prima Autorizada</label></th>
                                  </tr>
                                </thead>
                                <tbody>
                                      <tr *ngIf="AuthorizedList == null || AuthorizedList.length == 0">
                                          <td class="text-center">No hay tasas asociadas</td>
                                  </tr>
                                      <tr *ngFor="let item of AuthorizedList;let row = index">
                                          <td *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" class="text-center"><span style="font-size: 12px !important;">{{ item.CategoryAuthorized }}</span></td>
                                          <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span style="font-size: 12px !important;">{{ item.SRANGO_EDAD }}</span></td>    <!-- GCAA 22112023 DETALLE COTIZACION -->
                                          <!--<td class="text-right"><span style="font-size: 12px !important;">{{AuthorizedList[row].RateAuthorized | number:'1.2-2'}}%</span>-->
                                          <td class="text-right"><span style="font-size: 12px !important;">{{AuthorizedList[row].RateAuthorized}}%</span>
                                              <!--<input style="width: 75% !important;height: 30px !important;font-size: 12px !important;"
                                        type="text"
                                        class="text-right"
                                        [checked]="false"
                                        placeholder="0"
                                        FloatSixDirective
                                        [disabled]="mode != 'Autorizar'"
                                        [(ngModel)]="
                                          AuthorizedList[row].RateAuthorized
                                        "
                                        (blur)="changeAuthorizedRate()"
                                        (keyup.enter)="changeAuthorizedRate()"
                                              />-->
                                    </td>
                                          <td style="padding-left: 100px !important" class="text-right">
                                              <span style="font-size: 12px !important;">{{item.PremiumAuthorized | number: '1.2-2'}}</span>
                                    </td>
                                  </tr>
                                      <tr *ngFor="let item of AuthorizedDetailList; let i = index " style="border-top: 1px solid #ddd" >
                                          <!-- GCAA 22112023 DETALLE COTIZACION se cambia colspan de 2 a 3.-->
                                          <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5" colspan="3" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionAuthorized }}</span></td>
                                          <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6" colspan="2" class="text-right"><span style="font-size: 12px !important;">{{ item.DescriptionAuthorized }}</span></td>
                                          <td class="text-right"><span style="font-size: 12px !important;">{{ item.AmountAuthorized | number: '1.2-2' }}</span></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-12">
                  <!--  || !flagGobiernoIniciado-->
                  <div class="row" *ngIf="isPolizaMatriz">
                    <span>
                      * SE REQUIERE ENVIAR EL TRAMITE AL CLIENTE PARA SU
                      EVALUACION, FAVOR DE ACTIVAR EL INDICADOR "APROBACIÓN DE
                      CLIENTE"</span
                    >
                  </div>
                </div>
                <div class="col-sm-12">
                  <div class="row" *ngIf="isPolizaMatriz">
                    <label style="width: 100%; margin-bottom: 0">
                      <input
                        type="checkbox"
                        [(ngModel)]="inputsQuotation.P_APROB_CLI"
                        (change)="aprobacionCliente($event)"
                        class="checkbox"
                        disabled
                      />
                      <span class="schk chk-mina">APROBACIÓN DE CLIENTE</span>
                    </label>
                  </div>
                </div>
                <div class="col-sm-12">
                  <div class="row" style="margin-top: 25px">
                    <div class="col-sm-6">
                      <h5 style="font-size: 14px">ARCHIVO ADJUNTOS</h5>
                      <table class="table table-borderless riesgo tblbroker">
                        <thead>
                          <tr class="d-flex">
                            <th class="col-sm text-center">
                              <label>Nombre del archivo</label>
                            </th>
                            <th class="col-sm text-center">
                              <label>Descargar</label>
                            </th>
                          </tr>
                        </thead>
                        <tbody
                          *ngIf="
                            inputsQuotation.FilePathList != null &&
                            inputsQuotation.FilePathList.length > 0
                          "
                        >
                          <tr
                            *ngFor="let item of inputsQuotation.FilePathList"
                            class="d-flex"
                          >
                            <td class="col-sm text-center">
                              <span>{{ item | fileName }}</span>
                            </td>
                            <td class="col-sm text-center">
                              <a (click)="downloadFile(item)"
                                ><img
                                  src="assets/icons/imprimir.png"
                                  title="Descargar"
                                  style="cursor: pointer"
                                  alt="Descargar"
                              /></a>
                            </td>
                          </tr>
                        </tbody>
                        <tbody
                          *ngIf="
                            inputsQuotation.FilePathList == null ||
                            inputsQuotation.FilePathList.length == 0
                          "
                        >
                          <tr class="d-flex">
                            <td colspan="2" class="col-sm text-center">
                              <span>No se encontraron archivos</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="col-sm-6">
                      <span style="margin-top: 0;">COMENTARIO</span>
                      <textarea
                        class="form-control"
                        cols="40"
                        rows="5"
                        style="width: 100%"
                        placeholder="Comentario"
                        maxlength="4000"
                        disabled
                        >{{ inputsQuotation.Comment }}</textarea
                      >
                    </div>

                    <div
                      class="col-sm-3 margin-top-10"
                      *ngIf="!!creditHistory &&
                        codProducto == 3 &&
                        (mode == 'Evaluar' ||
                          (mode == 'Emitir' && !!inputsQuotation.estadoPago) ||
                          (mode == 'EmitirR' && !!inputsQuotation.estadoPago) ||
                          (mode == 'Renovar' && !!inputsQuotation.estadoPago) ||
                          (mode == 'Incluir' && !!inputsQuotation.estadoPago) ||
                          (mode == 'Endosar' && !!inputsQuotation.estadoPago))"
                    >
                      <label>PAGO ADELANTADO</label>
                      <label style="width: 100%; margin-bottom: 0">
                        <input
                          type="checkbox"
                          [(ngModel)]="inputsQuotation.formaPago"
                          [disabled]="mode == 'Evaluar' ? true : false"
                          class="checkbox"
                        /><span class="schk chk-mina">Pago Adelantado</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
          <!--FIN Vista de cotización en modo  VISUALIZAR -->
        <!-- emitirPolizaOperaciones ini-->
        <div
          *ngIf="
            codProducto == 3 &&
            isTransact &&
            (emitirPolizaOperaciones || procesarPolizaOperaciones)
          "
        >
          <input class="collapse-open" type="checkbox" id="calculadora" />
          <label class="collapse-btn title" for="calculadora">
            COTIZADOR
            <i
              class="fa fa-angle-down pull-right"
              style="position: relative; top: 4px"
            ></i
          ></label>
          <div class="collapse-panel">
            <div class="collapse-inner collapse-border">
              <div class="row mt-3" *ngIf="template.ins_mostrarTasas">
                <div class="col-sm-6">
                  <table class="table table-borderless riesgo">
                    <thead>
                      <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                        <th class="col-sm-4">
                          <label style="font-weight: 100">Categoría</label>
                        </th>
                        <th class="col-sm-4">
                          <label style="font-weight: 100"
                            >Total Trabajadores</label
                          >
                        </th>
                        <th class="col-sm-4">
                          <label style="font-weight: 100">Monto Planilla</label>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr
                        class="d-flex"
                        *ngFor="
                          let item of this.inputsQuotation.SharedDetailsList
                        "
                      >
                        <td class="col-sm-4">
                          <span>{{ item.RiskTypeName }}</span>
                        </td>
                        <td class="col-sm-4">
                          <input
                            disabled
                            type="text"
                            placeholder="0"
                            value="{{ item.WorkersCount }}"
                          />
                        </td>
                        <td class="col-sm-4">
                          <input
                            disabled
                            type="text"
                            placeholder="0"
                            value="{{ item.PayrollAmount | prettyNumber: 2 }}"
                          />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="row" style="margin-top: 15px">
                  <!-- INICIO GCAA 03072024 -->
                    <div [hidden]="hiddenPolizaMatriz" *ngIf="template.ins_categoriaList" class="col-sm-12">
                  <div class="row">
                        <div *ngIf="categoryList.length > 0" [ngClass]="mode != 'Autorizar' ? 'col-sm-6' : 'col-sm-8'">
                      <table class="table table-borderless riesgo">
                        <thead>
                                <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                                <th class="col-sm text-center">
                              <label style="font-weight: 100">Categoría</label>
                            </th>
                            <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="col-sm text-center">
                                    <label style="font-weight: 100">Rango de Edad</label>
                                </th>
                                <th class="col-sm text-center">
                                    <label style="font-weight: 100">Total Trabajadores</label>
                            </th>
                            <th class="col-sm text-center">
                                    <label style="font-weight: 100">Monto Planilla</label>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="d-flex" *ngIf="categoryList.length == 0">
                            <td class="col-sm text-center">No hay tasas</td>
                          </tr>
                          <tr class="d-flex" *ngFor="let item of categoryList; let i = index">
                                <td class="col-sm text-center"><span>{{ item.SCATEGORIA }}</span></td>
                                <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="col-sm text-center"><span>{{ item.SRANGO_EDAD }}</span></td>
                                <td class="col-sm text-center"><span>{{ item.NCOUNT }}</span></td>
                                <td class="col-sm text-center"><span>{{item.NTOTAL_PLANILLA | number: "1.2-2"}}</span></td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div
                  [ngClass]="'col-sm-12'"
                  style="margin-top: 15px"
                  *ngIf="categoryList?.length > 0"
                >
                  <div [hidden]="hiddenPolizaMatriz" class="row">
                    <div class="col-sm-3" *ngIf="template.ins_primaPensionMin">
                      <label class="mb-0"
                        ><span>{{
                          inputsQuotation.primaMinimaPension
                        }}</span></label
                      >
                      <input
                        type="text"
                        placeholder="0"
                        disabled
                        [(ngModel)]="inputsQuotation.PensionMinPremium"
                      />
                    </div>

                    <div *ngIf="template.ins_plan" class="col-sm-3">
                      <label class="mb-0"
                        ><span>{{ variable.var_desPlan }}</span></label
                      >
                      <select
                        [(ngModel)]="inputsQuotation.desTipoPlan"
                        class="minimal"
                        disabled
                      >
                        <option value="{{ inputsQuotation.desTipoPlan }}">
                          {{ inputsQuotation.desTipoPlan }}
                        </option>
                      </select>
                    </div>

                    <div
                      *ngIf="
                        template.ins_plan &&
                        inputsQuotation.desTipoPlan == 'Plan Maestro'
                      "
                      class="col-sm-1"
                    >
                      <label class="mb-0"><span>Coberturas</span></label>
                      <br />
                      <a class="col-sm-12" (click)="seeCovers(quotationNumber)">
                        <img
                          alt="Ver planes"
                          src="assets/icons/see.svg"
                          style="
                            cursor: pointer;
                            height: 24px;
                            margin-left: 10px;
                          "
                        />
                      </a>
                    </div>
                  </div>
  
                  <!--VIDA LEY-->
                    <div [hidden]="hiddenPolizaMatriz && !emitirPolizaOperaciones && !procesarPolizaOperaciones" class="row" *ngIf="codProducto == 3">
                    <div class="col-sm-4">
                      <div class="card mt-3">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm">
                              <h5>{{ variable.var_nomSubProducto }}</h5>
                            </div>
                          </div>
                            <!--INICIO GCAA 03072024-->
                            <div *ngIf="!isPolizaMatriz || flagGobiernoIniciado || emitirPolizaOperaciones || procesarPolizaOperaciones" class="row">
                              <table class="table table-borderless riesgo tblTasas">
                              <thead>
                                <tr>
                                    <th class="text-center"><label>Categoría</label></th>
                                    <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label>Rango de Edad</label></th>
                                    <th class="text-center"><label>Tasa</label></th>
                                    <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 5"><label>Prima Mensual</label></th>
                                    <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 4"><label>Prima Bimestral</label></th>
                                    <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 3"><label>Prima Trimestral</label></th>
                                    <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 2"><label>Prima Semestral</label></th>
                                    <th class="text-right" *ngIf="inputsQuotation.frecuenciaPago == 1"><label>Prima Anual</label></th>
                                </tr>
                              </thead>
                              <tbody>
                                  <tr *ngIf="CalculateList == null || CalculateList.length == 0">
                                    <td class="text-center">No hay tasas asociadas</td>
                                </tr>
                                  <tr *ngFor="let item of CalculateList;let row = index">
                                    <td class="text-center"><span>{{ item.CategoryCalculate }}</span></td>
                                    <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span>{{ item.SRANGO_EDAD }}</span></td>
                                    <!--<td class="text-center"><span>{{ item.RateCalculate | number:'1.2-2'}}%</span></td>-->
                                    <td class="text-center"><span>{{ item.RateCalculate | number:'1.2-2'}}%</span></td>
                                    <td class="text-right"><span>{{item.PremiumCalculate}}</span></td>
                                </tr>
                                  <tr *ngFor="let item of CalculateDetailList;let i = index" style="border-top: 1px solid #ddd">
                                    <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5" colspan="3" class="text-right"><span>{{ item.DescriptionCalculate }}</span></td>
                                    <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6" colspan="2" class="text-right"><span>{{ item.DescriptionCalculate }}</span></td>
                                    <td class="text-right"><span>{{item.AmountCalculate | number: "1.2-2"}}</span></td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                            <!--FIN GCAA 03072024-->
                          <!--div
                            *ngIf="isPolizaMatriz || !flagGobiernoIniciado"
                            class="row"
                          >
                            <table
                              class="table table-borderless riesgo tblTasas"
                            >
                              <thead>
                                <tr>
                                  <th class="text-center">
                                    <label>Categoría</label>
                                  </th>
                                  <th class="text-right">
                                    <label>Tasa</label>
                                  </th>
                                  <th
                                    class="text-right"
                                    *ngIf="inputsQuotation.frecuenciaPago == 5"
                                  >
                                    <label>Prima Mensual</label>
                                  </th>
                                  <th
                                    class="text-right"
                                    *ngIf="inputsQuotation.frecuenciaPago == 4"
                                  >
                                    <label>Prima Bimestral</label>
                                  </th>
                                  <th
                                    class="text-right"
                                    *ngIf="inputsQuotation.frecuenciaPago == 3"
                                  >
                                    <label>Prima Trimestral</label>
                                  </th>
                                  <th
                                    class="text-right"
                                    *ngIf="inputsQuotation.frecuenciaPago == 2"
                                  >
                                    <label>Prima Semestral</label>
                                  </th>
                                  <th
                                    class="text-right"
                                    *ngIf="inputsQuotation.frecuenciaPago == 1"
                                  >
                                    <label>Prima Anual</label>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr
                                  *ngIf="
                                    CalculateList == null ||
                                    CalculateList.length == 0
                                  "
                                >
                                  <td class="text-center">
                                    No hay tasas asociadas
                                  </td>
                                </tr>
                                <tr
                                  *ngFor="
                                    let item of CalculateList;
                                    let i = index
                                  "
                                >
                                  <td
                                    class="text-center"
                                    *ngIf="item.sactive == true"
                                  >
                                    <span>{{ item.SCATEGORIA }}</span>
                                  </td>
                                  <td
                                    class="text-center prTasas"
                                    *ngIf="item.sactive == true"
                                  >
                                    <span>{{ item.NTASA }}%</span>
                                  </td>
                                  <td
                                    [className]="
                                      this.inputsQuotation.frecuenciaPago ==
                                        5 && template.ins_cuadroTipoFrecu
                                        ? 'borderSides text-center'
                                        : 'text-center'
                                    "
                                    *ngIf="inputsQuotation.frecuenciaPago == 5"
                                  >
                                    <span>{{
                                      item.NPREMIUMN_MEN | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td
                                    [className]="
                                      this.inputsQuotation.frecuenciaPago ==
                                        4 && template.ins_cuadroTipoFrecu
                                        ? 'borderSides text-center'
                                        : 'text-center'
                                    "
                                    *ngIf="inputsQuotation.frecuenciaPago == 4"
                                  >
                                    <span>{{
                                      item.NPREMIUMN_BIM | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td
                                    [className]="
                                      this.inputsQuotation.frecuenciaPago ==
                                        3 && template.ins_cuadroTipoFrecu
                                        ? 'borderSides text-center'
                                        : 'text-center'
                                    "
                                    *ngIf="inputsQuotation.frecuenciaPago == 3"
                                  >
                                    <span>{{
                                      item.NPREMIUMN_TRI | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td
                                    [className]="
                                      this.inputsQuotation.frecuenciaPago ==
                                        2 && template.ins_cuadroTipoFrecu
                                        ? 'borderSides text-center'
                                        : 'text-center'
                                    "
                                    *ngIf="inputsQuotation.frecuenciaPago == 2"
                                  >
                                    <span>{{
                                      item.NPREMIUMN_SEM | prettyNumber: 2
                                    }}</span>
                                  </td>
                                  <td
                                    [className]="
                                      this.inputsQuotation.frecuenciaPago ==
                                        1 && template.ins_cuadroTipoFrecu
                                        ? 'borderSides text-center'
                                        : 'text-center'
                                    "
                                    *ngIf="inputsQuotation.frecuenciaPago == 1"
                                  >
                                    <span>{{
                                      item.NPREMIUMN_ANU | prettyNumber: 2
                                    }}</span>
                                  </td>
                                </tr>
                                <tr
                                  *ngFor="
                                    let item of CalculateDetailList;
                                    let i = index
                                  "
                                  style="border-top: 1px solid #ddd"
                                >
                                  <td colspan="2" class="text-right">
                                    <span>{{ item.DescriptionCalculate }}</span>
                                  </td>

                                  <td class="text-right">
                                    <span>{{
                                      item.AmountCalculate | number: "1.2-2"
                                    }}</span>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div-->
                        </div>
                      </div>
                    </div>
  
                    <div class="col-sm-4">
                        <div class="card mt-3" *ngIf="ProposalList != null && ProposalList.length > 0">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm">
                              <h5>&nbsp;</h5>
                            </div>
                          </div>
                          <div class="row" *ngIf="codProducto == 3">
                              <table class="table table-borderless riesgo tblTasas">
                              <thead>
                                <tr>
                                    <th class="text-center"><label>Categoría</label></th>
                                    <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label>Rango de Edad</label></th>
                                    <th class="text-center"><label>Tasa Propuesta</label></th>
                                    <th class="text-right"><label>Prima Propuesta</label></th>
                                </tr>
                              </thead>
                              <tbody>
                                  <tr *ngIf="ProposalList == null || ProposalList.length == 0">
                                    <td class="text-center">No hay tasas asociadas</td>
                                </tr>
                                  <tr *ngFor="let item of ProposalList;let row = index">
                                    <td class="text-center"><span>{{ item.CategoryProposal }}</span></td>
                                    <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span>{{ item.SRANGO_EDAD }}</span></td>
                                    <!--<td class="text-center"><span>{{item.RateProposal | number:'1.2-2'}}%</span>-->
                                    <td class="text-center"><span>{{item.RateProposal}}%</span>
                                      <!--<input
                                      style="
                                        width: 75% !important;
                                        height: 30px !important;
                                      "
                                      type="text"
                                      class="text-right"
                                      [checked]="false"
                                      placeholder="0"
                                      FloatSixDirective
                                      maxlength="12"
                                      [disabled]="true"
                                      [(ngModel)]="item.RateProposal"
                                      (blur)="changePropossedRate()"
                                      (keyup.enter)="changePropossedRate()"
                                      />-->
                                  </td>
                                    <td style="padding-left: 100px !important" class="text-right"><span>{{item.PremiumProposal | number: "1.2-2"}}</span></td>
                                </tr>
  
                                  <tr *ngFor="let item of ProposalDetailList; let i = index" style="border-top: 1px solid #ddd">
                                    <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5" colspan="3" class="text-right"><span>{{ item.DescriptionProposal }}</span></td>
                                    <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6" colspan="2" class="text-right"><span>{{ item.DescriptionProposal }}</span></td>
                                    <td class="text-right"><span>{{item.AmountProposal | number: "1.2-2"}}</span></td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>

                        <div class="col-sm-4">
                        <div class="card mt-3" *ngIf="AuthorizedList != null && AuthorizedList.length > 0">
                            <div class="card-body">
                              <div class="row">
                                <div class="col-sm">
                                  <h5>&nbsp;</h5>
                                </div>
                              </div>
                              <div class="row" *ngIf="codProducto == 3">
                              <table class="table table-borderless riesgo tblTasas">
                                  <thead>
                                    <tr>
                                    <th class="text-center"><label>Categoría</label></th>
                                    <th *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><label>Rango de Edad</label></th>
                                    <th class="text-center"><label>Tasa Autorizada</label></th>
                                    <th class="text-right"><label>Prima Autorizada</label></th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                  <tr *ngIf="AuthorizedList == null || AuthorizedList.length == 0">
                                    <td class="text-center">No hay tasas asociadas</td>
                                    </tr>
                                  <tr *ngFor="let item of AuthorizedList;let row = index">
                                    <td class="text-center"><span>{{ item.CategoryAuthorized }}</span></td>
                                    <td *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1" class="text-center"><span>{{ item.SRANGO_EDAD }}</span></td>
                                    <!--<td class="text-center"><span>{{ AuthorizedList[row].RateAuthorized | number:'1.2-2'}}</span></td>-->
                                    <td class="text-center"><span>{{ AuthorizedList[row].RateAuthorized}}%</span></td>
                                     <!-- <input
                                      style="
                                            width: 75% !important;
                                            height: 30px !important;
                                      "
                                      type="text"
                                      class="text-right"
                                      [checked]="false"
                                      placeholder="0"
                                      FloatSixDirective
                                      [disabled]="mode != 'Autorizar'"
                                      [(ngModel)]="
                                            AuthorizedList[row].RateAuthorized
                                      "
                                      (blur)="changeAuthorizedRate()"
                                      (keyup.enter)="changeAuthorizedRate()"
                                    />
                                    </td>-->
                                    <td style="padding-left: 100px !important" class="text-right"><span>{{item.PremiumAuthorized | number: "1.2-2"}}</span></td>
                                    </tr>
                                  <tr *ngFor="let item of AuthorizedDetailList; let i = index"style="border-top: 1px solid #ddd">
                                    <td *ngIf="tipoProceso == 1 || tipoProceso == 3 || tipoProceso == 5" colspan="3" class="text-right"><span>{{item.DescriptionAuthorized}}</span></td>
                                    <td *ngIf="tipoProceso == 2 || tipoProceso == 4 || tipoProceso == 6" colspan="2" colspan="2" class="text-right"><span>{{item.DescriptionAuthorized}}</span></td>
                                    <td class="text-right"><span>{{item.AmountAuthorized | number: "1.2-2"}}</span></td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-12">
                <!--  || !flagGobiernoIniciado-->
                <div class="row" *ngIf="isPolizaMatriz">
                  <span>
                    * SE REQUIERE ENVIAR EL TRAMITE AL CLIENTE PARA SU
                    EVALUACION, FAVOR DE ACTIVAR EL INDICADOR "APROBACIÓN DE
                    CLIENTE"</span
                  >
                </div>
              </div>
              <div class="col-sm-12">
                <div class="row" *ngIf="isPolizaMatriz">
                  <label style="width: 100%; margin-bottom: 0">
                    <input
                      type="checkbox"
                      [(ngModel)]="inputsQuotation.P_APROB_CLI"
                      (change)="aprobacionCliente($event)"
                      class="checkbox"
                      disabled
                    />
                    <span class="schk chk-mina">APROBACIÓN DE CLIENTE</span>
                  </label>
                </div>
              </div>
              <div class="col-sm-12">
                    <div class="row" style="margin-top: 25px">
                      <div class="col-sm-6">
                        <h5 style="font-size: 14px">ARCHIVO ADJUNTOS</h5>
                        <table class="table table-borderless riesgo tblbroker">
                          <thead>
                            <tr class="d-flex">
                              <th class="col-sm text-center">
                                <label>Nombre del archivo</label>
                              </th>
                              <th class="col-sm text-center">
                                <label>Descargar</label>
                              </th>
                            </tr>
                          </thead>
                      <tbody
                        *ngIf="
                              inputsQuotation.FilePathList != null &&
                              inputsQuotation.FilePathList.length > 0
                        "
                      >
                        <tr
                          *ngFor="let item of inputsQuotation.FilePathList"
                          class="d-flex"
                        >
                              <td class="col-sm text-center">
                                <span>{{ item | fileName }}</span>
                              </td>
                              <td class="col-sm text-center">
                            <a (click)="downloadFile(item)"
                              ><img
                                src="assets/icons/imprimir.png"
                                title="Descargar"
                                style="cursor: pointer"
                                alt="Descargar"
                            /></a>
                              </td>
                            </tr>
                          </tbody>
                      <tbody
                        *ngIf="
                              inputsQuotation.FilePathList == null ||
                              inputsQuotation.FilePathList.length == 0
                        "
                      >
                            <tr class="d-flex">
                              <td colspan="2" class="col-sm text-center">
                                <span>No se encontraron archivos</span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="col-sm-6">
                    <span style="margin-top: 0">COMENTARIO</span>
                    <textarea
                      class="form-control"
                      cols="40"
                      rows="5"
                      style="width: 100%"
                      placeholder="Comentario"
                      maxlength="4000"
                      disabled
                      >{{ inputsQuotation.Comment }}</textarea
                    >
                      </div>

                  <div
                    class="col-sm-3 margin-top-10"
                    *ngIf="
                      !!creditHistory &&
                              codProducto == 3 &&
                              (mode == 'Evaluar' ||
                              (mode == 'Emitir' && !!inputsQuotation.estadoPago) ||
                              (mode == 'EmitirR' && !!inputsQuotation.estadoPago) ||
                              (mode == 'Renovar' && !!inputsQuotation.estadoPago) ||
                              (mode == 'Incluir' && !!inputsQuotation.estadoPago) ||
                        (mode == 'Endosar' && !!inputsQuotation.estadoPago))
                    "
                  >
                        <label>PAGO ADELANTADO</label>
                        <label style="width: 100%; margin-bottom: 0">
                      <input
                        type="checkbox"
                        [(ngModel)]="inputsQuotation.formaPago"
                        [disabled]="mode == 'Evaluar' ? true : false"
                        class="checkbox"
                      /><span class="schk chk-mina">Pago Adelantado</span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        <!-- emitirPolizaOperaciones fin-->

        <div
          *ngIf="
            codProducto == 3 &&
            isTransact &&
            flagGobiernoIniciado &&
            !(flagGobiernoEstado && flagGobiernoMatriz)
          "
        >
          <input class="collapse-open" type="checkbox" id="calculadora" />
            <label class="collapse-btn title" for="calculadora">COTIZADOR<i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
          <div class="collapse-panel">
            <div class="collapse-inner collapse-border">
              <div class="row" *ngIf="flagGobiernoIniciado">
                  <div [ngClass]="template.ins_tasasWith ? 'col-sm-12' : 'col-sm-6'">
                    
                    <table class="table table-borderless riesgo" style="border: 3px solid #73809C;" *ngIf=" template.ins_mostrarTasas || template.ins_categoriaList">
                    <thead>
                        <tr class="d-flex" style="background-color: #F29744; color: white;border-bottom: 2px solid #73809C;">
                            <th class="col-sm text-center" style="vertical-align: middle !important; ">
                                <span style="font-weight: 100">{{variable.var_tblTasasTitutoCol1}}</span>
                            </th>
                            <!-- GCAA 09/01/2024 -->
                            <th class="col-sm text-center">
                                <span style="font-weight: 100">Rango de Edad</span>
                        </th>
                            <!--FIN GCAA 09/01/2024 -->
                        <th class="col-sm text-center">
                                <span style="font-weight: 100">{{variable.var_tblTasasTitutoCol2}}</span>
                        </th>
                        <th class="col-sm text-center">
                                <span style="font-weight: 100">{{variable.var_tblTasasTitutoCol3Cot}}</span>
                        </th>

                          <th *ngIf=" template.ins_categoriaList && typeTran != 'Endoso'" class="col-sm text-center">
                                <span style="font-weight: 100">{{ variable.var_tblTasasTitutoCol4 }}</span>
                        </th>
                          <th *ngIf=" template.ins_categoriaList && typeTran != 'Endoso'" class="col-sm text-center">
                                <span style="font-weight: 100">Tasa Propuesta %</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody *ngIf="template.ins_categoriaList">
                      <tr class="d-flex" *ngIf="categoryList.length == 0">
                        <td class="col-sm text-center">No hay tasas</td>
                      </tr>
                        <tr class="d-flex" *ngFor="let item of categoryList; let i = index">
                           <!--CATEGORIA-->     
                           <!--<td class="col-sm" *ngIf="item.sactive == true"><span>{{ item.SCATEGORIA_view }}</span></td>-->
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.SCATEGORIA_view ==''"><span>{{ item.SCATEGORIA_view }}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.SCATEGORIA_view !=''" style="border-top: 3.0px solid #73809C;"><span>{{ item.SCATEGORIA_view }}</span></td>
                          

                          <!-- GCAA 09/01/2024 -->
                          <!--<td class="col-sm" *ngIf="item.sactive == true"><span>{{ item.SRANGO_EDAD }}</span></td>-->
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 &&  item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd"><span>{{item.SRANGO_EDAD}}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 &&  item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd; background-color: #F2F2F2;"><span>{{item.SRANGO_EDAD}}</span></td>
                          
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 &&  item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd; background-color: #F2F2F2;"><span>{{item.SRANGO_EDAD}}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 &&  item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;"><span>{{item.SRANGO_EDAD}}</span></td>

                          <!--FIN GCAA 09/01/2024 -->
                          <!--<td class="col-sm text-center" *ngIf="item.sactive == true"><span>{{ item.NCOUNT }}</span></td>-->
                          
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd"><span>{{ item.NCOUNT }}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd; background-color: #F2F2F2;"><span>{{ item.NCOUNT }}</span></td>                                            
                         
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd; background-color: #F2F2F2;"><span>{{ item.NCOUNT }}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;"><span>{{ item.NCOUNT }}</span></td>



                          <!--<td class="col-sm text-center" *ngIf="item.sactive == true"><span>{{ item.NTOTAL_PLANILLA | prettyNumber: 2 }}</span></td>-->
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd"><span>{{ item.NTOTAL_PLANILLA | prettyNumber: 2}}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view == ''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd;background-color: #F2F2F2;"><span>{{ item.NTOTAL_PLANILLA | prettyNumber: 2}}</span></td>                                            
                          
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;background-color: #F2F2F2;"><span>{{ item.NTOTAL_PLANILLA | prettyNumber: 2}}</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view != ''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;"><span>{{ item.NTOTAL_PLANILLA | prettyNumber: 2}}</span></td>



                          <!--<td class="col-sm text-center" *ngIf="item.sactive == true && typeTran != 'Endoso'"><span>{{ item.NTASA | prettyNumber: 6 }} %</span></td>-->

                          <td class="col-sm text-center" *ngIf="item.sactive == true && typeTran != 'Endoso' && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view ==''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd"><span>{{ item.NTASA | prettyNumber: 6 }} %</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && typeTran != 'Endoso' && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view ==''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd;background-color: #F2F2F2;"><span>{{ item.NTASA | prettyNumber: 6 }} %</span></td>
                          
                          <td class="col-sm text-center" *ngIf="item.sactive == true && typeTran != 'Endoso' && item.NTOTAL_PLANILLA > 0 && item.SCATEGORIA_view !=''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;background-color: #F2F2F2;"><span>{{ item.NTASA | prettyNumber: 6 }} %</span></td>
                          <td class="col-sm text-center" *ngIf="item.sactive == true && typeTran != 'Endoso' && item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view !=''" style="border-top: 2.5px solid #73809C;border-left: 0.5px solid #ddd;"><span>{{ item.NTASA | prettyNumber: 6 }} %</span></td>


                           <!-- GCAA 09/01/2024 -->
                          <td class="col-sm text-center"
                            *ngIf="item.sactive == true && typeTran != 'Exclusión' && typeTran != 'Endoso' && item.NTOTAL_PLANILLA > 0  && item.SCATEGORIA_view == ''"
                            style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd;  ">
                            <input style="width: 70% !important; height: 100% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="12"
                              [(ngModel)]="item.ProposalRate"
                              (blur)="changeRateProposed(item)"
                              (keyup.enter)="changeRateProposed(item)"
                              [disabled]="disTasaProp"
                            />
                        </td>


                          <td class="col-sm text-center"
                          *ngIf="item.sactive == true && typeTran != 'Exclusión' && typeTran != 'Endoso' && item.NTOTAL_PLANILLA > 0 &&  item.SCATEGORIA_view !=''"
                          style="border-top: 3px solid #73809C;border-left: 0.5px solid #ddd;  ">
                          <input style="width: 70% !important; height: 100% !important;"

                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="12"
                              [(ngModel)]="item.ProposalRate"
                              (blur)="changeRateProposed(item)"
                              (keyup.enter)="changeRateProposed(item)"
                              [disabled]="disTasaProp"
                            />
                          </td>


                          <td class="col-sm text-center" *ngIf="item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view ==''" style="border-top: 0.5px solid #ddd;border-left: 0.5px solid #ddd; ">                         
                                <input style="width: 70% !important; height: 100% !important;"
                                  type="text"
                                  class="text-right"
                                [checked]="false"
                                placeholder="0"
                                FloatSixDirective
                                maxlength="12"
                                [(ngModel)]="item.ProposalRate"
                                (blur)="changeRateProposed(item)"
                                (keyup.enter)="changeRateProposed(item)"
                                [disabled]="disTasaProp"/>
                          </td>

                          <td class="col-sm text-center" *ngIf="item.NTOTAL_PLANILLA == 0 && item.SCATEGORIA_view !=''" style="border-top: 3px solid #73809C;border-left: 0.5px solid #ddd;">
                            <input style="width: 70% !important; height: 100% !important;"
                                type="text"
                                class="text-right"
                            [checked]="false"
                            placeholder="0"
                            FloatSixDirective
                            maxlength="12"
                            [(ngModel)]="item.ProposalRate"
                            (blur)="changeRateProposed(item)"
                            (keyup.enter)="changeRateProposed(item)"
                            [disabled]="disTasaProp"/>
                        </td>


                          <!--FIN GCAA 09/01/2024 -->
                      </tr>
                    </tbody>
                    <tbody *ngIf="template.ins_tasasList">
                      <tr class="d-flex" *ngIf="tasasList.length == 0">
                        <td
                          class="col-sm-12 text-center"
                          style="padding: 0.5rem !important"
                        >
                          <label>No hay tasas</label>
                        </td>
                      </tr>
                      <tr
                        class="d-flex"
                        *ngFor="let tasa of tasasList; let row = index"
                      >
                        <td
                          *ngIf="tasa.status == 1"
                          class="col-sm"
                          style="padding: 0.5rem !important"
                        >
                          <span>{{ tasa.description }}</span>
                        </td>
                        <td
                          *ngIf="tasa.status == 1"
                          class="col-sm text-center"
                          style="padding: 0.5rem !important"
                        >
                          <input
                            type="text"
                            placeholder="0"
                            [(ngModel)]="tasa.totalWorkes"
                            maxlength="9"
                            (ngModelChange)="
                              volverCotizar(tasa.totalWorkes, tasa.id, row, 1)
                            "
                            [disabled]="disabledFlat[row].value"
                            OnlyNumberDirective
                          />
                        </td>
                        <td
                          *ngIf="tasa.status == 1"
                          class="col-sm"
                          style="padding: 0.5rem !important"
                        >
                          <input
                            type="text"
                            placeholder="0"
                            [(ngModel)]="tasa.planilla"
                            maxlength="11"
                            (ngModelChange)="
                              volverCotizar(tasa.planilla, tasa.id, row, 2)
                            "
                            [disabled]="disabledFlat[row].value"
                            FloatDirective
                          />
                        </td>
                      </tr>
                    </tbody>
                  </table>
          </div>
                <div
                  class="col-sm-6"
                  style="padding: 10px 0 15px"
                  *ngIf="template.ins_calcTasas"
                >
                  <button
                    *ngIf="tasasList.length > 0"
                    type="button"
                    style="
                      display: inline-block;
                      position: absolute;
                      bottom: 24px;
                    "
                    (click)="calcularTarifa()"
                  >
                    <span>Calcular</span>
                  </button>
                </div>
                  
                  <!--
                <div class="col-sm-3" *ngIf="template.ins_tasasPlanList">
                    <table class="table table-borderless riesgo" [hidden]="rateByPlanList?.length == 0">
                    <thead>
                      <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                        <th class="col-sm-12 text-center">
                          <label style="font-weight: 100">Flat</label>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="d-flex" *ngIf="rateByPlanList.length == 0">
                        <td class="col-sm text-center">No hay tasas</td>
                      </tr>
                        <tr class="d-flex" *ngFor="let item of rateByPlanList; let i = index">
                          <td class="col-sm text-center" *ngIf="item.sactive == true">
                          <span>{{ item.NTASA }} %</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <div [hidden]="rateByPlanList.length == 0">
                    <button
                      [hidden]="btnCotiza"
                      class="btnCotiza-VL"
                      (click)="this.validarExcel(99)"
                    >
                      Cotizar Flat
                    </button>
                    <button
                      [hidden]="btnNormal"
                      class="btnCotiza-VL"
                      (click)="this.validarExcel(100)"
                    >
                      Cotizar Normal
                    </button>
                  </div>
                  </div>-->
                </div>
  
              <div
                [ngClass]="template.ins_pensionWith ? 'col-sm-12' : 'col-sm-6'"
                *ngIf="
                  categoryList?.length > 0 ||
                  listaTasasPension?.length > 0 ||
                  planesList?.length > 0
                "
              >
                <div class="row">
                  <div
                    *ngIf="template.ins_primaPensionMin"
                    [ngClass]="
                      template.ins_pensionWith ? 'col-sm-3' : 'col-sm-6'
                    "
                  >
                    <label class="mb-0"
                      ><span>{{
                        inputsQuotation.primaMinimaPension
                      }}</span></label
                    >
                    <input
                      type="text"
                      placeholder="0"
                      disabled
                      [(ngModel)]="inputsQuotation.P_PRIMA_MIN_PENSION"
                    />
                  </div>

                  <div *ngIf="template.ins_plan" class="col-sm-3">
                    <label class="mb-0"
                      ><span>{{ variable.var_desPlan }}</span></label
                    >

                    <select
                      [(ngModel)]="inputsQuotation.desTipoPlan"
                      class="minimal"
                      [disabled]="false"
                    >
                      <option
                        *ngFor="let p of planList"
                        value="{{ p.SDESCRIPT | uppercase }}"
                      >
                        {{ p.SDESCRIPT }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="card mt-3">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm">
                        <h5>{{ variable.var_nomSubProducto }}</h5>
                      </div>
                    </div>
                    <div class="row" *ngIf="flagGobiernoIniciado">
                        <table [className]="typeTran == 'Declaración' ? 'table table-borderless riesgo tblTasas widthDeclareTasa' : 'table table-borderless riesgo tblTasas'">
                        <thead>
                          <tr>
                            <th class="text-center">
                              <label>Categoría</label>
                            </th>
                              <!-- GCAA 09/01/2024 -->
                              <th class="text-center">
                                  <label>Rango de Edad</label>
                              </th>
                               <!-- FIN GCAA 09/01/2024 -->
                            <th class="text-center prTasas">
                              <label>Tasa</label>
                            </th>
                              <th [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu)">
                              <label>Prima Mensual</label>
                            </th>
                              <th [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu)">
                              <label>Prima Bimestral</label>
                            </th>
                              <th [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu)">
                              <label>Prima Trimestral</label>
                            </th>
                              <th [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu)">
                              <label>Prima Semestral</label>
                            </th>
                              <th [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu)">
                              <label>Prima Anual</label>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="amountPremiumList.length == 0">
                            <td class="text-center" colspan="6">
                              No hay tasas asociadas
                            </td>
                          </tr>
                            <tr *ngFor=" let item of amountPremiumList; let i = index">
                              <td class="text-center" *ngIf="item.sactive == true">
                              <span>{{ item.SCATEGORIA }}</span>
                            </td>
                              <!-- GCAA 09/01/2024 -->
                              <td class="text-center" *ngIf="item.sactive == true">
                                  <span>{{ item.SRANGO_EDAD }}</span>
                                </td>
                              <!-- FIN GCAA 09/01/2024 -->
                              <td class="text-center prTasas" *ngIf="item.sactive == true">
                                <!--<span>{{ item.NTASA | number:'1.2-2'}}%</span>-->
                                <span>{{ item.NTASA}}%</span>
                            </td>
                              <td [className]=" this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu ? 'borderSides text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu) ||
                                  (item.sactive == true && typeTran != 'Declaración')">
                                <span>{{item.NPREMIUMN_MEN | prettyNumber: 2}}</span>
                            </td>
                              <td [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSides text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu) ||
                                  (item.sactive == true && typeTran != 'Declaración')">
                                <span>{{ item.NPREMIUMN_BIM | prettyNumber: 2}}</span>
                            </td>
                              <td [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSides text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu) ||
                                  (item.sactive == true && typeTran != 'Declaración')">
                                <span>{{ item.NPREMIUMN_TRI | prettyNumber: 2 }}</span>
                            </td>
                              <td [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSides text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu) ||
                                  (item.sactive == true && typeTran != 'Declaración')">
                                <span>{{ item.NPREMIUMN_SEM | prettyNumber: 2 }}</span>
                            </td>
                              <td [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSides text-center' : 'text-center'"
                                *ngIf=" typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu) ||
                                  (item.sactive == true && typeTran != 'Declaración')">
                              <span>{{
                                item.NPREMIUMN_ANU | prettyNumber: 2
                              }}</span>
                            </td>
                          </tr>

                          <tr
                            *ngFor="
                              let item of amountDetailTotalList;
                              let i = index
                            "
                            style="border-top: 1px solid #ddd"
                          >
                              <td colspan="3" class="text-right">
                              <span class="prTasas">{{
                                item.SDESCRIPCION
                              }}</span>
                            </td>
                            <td
                              [className]="
                                this.inputsQuotation.frecuenciaPago == 5 &&
                                template.ins_cuadroTipoFrecu
                                  ? 'borderSides text-center'
                                  : 'text-center'
                              "
                              *ngIf="
                                typeTran != 'Declaración' ||
                                (typeTran == 'Declaración' &&
                                  inputsQuotation.frecuenciaPago == 5 &&
                                  template.ins_cuadroTipoFrecu)
                              "
                            >
                              <span>{{
                                item.NAMOUNT_MEN | prettyNumber: 2
                              }}</span>
                            </td>
                            <td
                              [className]="
                                this.inputsQuotation.frecuenciaPago == 4 &&
                                template.ins_cuadroTipoFrecu
                                  ? 'borderSides text-center'
                                  : 'text-center'
                              "
                              *ngIf="
                                typeTran != 'Declaración' ||
                                (typeTran == 'Declaración' &&
                                  inputsQuotation.frecuenciaPago == 4 &&
                                  template.ins_cuadroTipoFrecu)
                              "
                            >
                              <span>{{
                                item.NAMOUNT_BIM | prettyNumber: 2
                              }}</span>
                            </td>
                            <td
                              [className]="
                                this.inputsQuotation.frecuenciaPago == 3 &&
                                template.ins_cuadroTipoFrecu
                                  ? 'borderSides text-center'
                                  : 'text-center'
                              "
                              *ngIf="
                                typeTran != 'Declaración' ||
                                (typeTran == 'Declaración' &&
                                  inputsQuotation.frecuenciaPago == 3 &&
                                  template.ins_cuadroTipoFrecu)
                              "
                            >
                              <span>{{
                                item.NAMOUNT_TRI | prettyNumber: 2
                              }}</span>
                            </td>
                            <td
                              [className]="
                                this.inputsQuotation.frecuenciaPago == 2 &&
                                template.ins_cuadroTipoFrecu
                                  ? 'borderSides text-center'
                                  : 'text-center'
                              "
                              *ngIf="
                                typeTran != 'Declaración' ||
                                (typeTran == 'Declaración' &&
                                  inputsQuotation.frecuenciaPago == 2 &&
                                  template.ins_cuadroTipoFrecu)
                              "
                            >
                              <span>{{
                                item.NAMOUNT_SEM | prettyNumber: 2
                              }}</span>
                            </td>
                            <td
                              [className]="
                                this.inputsQuotation.frecuenciaPago == 1 &&
                                template.ins_cuadroTipoFrecu
                                  ? 'borderSides text-center'
                                  : 'text-center'
                              "
                              *ngIf="
                                typeTran != 'Declaración' ||
                                (typeTran == 'Declaración' &&
                                  inputsQuotation.frecuenciaPago == 1 &&
                                  template.ins_cuadroTipoFrecu)
                              "
                            >
                              <span>{{
                                item.NAMOUNT_ANU | prettyNumber: 2
                              }}</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--EAER -  Gestion de tramites con el Estado Sin trama ini -->
        <div
          *ngIf="
            codProducto == 3 &&
            (this.typeTran == 'Emisión Póliza Matriz' || this.typeTran == 'Emisión' || ( this.typeTran == '' &&  this.mode=='Visualizar' && flagGobiernoMatriz ) ) &&
            flagGobiernoEstado &&
            flagGobiernoMatriz
          "
        >
          <input class="collapse-open" type="checkbox" id="calculadora" />
          <label class="collapse-btn title" for="calculadora"
            >Cotizador
            <i
              class="fa fa-angle-down pull-right"
              style="position: relative; top: 4px"
            ></i
          ></label>
          <div class="collapse-panel">
            <div class="collapse-inner collapse-border">
              <div class="row">
                <div class="col-sm-12">
                  <div>
                    <table class="table table-borderless riesgo">
                      <thead>
                                  <tr class="d-flex" style="border-bottom: 1px solid #ddd">
                                      <th class="col-sm"  *ngIf="tipoProceso == 1 || tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6"><label style="font-weight: 100">Cátegoria</label></th>
                                      <!-- GCAA 24112023 -->
                                      <th class="col-sm text-center"*ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><label style="font-weight: 100">Rango de Edad</label></th>
                                      <th class="col-sm text-center"><label style="font-weight: 100">Total Trabajadores</label></th>                                
                                      <th class="col-sm text-center"><label style="font-weight: 100">Monto Planilla</label></th>
                                      <th class="col-sm text-center"><label style="font-weight: 100">Tasa</label></th>
                                      <th class="col-sm text-center"><label style="font-weight: 100">Monto por cobrar sin IGV</label></th>
                                      <th class="col-sm text-center"><label style="font-weight: 100">Monto por Frecuencia sin IGV</label></th>
                        </tr>
                      </thead>
                              <tbody>          
                                  <!-- GCAA EMPLEADOS -->              
                                  <tr class="d-flex">
                                      <!-- <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>18-36</span></td>--> 
                                      <td class="col-sm"><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center">
                                          <input style=" width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              OnlyNumberDirective
                                              maxlength="20"
                                              [(ngModel)]="countinputEMP_18_36"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="21"
                                              [(ngModel)]="planillainputEMP_18_36"
                                              decimal="1.0-6"
                                              (blur)="changeMontoSinIGV(1)"
                                              (keyup.enter)="changeMontoSinIGV(1)"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="10"
                                              (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_18_36)"
                                              [(ngModel)]="tasainputEMP_18_36"
                                              (blur)="changeMontoSinIGV(1)"
                                              (keyup.enter)="changeMontoSinIGV(1)"
                                              disabled/>
                                              &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                              style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="21"
                                              [(ngModel)]="MontoSinIGVEMP_18_36"
                                              decimal="1.0-6"
                                              (blur)="changeFPMontoSinIGV()"
                                              (keyup.enter)="changeFPMontoSinIGV()"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style=" width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_18_36"
                                          disabled/>
                                      </td>
                                  </tr>
  
                                  <!--37-55
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>37-55</span></td>
                                      <td class="col-sm text-center">
                                          <input style=" width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              OnlyNumberDirective
                                              maxlength="20"
                                              [(ngModel)]="countinputEMP_37_55"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="21"
                                              [(ngModel)]="planillainputEMP_37_55"
                                              decimal="1.0-6"
                                              (blur)="changeMontoSinIGV(1111)"
                                              (keyup.enter)="changeMontoSinIGV(1111)"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="10"
                                              (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_37_55)"
                                              [(ngModel)]="tasainputEMP_37_55"
                                              (blur)="changeMontoSinIGV(1111)"
                                              (keyup.enter)="changeMontoSinIGV(1111)"
                                              disabled/>
                                              &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                              style="width: 70% !important; height: 120% !important;"
                                              type="text"
                                              class="text-right"
                                              [checked]="false"
                                              placeholder="0"
                                              FloatSixDirective
                                              maxlength="21"
                                              [(ngModel)]="MontoSinIGVEMP_37_55"
                                              decimal="1.0-6"
                                              (blur)="changeFPMontoSinIGV()"
                                              (keyup.enter)="changeFPMontoSinIGV()"
                                              disabled/>
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style=" width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_37_55"
                                          disabled/>
                                      </td>
                                  </tr>   --> 
                                  <!--FIN 37-55
  
                        <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>56-63</span></td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputEMP_56_63"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputEMP_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(11)"
                                          (keyup.enter)="changeMontoSinIGV(11)"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_56_63)"
                                          [(ngModel)]="tasainputEMP_56_63"
                                          (blur)="changeMontoSinIGV(11)"
                                          (keyup.enter)="changeMontoSinIGV(11)"
                                          disabled
                                      />
                                      &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVEMP_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_56_63"
                                          disabled
                                      />
                          </td>
                                  </tr>-->
  
                                  <!--64-70
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>64-70</span></td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                                          [(ngModel)]="countinputEMP_64_70"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputEMP_64_70"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(11111)"
                                          (keyup.enter)="changeMontoSinIGV(11111)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_64_70)"
                                          [(ngModel)]="tasainputEMP_64_70"
                                          (blur)="changeMontoSinIGV(11111)"
                                          (keyup.enter)="changeMontoSinIGV(11111)"
                                          disabled
                                      />
                                      &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="MontoSinIGVEMP_64_70"
                              decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_64_70"
                                          disabled
                                      />
                                      </td>
                                  </tr>-->
                                  <!--FIN 64-70
  
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>71-80</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputEMP_71_80"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputEMP_71_80"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(111)"
                                          (keyup.enter)="changeMontoSinIGV(111)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input 
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_71_80)"
                                          [(ngModel)]="tasainputEMP_71_80"
                                          (blur)="changeMontoSinIGV(111)"
                                          (keyup.enter)="changeMontoSinIGV(111)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="MontoSinIGVEMP_71_80"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_71_80"
                              disabled
                            />
                          </td>
                                  </tr>-->
  
                                  <!--81-99
                        <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>EMPLEADO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>81-99</span></td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputEMP_81_99"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputEMP_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(111111)"
                                          (keyup.enter)="changeMontoSinIGV(111111)"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP_81_99)"
                                          [(ngModel)]="tasainputEMP_81_99"
                                          (blur)="changeMontoSinIGV(111111)"
                                          (keyup.enter)="changeMontoSinIGV(111111)"
                                          disabled
                                      />
                                      &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVEMP_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVEMP_81_99"
                                          disabled
                                      />
                          </td>
                                  </tr>-->
                                  <!--FIN 81-99-->
  
          
                                      <!--FIN GCAA EMPLEADOS -->
                                      <!-- GCAA OBREROS -->
                                  <tr class="d-flex">
                                      <!--<td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>18-36</span></td>-->
                                      <td class="col-sm"><span>OBRERO</span></td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                                          [(ngModel)]="countinputOBR_18_36"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="planillainputOBR_18_36"
                              decimal="1.0-6"
                              (blur)="changeMontoSinIGV(2)"
                              (keyup.enter)="changeMontoSinIGV(2)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_18_36)"
                                          [(ngModel)]="tasainputOBR_18_36"
                              (blur)="changeMontoSinIGV(2)"
                              (keyup.enter)="changeMontoSinIGV(2)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_18_36"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important; height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_18_36"
                              disabled
                            />
                          </td>
                        </tr>
                                  <!--37-55
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>37-55</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOBR_37_55"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOBR_37_55"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(2222)"
                                          (keyup.enter)="changeMontoSinIGV(2222)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_37_55)"
                                          [(ngModel)]="tasainputOBR_37_55"
                                          (blur)="changeMontoSinIGV(2222)"
                                          (keyup.enter)="changeMontoSinIGV(2222)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_37_55"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_37_55"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  <!--FIN 37-55
  
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>56-63</span></td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOBR_56_63"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOBR_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(22)"
                                          (keyup.enter)="changeMontoSinIGV(22)"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_56_63)"
                                          [(ngModel)]="tasainputOBR_56_63"
                                          (blur)="changeMontoSinIGV(22)"
                                          (keyup.enter)="changeMontoSinIGV(22)"
                                          disabled
                                      />
                                      &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_56_63"
                                          disabled
                                      />
                                      </td>
                                  </tr>-->
  
                                  <!--64-70
                        <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>64-70</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOBR_64_70"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOBR_64_70"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(22222)"
                                          (keyup.enter)="changeMontoSinIGV(22222)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_64_70)"
                                          [(ngModel)]="tasainputOBR_64_70"
                                          (blur)="changeMontoSinIGV(22222)"
                                          (keyup.enter)="changeMontoSinIGV(22222)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_64_70"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_64_70"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  <!--FIN 64-70
  
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>71-80</span></td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOBR_71_80"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOBR_71_80"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(222)"
                                          (keyup.enter)="changeMontoSinIGV(222)"
                                          disabled
                                      />
                                      </td>
                                      <td class="col-sm text-center">
                                      <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_71_80)"
                                          [(ngModel)]="tasainputOBR_71_80"
                                          (blur)="changeMontoSinIGV(222)"
                                          (keyup.enter)="changeMontoSinIGV(222)"
                                          disabled
                                      />
                                       &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_71_80"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_71_80"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
  
  
                                  <!--81-99
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>81-99</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOBR_81_99"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOBR_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(222222)"
                                          (keyup.enter)="changeMontoSinIGV(222222)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR_81_99)"
                                          [(ngModel)]="tasainputOBR_81_99"
                                          (blur)="changeMontoSinIGV(222222)"
                                          (keyup.enter)="changeMontoSinIGV(222222)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOBR_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important; height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOBR_81_99"
                                          disabled
                                          />
                          </td>
                                  </tr>-->
                                  <!--FIN 64-70-->
  
                                  <!--FIN GCAA OBREROS -->
  
                                  <!-- GCAA OBREROS ALTO RIESGO -->
                                  <tr class="d-flex">
                                      <!-- <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>18-36</span></td>-->
                                      <td class="col-sm"><span>OBRERO ALTO RIESGO</span></td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                                          [(ngModel)]="countinputOAR_18_36"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="planillainputOAR_18_36"
                              decimal="1.0-6"
                              (blur)="changeMontoSinIGV(3)"
                              (keyup.enter)="changeMontoSinIGV(3)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_18_36)"
                                          [(ngModel)]="tasainputOAR_18_36"
                              (blur)="changeMontoSinIGV(3)"
                              (keyup.enter)="changeMontoSinIGV(3)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_18_36"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                                          style="width: 70% !important;height: 120% !important;"
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_18_36"
                              disabled
                            />
                          </td>
                        </tr>
  
                                  <!--37-55
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>37-55</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOAR_37_55"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOAR_37_55"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(3333)"
                                          (keyup.enter)="changeMontoSinIGV(3333)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_37_55)"
                                          [(ngModel)]="tasainputOAR_37_55"
                                          (blur)="changeMontoSinIGV(3333)"
                                          (keyup.enter)="changeMontoSinIGV(3333)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_37_55"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_37_55"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  <!--FIN 37-55   
  
  
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>56-63</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOAR_56_63"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOAR_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(33)"
                                          (keyup.enter)="changeMontoSinIGV(33)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_56_63)"
                                          [(ngModel)]="tasainputOAR_56_63"
                                          (blur)="changeMontoSinIGV(33)"
                                          (keyup.enter)="changeMontoSinIGV(33)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_56_63"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_56_63"
                                          disabled
                                          />
                                      </td>
                                  </tr>--> 
          
                                  <!--64-70
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>64-70</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOAR_64_70"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOAR_64_70"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(33333)"
                                          (keyup.enter)="changeMontoSinIGV(33333)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_64_70)"
                                          [(ngModel)]="tasainputOAR_64_70"
                                          (blur)="changeMontoSinIGV(33333)"
                                          (keyup.enter)="changeMontoSinIGV(33333)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_64_70"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_64_70"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  <!--FIN 64-70
  
  
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>71-80</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOAR_71_80"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOAR_71_80"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(333)"
                                          (keyup.enter)="changeMontoSinIGV(333)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_71_80)"
                                          [(ngModel)]="tasainputOAR_71_80"
                                          (blur)="changeMontoSinIGV(333)"
                                          (keyup.enter)="changeMontoSinIGV(333)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_71_80"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_71_80"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  
                                  <!--81-99
                                  <tr class="d-flex">
                                      <td class="col-sm" *ngIf="tipoProceso == 2 || tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 4 ||  tipoProceso == 6" ><span>OBRERO ALTO RIESGO</span></td>
                                      <td class="col-sm text-center" *ngIf="tipoProceso == 3 || tipoProceso == 5 || tipoProceso == 1"><span>81-99</span></td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          OnlyNumberDirective
                                          maxlength="20"
                                          [(ngModel)]="countinputOAR_81_99"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="planillainputOAR_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeMontoSinIGV(333333)"
                                          (keyup.enter)="changeMontoSinIGV(333333)"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="10"
                                          (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR_81_99)"
                                          [(ngModel)]="tasainputOAR_81_99"
                                          (blur)="changeMontoSinIGV(333333)"
                                          (keyup.enter)="changeMontoSinIGV(333333)"
                                          disabled
                                          />
                                          &nbsp; %
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="21"
                                          [(ngModel)]="MontoSinIGVOAR_81_99"
                                          decimal="1.0-6"
                                          (blur)="changeFPMontoSinIGV()"
                                          (keyup.enter)="changeFPMontoSinIGV()"
                                          disabled
                                          />
                                      </td>
                                      <td class="col-sm text-center">
                                          <input
                                          style="width: 70% !important;height: 120% !important;"
                                          type="text"
                                          class="text-right"
                                          [checked]="false"
                                          placeholder="0"
                                          FloatSixDirective
                                          maxlength="20"
                                          [(ngModel)]="MontoFPSinIGVOAR_81_99"
                                          disabled
                                          />
                                      </td>
                                  </tr>-->
                                  <!--FIN 81-99-->
  
  
                                  <!--FIN GCAA OBREROS ALTO RIESGO -->
                        <tr class="d-flex" *ngIf="flagActivateExc == 1">
                                      <td class="col-sm"><span>EMPLEADO EXCEDENTE</span></td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                              [(ngModel)]="countinputEE"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="planillainputEE"
                              decimal="1.0-6"
                              (blur)="changeMontoSinIGV(4)"
                              (keyup.enter)="changeMontoSinIGV(4)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                              (keypress)="
                                validarDecimalPorcentage(
                                  '1,2',
                                  '0,6',
                                  tasainputEE
                                )
                              "
                              [(ngModel)]="tasainputEE"
                              (blur)="changeMontoSinIGV(4)"
                              (keyup.enter)="changeMontoSinIGV(4)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="MontoSinIGVEE"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                              [(ngModel)]="MontoFPSinIGVEE"
                              disabled
                            />
                          </td>
                        </tr>
                        <tr class="d-flex" *ngIf="flagActivateExc == 1">
                          <td class="col-sm">
                            <span>OBRERO EXCEDENTE</span>
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                              [(ngModel)]="countinputOE"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="planillainputOE"
                              decimal="1.0-6"
                              (blur)="changeMontoSinIGV(5)"
                              (keyup.enter)="changeMontoSinIGV(5)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                              (keypress)="
                                validarDecimalPorcentage(
                                  '1,2',
                                  '0,6',
                                  tasainputOE
                                )
                              "
                              [(ngModel)]="tasainputOE"
                              (blur)="changeMontoSinIGV(5)"
                              (keyup.enter)="changeMontoSinIGV(5)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="MontoSinIGVOE"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                              [(ngModel)]="MontoFPSinIGVOE"
                              disabled
                            />
                          </td>
                        </tr>
                        <tr class="d-flex" *ngIf="flagActivateExc == 1">
                          <td class="col-sm">
                            <span>OBRERO ALTO RIESGO EXCEDENTE </span>
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              OnlyNumberDirective
                              maxlength="20"
                              [(ngModel)]="countinputOARE"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="planillainputOARE"
                              decimal="1.0-6"
                              (blur)="changeMontoSinIGV(6)"
                              (keyup.enter)="changeMontoSinIGV(6)"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="10"
                              (keypress)="
                                validarDecimalPorcentage(
                                  '1,2',
                                  '0,6',
                                  tasainputOARE
                                )
                              "
                              [(ngModel)]="tasainputOARE"
                              (blur)="changeMontoSinIGV(6)"
                              (keyup.enter)="changeMontoSinIGV(6)"
                              disabled
                            />
                            &nbsp; %
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              [(ngModel)]="MontoSinIGVOARE"
                              decimal="1.0-6"
                              (blur)="changeFPMontoSinIGV()"
                              (keyup.enter)="changeFPMontoSinIGV()"
                              disabled
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="20"
                              [(ngModel)]="MontoFPSinIGVOARE"
                              disabled
                            />
                          </td>
                        </tr>
                        <tr class="d-flex">
                          <td class="col-sm"></td>
                                      <!--<td *ngIf="tipoProceso == 3 || tipoProceso == 1" class="col-sm text-center"></td>-->
                          <td class="col-sm text-center"></td>
                          <td class="col-sm text-center"></td>
                          <td class="col-sm text-center">
                            <span>TOTAL SIN IGV</span>
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              disabled
                              [(ngModel)]="TotalSinIGV"
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              disabled
                              [(ngModel)]="TotalFPSinIGV"
                            />
                          </td>
                        </tr>
                        <tr class="d-flex">
                          <td class="col-sm"></td>
                                      <!--<td *ngIf="tipoProceso == 3 || tipoProceso == 1"  class="col-sm text-center"></td>-->
                          <td class="col-sm text-center"></td>
                          <td class="col-sm text-center"></td>
                          <td class="col-sm text-center">
                            <span>TOTAL CON IGV</span>
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              disabled
                              [(ngModel)]="TotalConIGV"
                            />
                          </td>
                          <td class="col-sm text-center">
                            <input
                              style="
                                width: 70% !important;
                                height: 120% !important;
                              "
                              type="text"
                              class="text-right"
                              [checked]="false"
                              placeholder="0"
                              FloatSixDirective
                              maxlength="21"
                              disabled
                              [(ngModel)]="TotalFPConIGV"
                            />
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-3">
                  <span>PLAN</span>
                  <select
                    [(ngModel)]="inputsQuotation.desTipoPlanPM"
                    class="minimal"
                    disabled="this.mode == 'Evaluar Tramite'"
                  >
                    <option
                      *ngFor="let p of planList"
                      value="{{ p.SDESCRIPT | uppercase }}"
                    >
                      {{ p.SDESCRIPT }}
                    </option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="mb-0"><span>TARIFA (*)</span></label>
                  <select
                    [(ngModel)]="inputsQuotation.P_COMISION"
                    class="minimal"
                    [disabled]="true"
                  >
                    <option value="">SELECCIONE</option>
                    <option
                      *ngFor="let comision of comisionList"
                      value="{{ comision.idComision }}"
                    >
                      {{ comision.nroComision }}
                    </option>
                  </select>
                </div>
                <div
                      *ngIf="
                        template.ins_plan &&
                        inputsQuotation.desTipoPlan == 'Plan Maestro'
                      "
                      class="col-sm-3"
                    >
                      <label class="mb-0"><span>Coberturas</span></label>
                      <br />
                      <a class="col-sm-12" (click)="seeCovers(quotationNumber)">
                        <img
                          alt="Ver planes"
                          src="assets/icons/see.svg"
                          style="
                            cursor: pointer;
                            height: 24px;
                            margin-left: 10px;
                          "
                        />
                      </a>
                    </div>
              </div>
                <!-- para visualizar los archivos adjuntos en la poliza matriz -->
              <div *ngIf="mode == 'Visualizar' " class="col-sm-12">
                  <div class="row" style="margin-top: 25px">
                <div class="col-sm-6">
                    <h5 style="font-size: 14px">ARCHIVO ADJUNTOS</h5>
                    <table class="table table-borderless riesgo tblbroker">
                      <thead>
                        <tr class="d-flex">
                          <th class="col-sm text-center">
                            <label>Nombre del archivo</label>
                          </th>
                          <th class="col-sm text-center">
                            <label>Descargar</label>
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        *ngIf="
                          inputsQuotation.FilePathList != null &&
                          inputsQuotation.FilePathList.length > 0
                        "
                      >
                        <tr
                          *ngFor="let item of inputsQuotation.FilePathList"
                          class="d-flex"
                        >
                          <td class="col-sm text-center">
                            <span>{{ item | fileName }}</span>
                          </td>
                          <td class="col-sm text-center">
                            <a (click)="downloadFile(item)"
                              ><img
                                src="assets/icons/imprimir.png"
                                title="Descargar"
                                style="cursor: pointer"
                                alt="Descargar"
                            /></a>
                          </td>
                        </tr>
                      </tbody>
                      <tbody
                        *ngIf="
                          inputsQuotation.FilePathList == null ||
                          inputsQuotation.FilePathList.length == 0
                        "
                      >
                        <tr class="d-flex">
                          <td colspan="2" class="col-sm text-center">
                            <span>No se encontraron archivos</span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-sm-6">
                    <span style="margin-top: 0">COMENTARIO</span>
                    <textarea
                      class="form-control"
                      cols="40"
                      rows="5"
                      style="width: 100%"
                      placeholder="Comentario"
                      maxlength="4000"
                      disabled
                      >{{ inputsQuotation.Comment }}</textarea
                    >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!--EAER -  Gestion de tramites con el Estado Sin trama fin -->

          <div *ngIf="codProducto == 2">
            <ng-container *ngIf="
                !template.ins_mapfre ||
                (template.ins_mapfre &&
                  inputsQuotation.PensionDetailsList != null &&
                  inputsQuotation.PensionDetailsList.length > 0)
              ">
              <div [formGroup]="mainFormGroup" class="collapse-list" *ngIf="mode != 'Visualizar' && mode != 'Emitir'">
                <div>
                  <input class="collapse-open" type="checkbox" id="evaluation" />
                  <label class="collapse-btn title" for="evaluation">
                    {{ evaluationLabel }}
                    <i class="fa fa-angle-down pull-right" style="position: relative; top: 4px"></i></label>
                  <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                      <div *ngIf="mode != 'Recotizar'" class="row">
                        <div class="col-sm-3">
                          <span>ESTADO</span>
                          <select formControlName="status" (change)="getReasonList($event)" class="minimal" [ngClass]="{
                              'error-validate':
                                !mainFormGroup.get('status').valid &&
                                mainFormGroup.get('status').touched
                            }">
                            <option disabled value="">Seleccione</option>
                            <option *ngFor="let item of statusList" value="{{ item.Id }}">
                              {{ item.Name }}
                            </option>
                          </select>
                          <span *ngIf="
                              mainFormGroup.get('status').errors != null &&
                              mainFormGroup.get('status').touched
                            " class="mensaje-error-control">
                            <ng-container *ngIf="
                                mainFormGroup.get('status').hasError('required');
                                then required_status;
                                else invalid_status
                              ">
                            </ng-container>
                            <ng-template #required_status>El estado es requerido.</ng-template>
                            <ng-template #invalid_status>El estado no es válido.</ng-template>
                          </span>
                        </div>
                        <div *ngIf="reasonList != null && reasonList.length > 0" class="col-sm-3">
                          <span>MOTIVO</span>
                          <select formControlName="reason" class="minimal">
                            <option value="">Seleccione</option>
                            <option *ngFor="let item of reasonList" value="{{ item.Id }}">
                              {{ item.Name }}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <span>COMENTARIO</span>
                          <textarea class="form-control" rows="4" placeholder="Comentario" formControlName="comment"
                            (keypress)="textValidate($event, 4)" maxlength="4000"></textarea>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <button type="button" (click)="fileInput.click()" style="margin: 15px 0">
                            <span>Seleccionar Archivo</span>
                          </button>
                          <input hidden #fileInput ngfSelect multiple type="file" [(files)]="files"
                            [maxSize]="filesMaxSize" (filesChange)="lastFileAt = getDate()" />
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <div *ngIf="files.length > 0">
                            <div style="margin-bottom: 0px">
                              <h6>Archivos Seleccionados ({{ files.length }})</h6>
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th>Nombre</th>
                                    <th class="text-center">Tamaño</th>
                                    <th class="text-center">Acción</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr *ngFor="let item of files; let i = index">
                                    <td>
                                      <strong>{{ item.name }}</strong>
                                    </td>
                                    <td class="text-center">
                                      {{
                                        item.size / 1024 / 1024 | number: ".2"
                                      }}
                                      MB
                                    </td>
                                    <td class="text-center">
                                      <img src="assets/icons/anular.png" (click)="files.splice(i, 1)" title="Eliminar"
                                        alt="Eliminar" />
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Mejora SCTR  -->
                      <div *ngIf="mode == 'Evaluar'" class="row">
                        <div class="col-sm-6">
                          <span>GLOSA DE CONSTANCIA</span>
                          <select formControlName="gloss" class="minimal" (change)="glossChanged()">
                            <option value="">Seleccione</option>
                            <option *ngFor="let item of glossList" value="{{ item.idGloss }}">
                              {{ item.desGloss }}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div *ngIf="mainFormGroup.controls.gloss.value == '99'" class="row">
                        <div class="col-sm-12">
                          <textarea class="form-control" rows="4" placeholder="GLOSA DE CONSTANCIA"
                            formControlName="glossComent" maxlength="200" (keypress)="textValidate($event, 4)"></textarea>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
          <!--Gestión de Trámite EHH-->
        <div
          class="collapse-list"
          *ngIf="
            codProducto == '3' &&
            isTransact &&
            (nTransac != 1 || inputsQuotation.SPolEstado == 1) &&
            !flagGobiernoIniciado &&
            !emitirPolizaOperaciones &&
            !procesarPolizaOperaciones &&
            mode != 'Enviar'
          "
        >
            <div>
            <input class="collapse-open" type="checkbox" id="planilla" />
            <label class="collapse-btn title" for="planilla"
              >Asignación<i
                class="fa fa-angle-down pull-right"
                style="position: relative; top: 4px;"
              ></i
            ></label>
              <div class="collapse-panel">
                <div class="collapse-inner collapse-border">
                  <div class="row">
                    <div class="col-md-4">
                      <span>Lista de usuarios</span>
                    <select
                      [(ngModel)]="inputsQuotation.UserAssigned"
                      class="minimal"
                      [disabled]="this.mode != 'Asignar'"
                    >
                        <!--option value="">Seleccione</option-->
                      <option
                        *ngFor="let item of usersList"
                        value="{{ item.NIDUSER }}">
                        {{ item.SUSER }} - {{ item.SFIRSTNAME }} {{ item.SLASTNAME }}
                      </option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                    <span
                      >El trámite será asignado al usuario seleccionado.</span
                    >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--Gestión de trámite - broker - EHH-->
          <div class="collapse-list" *ngIf="isTransact && nTransac == 13">
            <div>
            <input class="collapse-open" type="checkbox" id="carta" />
            <label class="collapse-btn title" for="carta"
              >Carta de Agenciamiento
              <i
                class="fa fa-angle-down pull-right"
                style="position: relative; top: 4px;"
              ></i
            ></label>
              <div class="collapse-panel">
                <div class="collapse-inner collapse-border">
                  <div>
                    <span>ARCHIVO CARTA DE AGENCIAMIENTO (*)</span>

                    <div class="row">
                      <div class="col-md-6">
                      <span
                        >Ver Archivos &nbsp;
                        <a
                          (click)="openFilePicker(this.infoTransact.PATHS_FILES_LETTER)"
                          ><img
                            alt="Ver movimientos"
                            src="assets/icons/preview_soat_box.png"
                            title="Ver movimientos"
                            style="cursor: pointer; height: 24px"
                        /></a>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div
          *ngIf="
            codProducto == 3 &&
            ((isTransact && mode != 'Enviar' && !procesarPolizaOperaciones && !emitirPolizaOperaciones ) || isPolizaMatriz || flagGobiernoIniciado || emitirPolizaMatrizTramiteEstado || enviarPolizaMatrizTramiteEstado)
          "
        >
            <div [formGroup]="mainFormGroup" class="collapse-list">
              <!-- <div [formGroup]="mainFormGroup" class="collapse-list" *ngIf="mode=='Evaluar' || mode =='Emitir'"> -->
              <div>
                <input class="collapse-open" type="checkbox" id="evaluation" />
                <label class="collapse-btn title" for="evaluation">
                  {{ evaluationLabel }}
                <i
                  class="fa fa-angle-down pull-right"
                  style="position: relative; top: 4px"
                ></i
              ></label>
                <div class="collapse-panel">
                  <div class="collapse-inner collapse-border">
                  <div
                    *ngIf="
                      isTransact ||
                      isPolizaMatriz ||
                      flagGobiernoIniciado ||
                      flagGobiernoEstado ||
                      flagGobiernoMatriz ||
                      this.infoTransact.COUNT_SINIESTRO > 0 && this.nTransac == 7"
                    [hidden]="
                      this.mode == 'Asignar' ||
                      this.mode == 'Evaluar Tramite && this.nTransac != 7' ||
                      (this.mode == 'Emitir' && !emitirPolizaMatrizTramiteEstado)"
                    class="row"
                  >
                    <!--div
                      [hidden]="
                        this.mode == 'Asignar' || this.mode == 'Evaluar Tramite'
                      "
                    -->
                    <div
                      *ngIf="
                        !flagGobiernoEstado;
                        then selectMod;
                        else selectPro
                      "
                    ></div>
                    <ng-template #selectMod>
                      <div class="col-sm-3">
                        <span>{{ (this.infoTransact.COUNT_SINIESTRO > 0 && this.nTransac == 7) ? 'EVALUACIÓN DE SINIESTROS (*)' : 'ESTADO (*)' }}</span>
                        <!--AVS - ANULACION-->
                        <select
                          formControlName="status"
                          (change)="changeStatusTransact($event)"
                          class="minimal"
                          [ngClass]="{
                            'error-validate':
                              !mainFormGroup.get('status').valid &&
                              mainFormGroup.get('status').touched
                          }"
                        >
                          <option disabled value="">Seleccione</option>
                          <option
                            *ngFor="let item of statusList"
                            value="{{ item.Id }}"
                          >
                            {{ item.Name }}
                          </option>
                        </select>
                        <span
                          *ngIf="
                            mainFormGroup.get('status').errors != null &&
                            mainFormGroup.get('status').touched
                          "
                          class="mensaje-error-control"
                        >
                          <ng-container
                            *ngIf="
                              mainFormGroup.get('status').hasError('required');
                              then required_status;
                              else invalid_status
                            "
                          >
                          </ng-container>
                          <ng-template #required_status
                            >El estado es requerido.</ng-template
                          >
                          <ng-template #invalid_status
                            >El estado no es válido.</ng-template
                          >
                        </span>
                      </div>
                    </ng-template>
                    <ng-template #selectPro>
                      <div class="col-sm-3">
                        <span>{{ (this.infoTransact.COUNT_SINIESTRO > 0 && this.nTransac == 7) ? 'EVALUACIÓN DE SINIESTROS (*)' : 'ESTADO (*)' }}</span>
                        <!--AVS - ANULACION-->
                        <select
                          (change)="changeStatusTransactEstado($event)"
                          class="minimal"
                        >
                          <option value="" selected>Seleccione</option>
                          <option
                            *ngFor="let item of statusEstadoList"
                            value="{{ item.Id }}"
                          >
                            {{ item.Name }}
                          </option>
                          <!-- <option value="2">Aprobado</option>
                          <option value="6">Rechazar</option> -->
                          <!-- <option value="16">En Pausa</option> -->
                        </select>
                      </div>
                      <div
                        *ngIf="(statusTransact == 6 && flagGobiernoIniciado) || (statusTransact == 6 && emitirPolizaMatrizTramiteEstado)"
                        class="col-sm-6"
                      >
                        <span>MOTIVO DE RECHAZO (*)</span>
                        <ng-select
                          [items]="rechazoMotivoList"
                          bindLabel="DES_MOTIVO"
                          bindValue="COD_MOTIVO"
                          class="border-ng"
                          [clearable]="true"
                          placeholder="Seleccionar"
                          dropdownPosition="bottom"
                          name="motivorechazo"
                          notFoundText="No hay resultados"
                          (change)="changeMotivoRechazo($event)">
                        </ng-select>
                      </div>
                    </ng-template>
                    <!--/div-->
                    <div class="row" *ngIf="this.infoTransact.COUNT_SINIESTRO > 0 && this.nTransac == 7">
                        <div class="col-sm-9">
                            <span>SUSTENTO (*)</span>
                            <button
                                type="button"
                                (click)="fileInput.click()"
                                style="margin: 0; margin-top: 5px; width: max-content;"
                            >
                                <span>Seleccionar Archivo</span>
                            </button>
                            <input
                                hidden
                                #fileInput
                                ngfSelect
                                multiple
                                type="file"
                                [(files)]="files"
                                [maxSize]="filesMaxSize"
                                (filesChange)="lastFileAt = getDate()"
                            />
                        </div>
                    </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12">
                        <span>COMENTARIO</span>
                      <textarea
                        class="form-control"
                        rows="4"
                        placeholder="Comentario"
                        maxlength="4000"
                        formControlName="comment"
                      ></textarea>
                      </div>
                    </div>
                    <div class="row" *ngIf="this.nTransac != 7 || this.infoTransact.COUNT_SINIESTRO == 0 && this.nTransac == 7">
                      <div class="col-sm-12">
                      <button
                        type="button"
                        (click)="fileInput.click()"
                        style="margin: 15px 0"
                      >
                          <span>Seleccionar Archivo</span>
                        </button>
                      <input
                        hidden
                        #fileInput
                        ngfSelect
                        multiple
                        type="file"
                        [(files)]="files"
                        [maxSize]="filesMaxSize"
                        (filesChange)="lastFileAt = getDate()"
                      />
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12">
                        <div *ngIf="files.length > 0">
                          <div style="margin-bottom: 0px">
                            <h6>Archivos Seleccionados ({{ files.length }})</h6>
                            <table class="table">
                              <thead>
                                <tr>
                                  <th>Nombre</th>
                                  <th class="text-center">Tamaño</th>
                                  <th class="text-center">Acción</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of files; let i = index">
                                  <td>
                                    <strong>{{ item.name }}</strong>
                                  </td>
                                  <td class="text-center">
                                  {{ item.size / 1024 / 1024 | number: ".2" }}
                                    MB
                                  </td>
                                  <td class="text-center">
                                  <img
                                    src="assets/icons/anular.png"
                                    (click)="files.splice(i, 1)"
                                    title="Eliminar"
                                    alt="Eliminar"
                                  />
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div *ngIf="codProducto == 3 && !emitirPolizaMatrizTramiteEstado">
          <div
            [formGroup]="mainFormGroup"
            class="collapse-list"
            *ngIf="mode=='Evaluar' ||
              (mode==='Autorizar' && (typeTran != 'Inclusión' && typeTran != 'Declaración')) ||
            mode === 'Emitir' ||
            (mode === 'Renovar' && perfil == 5) ||
            (mode === 'Renovar' && (perfil == 136 || isProfileOpe == 1)) ||
            mode === 'EmitirR' ||
            (mode === 'Incluir' && perfil == 5) ||
            (mode === 'Incluir' && (perfil == 136 || isProfileOpe == 1)) ||
            (mode === 'Endosar' && perfil == 5) ||
            (mode === 'Endosar' && (perfil == 136 || isProfileOpe == 1)) ||
              (mode === 'Excluir' && perfil == 7)"
          >
              <!-- <div [formGroup]="mainFormGroup" class="collapse-list" *ngIf="mode=='Evaluar' || mode =='Emitir'"> -->
            <div
              [hidden]="
                (this.mode == 'Emitir' && emitirPolizaOperaciones) ||
                (this.mode == 'Excluir' && procesarPolizaOperaciones) ||
                (this.mode == 'Incluir' && procesarPolizaOperaciones) ||
                (this.mode == 'Renovar' && procesarPolizaOperaciones) ||
                (this.mode == 'Endosar' && procesarPolizaOperaciones)
              "
            >
                <input class="collapse-open" type="checkbox" id="evaluation" />
                <label class="collapse-btn title" for="evaluation">
                  {{ evaluationLabel }}
                <i
                  class="fa fa-angle-down pull-right"
                  style="position: relative; top: 4px"
                ></i
              ></label>
                <div class="collapse-panel">
                  <div class="collapse-inner collapse-border">
                  <div *ngIf="mode != 'Recotizar' &&
                      !(this.flagGobiernoEstado && this.flagGobiernoMatriz)"
                    class="row">
                      <div class="col-sm-3">
                        <span>ESTADO (*)</span>
                      <select
                        formControlName="status"
                        (change)="getReasonList($event)"
                        class="minimal"
                        [ngClass]="{
                            'error-validate':
                              !mainFormGroup.get('status').valid &&
                              mainFormGroup.get('status').touched
                        }"
                      >
                          <option disabled value="">Seleccione</option>
                        <option
                          *ngFor="let item of statusList"
                          value="{{ item.Id }}"
                        >
                            {{ item.Name }}
                          </option>
                        </select>
                      <span
                        *ngIf="
                            mainFormGroup.get('status').errors != null &&
                            mainFormGroup.get('status').touched
                        "
                        class="mensaje-error-control"
                      >
                        <ng-container
                          *ngIf="
                              mainFormGroup.get('status').hasError('required');
                              then required_status;
                              else invalid_status
                          "
                        >
                          </ng-container>
                        <ng-template #required_status
                          >El estado es requerido.</ng-template
                        >
                        <ng-template #invalid_status
                          >El estado no es válido.</ng-template
                        >
                        </span>
                      </div>
                      <!-- <div *ngIf="mainFormGroup.get('status').value!='2'" class="col-sm-3"> -->
                    <div
                      *ngIf="
                        reasonList != null &&
                        reasonList.length > 0 &&
                        mode != 'Excluir'
                      "
                      class="col-sm-3"
                    >
                        <span>MOTIVO </span>
                      <select
                        formControlName="reason"
                        class="minimal"
                        [ngClass]="{
                            'error-validate':
                              !mainFormGroup.get('reason').valid &&
                              mainFormGroup.get('reason').touched
                        }"
                      >
                          <option value="">Seleccione</option>
                        <option
                          *ngFor="let item of reasonList"
                          value="{{ item.Id }}"
                        >
                            {{ item.Name }}
                          </option>
                        </select>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12">
                        <span>COMENTARIO</span>
                      <textarea
                        class="form-control"
                        rows="4"
                        placeholder="Comentario"
                        maxlength="4000"
                        formControlName="comment"
                      ></textarea>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12">
                      <button
                        type="button"
                        (click)="fileInput.click()"
                        style="margin: 15px 0"
                      >
                          <span>Seleccionar Archivo</span>
                        </button>
                      <input
                        hidden
                        #fileInput
                        ngfSelect
                        multiple
                        type="file"
                        [(files)]="files"
                        [maxSize]="filesMaxSize"
                        (filesChange)="lastFileAt = getDate()"
                      />
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12">
                        <div *ngIf="files.length > 0">
                          <div style="margin-bottom: 0px">
                            <h6>Archivos Seleccionados ({{ files.length }})</h6>
                            <table class="table">
                              <thead>
                                <tr>
                                  <th>Nombre</th>
                                  <th class="text-center">Tamaño</th>
                                  <th class="text-center">Acción</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of files; let i = index">
                                  <td>
                                    <strong>{{ item.name }}</strong>
                                  </td>
                                  <td class="text-center">
                                  {{ item.size / 1024 / 1024 | number: ".2" }}
                                    MB
                                  </td>
                                  <td class="text-center">
                                  <img
                                    src="assets/icons/anular.png"
                                    (click)="files.splice(i, 1)"
                                    title="Eliminar"
                                    alt="Eliminar"
                                  />
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--Gestión de Trámite EHH-->

          <div class="collapse-list" *ngIf="isTransact">
            <div>
              <input class="collapse-open" type="checkbox" id="history" />
              <label class="collapse-btn title" for="history">
                Historial de Trámite
              <i
                class="fa fa-angle-down pull-right"
                style="position: relative; top: 4px"
              ></i
            ></label>
              <div class="collapse-panel">
                <div class="collapse-inner collapse-border">
                  <div class="grid form-group">
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr class="grid-title">
                          <th
                            *ngIf="codProducto == 3"
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Número
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Estado
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Usuario asignado
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Perfil
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Asignado por
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Fecha
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Comentario
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Archivos
                            </th>
                          </tr>
                        </thead>
                      <tbody
                        *ngIf="
                            statusChangeList == null ||
                            statusChangeList.length == 0
                        "
                      >
                          <tr>
                            <td colspan="7">No se encontraron registros.</td>
                          </tr>
                        </tbody>
                      <tbody
                        *ngIf="
                            statusChangeList != null &&
                            statusChangeList.length > 0
                        "
                      >
                          <tr *ngFor="let item of listToShow; let i = index">
                            <td *ngIf="codProducto == 3">{{ item.LINEA }}</td>
                            <td>{{ item.DES_ESTADO }}</td>
                            <td>{{ item.USUARIO_ASSIGNED }}</td>
                            <td>{{ item.SPERFIL }}</td>
                            <td>{{ item.USUARIO_ASSIGNOR }}</td>
                            <td>
                              {{ item.DFEC_REG | date: "dd/MM/yyyy, h:mm:ss a" }}
                            </td>
                            <td>{{ item.SCOMMENT }}</td>

                          <ng-container
                            *ngIf="
                                item.PATHS_FILES != null &&
                                  item.PATHS_FILES.length > 0;
                                then showButton;
                                else hideButton
                            "
                          >
                            </ng-container>
                            <ng-template #showButton>
                              <td>
                              <a (click)="openFilePicker(item.PATHS_FILES)"
                                ><img
                                  alt="Ver movimientos"
                                  src="assets/icons/preview_soat_box.png"
                                  title="Ver movimientos"
                                  style="cursor: pointer; height: 24px"
                              /></a>
                              </td>
                            </ng-template>
                            <ng-template #hideButton>
                              <td>Sin Archivos</td>
                            </ng-template>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                <div
                  *ngIf="
                      statusChangeList != null && statusChangeList.length > 0
                  "
                  class="row"
                  style="display: flex"
                >
                    <div class="col-sm-12">
                    <ngb-pagination
                      [(page)]="currentPage"
                      [pageSize]="itemsPerPage"
                      [collectionSize]="totalItems"
                      [maxSize]="maxSize"
                      (pageChange)="pageChanged(currentPage)"
                    >
                        <ng-template ngbPaginationPrevious>ANTERIOR</ng-template>
                        <ng-template ngbPaginationNext>SIGUIENTE</ng-template>
                      </ngb-pagination>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="collapse-list"  *ngIf="!isTransact">
            <div>
              <input class="collapse-open" type="checkbox" id="history" />
              <label class="collapse-btn title" for="history">
                Historial de Evaluaciones
              <i
                class="fa fa-angle-down pull-right"
                style="position: relative; top: 4px"
              ></i
            ></label>
              <div class="collapse-panel">
                <div class="collapse-inner collapse-border">
                  <div class="grid form-group">
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr class="grid-title">
                          <th
                            *ngIf="codProducto == 3"
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Número
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Estado
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Vigencia
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Motivo
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Usuario
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Perfil
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Fecha
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Comentario
                            </th>
                          <th
                            style="text-align: center"
                            class="grid-title-item"
                          >
                              Archivos
                            </th>
                            <th *ngIf="codProducto == 3" style="text-align: center" class="grid-title-item">
                              Trama
                            </th>
                            <th *ngIf="inputsQuotation.reverseFlag" style="text-align: center" class="grid-title-item">
                              Reversar
                            </th>
                          </tr>
                        </thead>
                      <tbody
                        *ngIf="
                            statusChangeList == null ||
                            statusChangeList.length == 0
                        "
                      >
                          <tr>
                            <td colspan="7">No se encontraron registros.</td>
                          </tr>
                        </tbody>
                      <tbody
                        *ngIf="
                            statusChangeList != null &&
                            statusChangeList.length > 0
                        "
                      >
                          <tr *ngFor="let item of listToShow; let i = index">
                            <td *ngIf="codProducto == 3">{{ item.linea }}</td>
                            <td>{{ item.Status }}</td>
                            <td>{{ item.Vigencia }}</td>
                            <td>{{ item.Reason }}</td>
                            <td>{{ item.User }}</td>
                            <td>{{ item.Profile }}</td>
                            <td>
                              {{ item.EventDate | date: "dd/MM/yyyy, h:mm a" }}
                            </td>
                            <td>{{ item.Comment }}</td>

                          <ng-container
                            *ngIf="
                                item.FilePathList != null &&
                                  item.FilePathList.length > 0;
                                then showButton;
                                else hideButton
                            "
                          >
                            </ng-container>
                            <ng-template #showButton>
                              <td>
                              <a (click)="openFilePicker(item.FilePathList)"
                                ><img
                                  alt="Ver movimientos"
                                  src="assets/icons/preview_soat_box.png"
                                  title="Ver movimientos"
                                  style="cursor: pointer; height: 24px"
                              /></a>
                              </td>
                            </ng-template>
                            <ng-template #hideButton>
                              <td>Sin Archivos</td>
                            </ng-template>

                            <td *ngIf="item.codProceso != '' && codProducto == 3">
                              <a (click)="getTramaFile(item)"
                              ><img
                                alt="descargar"
                                src="assets/icons/download2.png"
                                title="descargar"
                                style="cursor: pointer; height: 24px"
                            /></a>
                            </td>
                            <td *ngIf="item.codProceso == '' && codProducto == 3">
                              Sin Trama
                            </td>
  
                            <td *ngIf="inputsQuotation.reverseFlag && nbranch != 73">
                              <a
                                *ngIf="item.reverse == 1"
                                (click)="reverseMovementIncomplete()"
                                ><img
                                  alt="Reversar"
                                  src="assets/icons/anular.png"
                                  title="Reversar"
                                  style="cursor: pointer; height: 24px"
                              /></a>
                              <span *ngIf="item.reverse == 0">--</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                <div
                  *ngIf="
                      statusChangeList != null && statusChangeList.length > 0
                  "
                  class="row"
                  style="display: flex"
                >
                    <div class="col-sm-12">
                    <ngb-pagination
                      [(page)]="currentPage"
                      [pageSize]="itemsPerPage"
                      [collectionSize]="totalItems"
                      [maxSize]="maxSize"
                      (pageChange)="pageChanged(currentPage)"
                    >
                        <ng-template ngbPaginationPrevious>ANTERIOR</ng-template>
                        <ng-template ngbPaginationNext>SIGUIENTE</ng-template>
                      </ngb-pagination>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-2" style="width: 100%">
            <ng-container *ngIf="!template.ins_mapfre">
              <ng-container *ngIf="cotEstado != 3">
                <button *ngIf="
                    codProducto == 2 &&
                    (mode !== 'Visualizar' || status === 'APROBADO')
                  " class="pull-right full-color" (click)="manageOperation()">
                  <span>{{ buttonName }}</span>
                </button>
              </ng-container>
              <button
                [hidden]="valDisabledButtons()"
                 *ngIf="
                  codProducto == 3 &&
                ((mode === 'Emitir' &&
                  emitirCertificadoTecnica == false &&
                  emitirPolizaOperaciones == false &&
                  flagGobiernoIniciado == false &&
                  !(this.flagGobiernoEstado && this.flagGobiernoMatriz)) ||
                    mode === 'EmitirR' ||
                    mode === 'Evaluar' ||
                    mode == 'Autorizar' ||
                    mode == 'Recotizar' ||
                  (mode == 'Renovar' && procesarPolizaOperaciones == false) ||
                  (mode == 'Incluir' && procesarPolizaOperaciones == false) ||
                  (mode == 'Endosar' && procesarPolizaOperaciones == false) ||
                  (mode == 'Excluir' && procesarPolizaOperaciones == false))"
              class="pull-right full-color"
              (click)="manageOperation()"
            >
                <span>{{ buttonName }}</span>
              </button>

              <!--button [hidden]="this.flagDisabledRestric"
                *ngIf="codProducto == 3 && mode === 'Recotizar' && typeTran === 'Inclusión'"
                class="pull-right full-color" (click)="incluirPoliza()">
                <span>Incluir</span>
              </button-->

              <!--button [hidden]="this.flagDisabledRestric"
                *ngIf="codProducto == 3 && mode === 'Recotizar' && typeTran === 'Declaración'"
                class="pull-right full-color" (click)="renovarPoliza()">
                <span>Renovar</span>
              </button-->

            <button
              *ngIf="
                isPolizaMatriz &&
                !flagAprobCli &&
                !flagRechazoPol &&
                !(this.flagGobiernoEstado && this.flagGobiernoMatriz)
              "
              class="pull-right full-color"
              (click)="EmitCertificado()"
            >
              <span>{{ buttonName }}</span>
            </button>
            <button
              *ngIf="mode == 'EmitirC' && emitirCertificadoTecnica == true"
              class="pull-right full-color"
              (click)="EmitCertificadoTecnica()"
            >
              <span>{{ buttonName }} </span>
            </button>

            <button
              *ngIf="
                flagGobiernoIniciado &&
                !flagRechazoPol &&
                !(this.flagGobiernoEstado && this.flagGobiernoMatriz)
              "
              class="pull-right full-color"
              (click)="EmisionPolizaEstado()"
            >
              <span>{{ buttonName }}</span>
            </button>

            <button
              *ngIf="
                (flagGobiernoIniciado &&
                !flagRechazoPol &&
                inputsQuotation.SPolMatriz) || iniciadoPolizaMatrizTramiteEstado
              "
              class="pull-right full-color"
              (click)="EmisionPolizaEstadoSinTrama()"
            >
              <span>{{ buttonName }}</span>
            </button>

            <button
              *ngIf="emitirPolizaMatrizTramiteEstado"
              class="pull-right full-color"
              (click)="EmisionPolizaMatrizTEstado()"
            >
              <span>{{ buttonName }}</span>
            </button>

            <button
              *ngIf="
                emitirPolizaOperaciones &&
                !flagRechazoPol &&
                !emitirCertificadoTecnica
              "
              class="pull-right full-color"
              (click)="EmisionPolizaEstadoOperaciones()"
            >
                <span>{{ buttonName }}</span>
              </button>
            <!-- Boton para procesar  otras ransacciones sin envio al ejecutivo despues de la aprobación de técnica EmisionPolizaEstadoOperaciones-->
            <button
              *ngIf="procesarPolizaOperaciones && !flagRechazoPol"
              class="pull-right full-color"
              (click)="procesarPolizaEstadoOperaciones()"
            >
                <span>{{ buttonName }}</span>
              </button>

            <button
              *ngIf="
                (mode == 'Asignar' && !flagRechazoPol) ||
                (flagGobiernoEstado && mode == 'Asignar') ||
                (flagGobiernoIniciado && flagRechazoPol)
              "
              class="pull-right full-color"
              (click)="AsignarTramite()"
            >
                <span>{{ buttonName }}</span>
              </button>

            <button
              *ngIf="
                mode == 'Evaluar Tramite' ||
                mode == 'Continuar' ||
                (mode == 'Enviar')
              "
              class="pull-right full-color"
              (click)="ContinuarTramite()"
            >
                <span>{{ buttonName }}</span>
              </button>

              <button
                [hidden]="valDisabledButtons()"
                *ngIf="
                  (codProducto == 3 && mode === 'EmitirR') ||
                  (codProducto == 3 &&
                    mode === 'Renovar' &&
                    perfil != 5 &&
                    perfil != 136 &&
                    perfil != 137 &&
                    perfil != 138 &&
                    perfil != 32 && perfil != 31)
                "
                class="pull-right full-color"
                (click)="recotizar()"
              >
                <span>Recotizar</span>
              </button>

              <button *ngIf="inputsQuotation.reversePD"
                class="pull-right full-color"
                (click)="reversar()">
                <span>Reversar</span>
              </button>
  
            <button
              *ngIf="from == 'transact1'"
              class="pull-right"
              [routerLink]="['/extranet/tray-transact/1']"
            >
                <span>Cancelar</span>
              </button>

            <button
              *ngIf="from == 'transact2'"
              class="pull-right"
              [routerLink]="['/extranet/tray-transact/2']"
            >
                <span>Cancelar</span>
              </button>

            <button
              *ngIf="from == ''"
              class="pull-right"
              [routerLink]="['/extranet/request-status']"
            >
                <span>Cancelar</span>
              </button>

            <button
              *ngIf="from == 'BANDEJA'"
              class="pull-right"
              [routerLink]="['/extranet/bandeja']"
            >
                <span>Cancelar</span>
              </button>

              <!-- ac modal pagos 20201105-->
            <panel-info-pago
              [(abrir)]="modal.pagos"
              [cotizacion]="cotizacion"
              (confirmar)="formaPagoElegido()"
              [(isLoading)]="isLoading"
            >
              </panel-info-pago>
              <!-- ac modal pagos 20201105-->
            </ng-container>
            <ng-container *ngIf="template.ins_mapfre">
            <button
              *ngIf="
                  (inputsQuotation.PensionDetailsList != null &&
                    inputsQuotation.PensionDetailsList?.length > 0 &&
                    mode == 'Evaluar') ||
                  status == 'APROBADO'
              "
              class="pull-right full-color"
              (click)="manageOperation()"
            >
                <span>{{ buttonName }}</span>
              </button>
            <button
              class="pull-right"
              [routerLink]="['/extranet/request-status']"
            >
                <span>Cancelar</span>
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <!-- Pantalla de carga -->
    <div [hidden]="!isLoading" class="loadingScreen">
      <div style="display: flex; height: 100%; width: 100%">
      <i
        style="margin: auto; font-size: 50px"
        class="fa fa-spinner fa-spin"
      ></i>
    </div>
  </div>
</div>