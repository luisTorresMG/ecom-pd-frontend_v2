<div class="form-group row">
    <div class="col-lg-3">
        <app-nav-menuprod></app-nav-menuprod>
    </div>
    <div class="col-lg-9">
        <div class="container-fluid p-0">
            <div class="header-content mb-3">
                <div class="containt-item">
                    <div class="header-item">
                        <span class="title">Cotizador</span>
                        <span class="title"
                              *ngIf="nrocotizacion">
                            <h6>Detalle de Cotización N° {{ nrocotizacion }}</h6>
                        </span>
                    </div>
                </div>
                <p class="eps-title">
                    {{ lblProducto }}<span>{{ lblFecha }}</span>
                </p>
            </div>

            <div class="collapse-list">
                <div>
                    <input class="collapse-open"
                           type="checkbox"
                           id="cotizador" />
                    <label class="collapse-btn title"
                           for="cotizador">Datos del Contratante
                        <i class="fa fa-angle-down pull-right"
                           style="position: relative; top: 4px">
                        </i>
                    </label>
                    <div class="collapse-panel">
                        <div class="collapse-inner collapse-border">
                            <div class="row">
                                <div class="col-sm-12"
                                     *ngIf="!stateRecotiza">
                                    <label>
                                        <span>
                                            BÚSQUEDA:
                                        </span>
                                    </label>
                                    <label>
                                        <span>
                                            <input type="radio"
                                                   [(ngModel)]="inputsQuotation.P_TYPE_SEARCH"
                                                   name="searchContractor"
                                                   value="1"
                                                   (ngModelChange)="onSelectTypeSearch()"
                                                   class="t-search" />
                                            POR NRO. DOCUMENTO
                                        </span>
                                    </label>
                                    <label>
                                        <span>
                                            <input type="radio"
                                                   [(ngModel)]="inputsQuotation.P_TYPE_SEARCH"
                                                   name="searchContractor"
                                                   value="2"
                                                   (ngModelChange)="onSelectTypeSearch()"
                                                   class="t-search" />
                                            POR NOMBRES
                                        </span>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div *ngIf="blockSearch"
                                     class="col-sm-3">
                                    <span>TIPO DOCUMENTO (*)</span>
                                    <select (change)="selTipoDocumento(inputsQuotation.P_NIDDOC_TYPE)"
                                            [disabled]="stateSearch"
                                            (click)="clearValidate(0)"
                                            [ngClass]="{ 'error-validate': inputsValidate[0] }"
                                            [(ngModel)]="inputsQuotation.P_NIDDOC_TYPE"
                                            class="minimal">
                                        <option value="-1"
                                                disabled>Seleccionar
                                        </option>
                                        <option *ngFor="let documenttype of documentTypeList"
                                                value="{{ documenttype.Id }}">
                                            {{ documenttype.Name }}
                                        </option>
                                    </select>
                                </div>
                                <div *ngIf="!blockSearch"
                                     class="col-sm-3">
                                    <span>TIPO DE PERSONA (*)</span>
                                    <select (change)="onSelectTypePerson($any($event.target).value)"
                                            [(ngModel)]="inputsQuotation.P_PERSON_TYPE"
                                            class="minimal">
                                        <!-- <option value="1"
                                                selected>Persona Natural</option> -->
                                        <option value="2">
                                            Persona Jurídica
                                        </option>
                                    </select>
                                </div>
                                <div *ngIf="blockSearch"
                                     class="col-sm-3">
                                    <span>NRO DE DOCUMENTO (*)</span>
                                    <input type="text"
                                           placeholder="Nro Documento"
                                           [(ngModel)]="inputsQuotation.P_SIDDOC"
                                           (click)="clearValidate(1)"
                                           [ngClass]="{ 'error-validate': inputsValidate[1] }"
                                           (keypress)="validarNroDocumento($event, inputsQuotation.P_NIDDOC_TYPE)"
                                           (ngModelChange)="cambioDocumento(inputsQuotation.P_SIDDOC)"
                                           [disabled]="stateSearch"
                                           maxlength="{{ maxlength }}"
                                           (keyup.enter)="buscarContratante()" />
                                </div>
                                <div class="col-sm-3"
                                     style="margin-top: 35px"
                                     *ngIf="!stateRecotiza">
                                    <button (click)="buscarContratante()"
                                            style="margin: 0">
                                        <img src="assets/icons/buscar_certificado.png" />
                                        <span>Buscar</span>
                                    </button>
                                </div>
                                <div class="col-sm-3"> <!--AVS - INTERCONEXION SABSA-->
                                    <span>TIPO DE CUENTA</span>
                                    <input type="text"
                                           placeholder="Tipo de Cuenta"
                                           [disabled]="!flagGBD"
                                           [value]="inputsQuotation.P_SISCLIENT_GBD === '1' ? 'GOBIERNO' : inputsQuotation.P_SISCLIENT_GBD === '2' ? 'PRIVADO' : 'NO REGISTRA'" />
                                </div>
                                <!-- <div class="col-sm-3"
                                     *ngIf="codProducto == 3 && creditHistory != null && !this.variable.var_isBroker">
                                    <span>TIPO RIESGO</span>
                                    <input type="text"
                                           [(ngModel)]="creditHistory.sdescript"
                                           [ngClass]="creditHistory.nflag == 0 ? 'riesgo-alto' : 'riesgo-bajo'"
                                           disabled />
                                </div> -->
                            </div>
                            <div class="row">
                                <div *ngIf="blockDoc"
                                     class="col-sm-3">
                                    <span>NOMBRES (*)</span>
                                    <input type="text"
                                           placeholder="Nombres"
                                           [disabled]="!stateSearch || stateRecotiza"
                                           [(ngModel)]="inputsQuotation.P_SFIRSTNAME"
                                           (keyup.enter)="buscarContratante()"
                                           (keypress)="textValidate($event, 5)" />
                                </div>
                                <div *ngIf="!blockDoc"
                                     class="col-sm-9">
                                    <span>RAZÓN SOCIAL (*)</span>
                                    <input type="text"
                                           placeholder="Razón Social"
                                           [disabled]="!stateSearch || stateRecotiza"
                                           [(ngModel)]="inputsQuotation.P_SLEGALNAME"
                                           (keyup.enter)="buscarContratante()"
                                           (keypress)="textValidate($event, 4)" />
                                </div>
                                <div *ngIf="blockDoc"
                                     class="col-sm-3">
                                    <span>APELLIDO PATERNO (*)</span>
                                    <input type="text"
                                           placeholder="Apellido Paterno"
                                           [disabled]="!stateSearch || stateRecotiza"
                                           [(ngModel)]="inputsQuotation.P_SLASTNAME"
                                           (keyup.enter)="buscarContratante()"
                                           (keypress)="textValidate($event, 5)" />
                                </div>
                                <div *ngIf="blockDoc"
                                     class="col-sm-3">
                                    <span>APELLIDO MATERNO</span>
                                    <input type="text"
                                           placeholder="Apellido Materno"
                                           [disabled]="!stateSearch || stateRecotiza"
                                           [(ngModel)]="inputsQuotation.P_SLASTNAME2"
                                           (keyup.enter)="buscarContratante()"
                                           (keypress)="textValidate($event, 5)" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <span>DIRECCIÓN</span>
                                    <input type="text"
                                           placeholder="Dirección"
                                           disabled
                                           [(ngModel)]="inputsQuotation.P_SDESDIREBUSQ" />
                                </div>
                                <div class="col-sm-3">
                                    <span>CORREO ELECTRÓNICO
                                        <label *ngIf="template.ins_email"
                                               style="margin: 0">
                                        </label>
                                    </span>
                                    <input type="text"
                                           placeholder="Correo Electrónico"
                                           [disabled]="!flagEmail"
                                           [(ngModel)]="inputsQuotation.P_SE_MAIL"
                                           (click)="clearValidate(19)"
                                           [ngClass]="{ 'error-validate': inputsValidate[19] }" />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="this.flagClienteNuevo !== 1"> <!--AVS - INTERCONEXION SABSA-->
                                    <span style="color: green;margin-top: 45px;">CLIENTE: {{ this.flagClienteNuevo === 0
                                        ? 'NUEVO' : '' }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Agregar Contacto -->
            <div class="collapse-list"
                 *ngIf="contractingdata != null && flagContact && template.ins_addContact">
                <div>
                    <input class="collapse-open"
                           type="checkbox"
                           id="contactos" />
                    <label class="collapse-btn title"
                           for="contactos">Datos de contacto del cliente
                        <i class="fa fa-angle-down pull-right"
                           style="position: relative; top: 4px">
                        </i>
                    </label>
                    <div class="collapse-panel">
                        <div class="collapse-inner collapse-border">
                            <div class="row">
                                <div class="col-sm-12 mt-15">
                                    <button *ngIf="contactList.length == 0"
                                            class="pull-right"
                                            (click)="openModal('add-contact')"
                                            style="margin: 0">
                                        <span>Agregar Contacto</span>
                                    </button>
                                    <table class="table table-borderless riesgo tblbroker"
                                           style="margin-top: 60px">
                                        <thead>
                                            <tr class="d-flex">
                                                <td class="col-sm text-center">N°</td>
                                                <td class="col-sm text-center">Parentesco</td>
                                                <td class="col-sm text-center">Nombres y Apellidos</td>
                                                <td class="col-sm text-center">Teléfono</td>
                                                <td class="col-sm text-center">Correo Electrónico</td>
                                                <td class="col-sm text-center">Acciones</td>
                                            </tr>
                                        </thead>
                                        <tbody *ngFor="let contacto of contactList; let row = index">
                                            <tr class="d-flex">
                                                <td class="col-sm text-center">{{ row + 1 }}</td>
                                                <td class="col-sm text-center">
                                                    {{ contacto.P_DESTICONTACTO }}
                                                </td>
                                                <td class="col-sm text-center">
                                                    {{ contacto.P_SNOMBRES }} {{ contacto.P_SAPEPAT }}
                                                    {{ contacto.P_SAPEMAT }}
                                                </td>
                                                <td class="col-sm text-center">
                                                    {{ contacto.P_SPHONE }}
                                                </td>
                                                <td class="col-sm text-center">
                                                    {{ contacto.P_SE_MAIL }}
                                                </td>
                                                <td class="col-sm text-center">
                                                    <img *ngIf="contacto.P_CLASS == ''"
                                                         src="assets/icons/editar.png"
                                                         (click)="editContact(contacto.P_NROW)"
                                                         title="Editar"
                                                         alt="Editar" />
                                                    &nbsp;
                                                    <img *ngIf="contacto.P_CLASS == ''"
                                                         src="assets/icons/anular.png"
                                                         (click)="deleteContact(row)"
                                                         title="Eliminar"
                                                         alt="Eliminar" />
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody *ngIf="contactList.length == 0">
                                            <tr class="d-flex">
                                                <td class="col-sm text-center">No tiene Contactos</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Fin Agregar Contacto -->

            <div class="collapse-list">
                <div>
                    <input class="collapse-open"
                           type="checkbox"
                           id="comercializador" />
                    <label class="collapse-btn title"
                           for="comercializador">Datos Brokers
                        <i class="fa fa-angle-down pull-right"
                           style="position: relative; top: 4px">
                        </i>
                    </label>
                    <div class="collapse-panel">
                        <div class="collapse-inner collapse-border">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div [hidden]="!canAddSecondaryBroker ||variable.var_isBroker ||typeTran == 'Exclusión'"
                                         *ngIf="brokerList.length < 3">
                                        <button class="pull-right"
                                                (click)="addBroker()"
                                                style="margin: 0">
                                            <span>Agregar</span>
                                        </button>
                                    </div>
                                    <table class="table table-borderless riesgo tblbroker"
                                           style="margin-top: 60px">
                                        <thead>
                                            <tr class="d-flex">
                                                <th class="col-sm text-center">
                                                    <label>Tipo Documento</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label>Nro Documento</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label>Razón Social / Nombres y Apellidos</label>
                                                </th>
                                                <th class="col-sm text-center"
                                                    *ngIf="(nTransac == 1 || nTransac == 4) && sAbTransac != 'DE'">
                                                    <label>Oficina de producción</label>
                                                </th>
                                                <th class="col-sm text-center"
                                                    *ngIf="listaTasasSalud?.length > 0 && template.ins_comSalud">
                                                    <label>{{ variable.var_desComisionSalud }}</label>
                                                </th>
                                                <th class="col-sm text-center ctasa"
                                                    *ngIf="listaTasasSalud?.length > 0 && template.ins_comSaludPro">
                                                    <label>
                                                        <input type="checkbox"
                                                               class="checkbox"
                                                               [(ngModel)]="comPropuestaSalud"
                                                               *ngIf="template.ins_comSaludProCheck"
                                                               (change)="resetearPropuesto(3)" />
                                                        <span class="schk">
                                                            {{ variable.var_desComisionSaludPro }}
                                                        </span>
                                                    </label>
                                                </th>
                                                <th class="col-sm text-center"
                                                    *ngIf=" listaTasasPension?.length > 0 || (!template.ins_pensionList && template.ins_comPension)">
                                                    <label>{{ variable.var_desComisionPension }}</label>
                                                </th>
                                                <th class="col-sm text-center ctasa"
                                                    *ngIf="listaTasasPension?.length > 0 || (!template.ins_pensionList && template.ins_comPensionPro)">
                                                    <label>
                                                        <input [disabled]="!canProposeComission"
                                                               type="checkbox"
                                                               class="checkbox"
                                                               [(ngModel)]="comPropuestaPension"
                                                               (change)="resetearPropuesto(4)"
                                                               *ngIf="template.ins_comPensionProCheck" />
                                                        <span class="schk">
                                                            {{ variable.var_desComisionPensionPro }}
                                                        </span>
                                                    </label>
                                                </th>
                                                <th class=""
                                                    *ngIf="!variable.var_isBroker || (typeTran != 'Exclusión' && !variable.var_isBroker)">
                                                    <label>Acción</label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="d-flex"
                                                *ngIf="brokerList.length == 0">
                                                <td class="col-sm text-center">
                                                    No hay brokers
                                                </td>
                                            </tr>
                                            <tr class="d-flex"
                                                *ngFor="let broker of brokerList; let row = index">
                                                <td class="col-sm text-center">
                                                    <span>{{ broker.NTIPDOC | typeDocument }}</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <span>{{ broker.NNUMDOC }}</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <span>{{ broker.RAZON_SOCIAL }}</span>
                                                </td>
                                                <!-- Dep Broker Robert Pariasca-->
                                                <td class="col-sm text-center"
                                                    *ngIf="(nTransac == 1 || nTransac == 4) &&sAbTransac != 'DE'">
                                                    <ng-select [items]="BrokerDep"
                                                               bindLabel="SDESCRIPT"
                                                               [ngClass]="{ 'error-validate': inputsValidate[19] }"
                                                               bindValue="NLOCAL"
                                                               [(ngModel)]="selectedDep[row]"
                                                               class="dep-ng"
                                                               (click)="clearValidate(19)"
                                                               [clearable]="true"
                                                               placeholder="Seleccionar Oficina"
                                                               dropdownPosition="bottom"
                                                               notFoundText="No hay resultados">
                                                        <ng-template ng-option-tmp
                                                                     let-item="item">
                                                            <div title="{{ item.SDESCRIPT }}">
                                                                {{ item.SDESCRIPT }}
                                                            </div>
                                                        </ng-template>
                                                    </ng-select>
                                                </td>
                                                <!-- Dep Broker-->
                                                <td class="col-sm text-center"
                                                    *ngIf="listaTasasSalud?.length > 0 && template.ins_comSalud">
                                                    <span>{{ broker.P_COM_SALUD }} %</span>
                                                </td>
                                                <td class="col-sm"
                                                    *ngIf="listaTasasSalud?.length > 0 &&template.ins_comSaludPro">
                                                    <input *ngIf="broker.P_COM_SALUD != 0"
                                                           type="text"
                                                           class="text-center"
                                                           maxlength="5"
                                                           class="text-center input-acc"
                                                           [disabled]="stateBrokerTasaSalud"
                                                           placeholder="0"
                                                           [(ngModel)]="broker.P_COM_SALUD_PRO"
                                                           [ngClass]="{ 'error-validate': broker.valItemSal }"
                                                           (ngModelChange)="comisionPropuesta(broker.P_COM_SALUD_PRO, row, 2)"
                                                           (keypress)="onKey($event, 'porcentaje');"
                                                           (keydown)="onKeydown($event);" 
                                                           (paste)="onPaste($event, 'porcentaje')"
                                                           />
                                                        <span class="porcentaje">%</span>

                                                    <input *ngIf="broker.P_COM_SALUD == 0"
                                                           type="text"
                                                           class="text-center input-acc"
                                                           placeholder="0"
                                                           disabled />
                                                        <span class="porcentaje">%</span>

                                                </td>
                                                <td class="col-sm text-center"
                                                    *ngIf="listaTasasPension?.length > 0 && template.ins_comPension">
                                                    <span>{{ broker.P_COM_PENSION }} %</span>
                                                </td>
                                                <td class="col-sm"
                                                    *ngIf="listaTasasPension?.length > 0 && template.ins_comPensionPro">
                                                    <input *ngIf="broker.P_COM_PENSION != 0"
                                                           type="text"
                                                           class="text-center input-acc"
                                                           maxlength="5"
                                                           [disabled]="stateBrokerTasaPension"
                                                           placeholder="0"
                                                           [(ngModel)]="broker.P_COM_PENSION_PRO"
                                                           [ngClass]="{ 'error-validate': broker.valItemPen }"
                                                           (ngModelChange)="comisionPropuesta(broker.P_COM_PENSION_PRO,row,1)"
                                                           (keypress)="onKey($event, 'porcentaje');"
                                                           (keydown)="onKeydown($event);"
                                                           (paste)="onPaste($event, 'porcentaje')" />
                                                        <span class="porcentaje">%</span>

                                                    <input *ngIf="broker.P_COM_PENSION == 0"
                                                           type="text"
                                                           class="text-center input-acc"
                                                           placeholder="0"
                                                           disabled />
                                                        <span class="porcentaje">%</span>

                                                </td>
                                                <td class=""
                                                    *ngIf="!variable.var_isBroker ||(typeTran != 'Exclusión' && !variable.var_isBroker)">
                                                    <span style="padding: 0 12px"
                                                          *ngIf="broker.BLOCK != 1"><img src="assets/icons/anular.png"
                                                             (click)="deleteBroker(row)"
                                                             title="Eliminar"
                                                             alt="Eliminar" />
                                                    </span>
                                                    <span style="padding: 0 12px"
                                                          *ngIf="broker.BLOCK == 1">
                                                        ------
                                                    </span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="collapse-list">
            <div>
                <input class="collapse-open"
                       type="checkbox"
                       id="cotizacion" />
                <label class="collapse-btn title"
                       for="cotizacion">
                    {{ variable.var_seccionDatos }}
                    <i class="fa fa-angle-down pull-right"
                       style="position: relative; top: 4px">
                    </i>
                </label>
                <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                        <ng-container *ngIf="codProducto == 2">
                            <div class="row">
                                <div class="col-sm-3">
                                    <span>PRODUCTOS (*)</span>
                                    <select (change)="onSelectProducto($any($event.target).value)"
                                            [(ngModel)]="inputsQuotation.P_NPRODUCT"
                                            (click)="clearValidate(11)"
                                            [ngClass]="{ 'error-validate': inputsValidate[11] }"
                                            class="minimal">
                                        <option disabled
                                                value="-1">SELECCIONE
                                        </option>
                                        <option value="0"
                                                *ngIf="productList.length > 1 || perfilActual == '305' || perfilActual == '304'">
                                            Ambos productos
                                        </option>
                                        <ng-container *ngFor="let product of productList">
                                            <option value="{{ product.COD_PRODUCT }}">
                                                {{ product.DES_PRODUCT }}
                                            </option>
                                        </ng-container>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_tipRenovacion">
                                    <span>TIPO RENOVACIÓN (*)</span>
                                    <select [(ngModel)]="inputsQuotation.tipoRenovacion"
                                            name="tipoRenovacion"
                                            (ngModelChange)="habilitarFechas()"
                                            class="minimal"
                                            (click)="clearValidate(17)"
                                            [ngClass]="{ 'error-validate': inputsValidate[17] }">
                                        <option disabled
                                                value="">
                                            Seleccione
                                        </option>
                                        <option *ngFor="let renovacion of tipoRenovacion"
                                                [value]="renovacion.COD_TIPO_RENOVACION">
                                            {{ renovacion.DES_TIPO_RENOVACION }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_iniVigencia">
                                    <span>INICIO VIGENCIA (*)</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           (ngModelChange)="validarTipoRenovacion($event)"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(bsValue)]="inputsQuotation.FDateIni"
                                           [(ngModel)]="inputsQuotation.FDateIni"
                                           [(minDate)]="inputsQuotation.FDateIniMin"
                                           [(maxDate)]="inputsQuotation.FDateIniFin"
                                           #desde
                                           readonly />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_finVigencia">
                                    <span>FIN VIGENCIA</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(ngModel)]="inputsQuotation.FDateFin"
                                           [(bsValue)]="inputsQuotation.FDateFin"
                                           [(minDate)]="bsValueFinMin"
                                           [disabled]="!tipoEspecial"
                                           value="{{ inputsQuotation.FDateFin | date: 'dd/MM/yyyy' }}"
                                           #hasta
                                           readonly />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_frecPago">
                                    <span>FRECUENCIA PAGO</span>
                                    <select [(ngModel)]="inputsQuotation.frecuenciaPago"
                                            name="frecuenciaPago"
                                            class="minimal"
                                            (click)="clearValidate(18)"
                                            (ngModelChange)="ValidarFrecPago()"
                                            [ngClass]="{ 'error-validate': inputsValidate[18] }"
                                            [disabled]="template.ins_disabledFrecPago">
                                        <option value="">SELECCIONE</option>
                                        <option *ngFor="let frecuencia of frecuenciaPago"
                                                [value]="frecuencia.COD_TIPO_FRECUENCIA">
                                            {{ frecuencia.DES_TIPO_FRECUENCIA }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3">
                                    <span>MONEDA</span>
                                    <select [(ngModel)]="inputsQuotation.P_NCURRENCY"
                                            [disabled]="true"
                                            class="minimal">
                                        <option *ngFor="let currency of currencyList"
                                                value="{{ currency.NCODIGINT }}">
                                            {{ currency.SDESCRIPT }}
                                        </option>
                                    </select>
                                </div>
                                <!--Ini RQ2025-4-->
                                <div class="col-sm-3"
                                     *ngIf="template.ins_sede">
                                    <span class="mb-1">SEDE</span>
                                    <ng-select [(ngModel)]="inputsQuotation.P_NIDSEDE"
                                               (ngModelChange)="onSelectSede()"
                                               [clearable]="true"
                                               (click)="clearValidate(2)"
                                               (open)="renderDropDown()"
                                               [ngClass]="{ 'error-validate': inputsValidate[2] }"
                                               class="border-ng combo-sede"
                                               [disabled]="stateQuotation"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados"
                                               style="margin-top: 0px !important">
                                        <ng-option [value]="0">AGREGAR SEDE</ng-option>
                                        <ng-option *ngFor="let sede of sedesList"
                                                   [value]="sede.Id">{{ sede.Description }}
                                        </ng-option>
                                    </ng-select>
                                </div>
                                <!--Fin RQ2025-4-->
                                <div class="col-sm-3"  *ngIf="template.ins_mina">
                                    <span>&nbsp;</span>
                                    <!--AVS - INTERCONEXION SABSA-->
                                    <label [hidden]="flagDelimiter"
                                           style="width: 100%; margin-bottom: 0">
                                        <span class="spn-delimiter">{{ inputsQuotation.P_DELIMITER }}</span>
                                    </label>
                                    <!-- <label style="width: 100%; margin-bottom: 0" *ngIf="epsItem.NCODE == 3 && this.valMixSAPSA == 1"> -->
                                    <label style="width: 100%; margin-bottom: 0" *ngIf="epsItem.NCODE == 3 && (this.valMixSAPSA || this.valMixSAPSA == 0)">
                                    <input type="checkbox"
                                               [(ngModel)]="inputsQuotation.P_MINA"
                                               [disabled]="flagMina"
                                               class="checkbox" /><span class="schk chk-mina">¿Trabajos en
                                            mina?</span></label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6"
                                     *ngIf="template.ins_actRealizar">
                                    <span class="mb-1">ACTIVIDAD A REALIZAR (*)</span>
                                    <!--Se ah retirado validacion de ng-select [disabled]="!stateQuotation" AVS PRY SAPSA-->
                                    <ng-select [items]="technicalList"
                                               (change)="onSelectTechnicalActivity($event)"
                                               bindLabel="Name"
                                               [ngClass]="{ 'error-validate': inputsValidate[12] }"
                                               bindValue="Id"
                                               [(ngModel)]="inputsQuotation.P_NTECHNICAL"
                                               class="border-ng"
                                               (click)="clearValidate(12)"
                                               [clearable]="true"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados"
                                               title="{{ activityMain }}">
                                        <ng-template ng-option-tmp
                                                     let-item="item">
                                            <div title="{{ item.Name }}">{{ item.Name }}</div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-sm-6"
                                     *ngIf="template.ins_subActividad">
                                    <span class="mb-1">SUB-ACTIVIDADES (*)</span>
                                    <!--Se ah retirado validacion de ng-select [disabled]="!stateQuotation" AVS PRY SAPSA-->
                                    <ng-select [items]="economicActivityList"
                                               (change)="onSelectEconomicActivity($event)"
                                               bindLabel="Name"
                                               [ngClass]="{ 'error-validate': inputsValidate[3] }"
                                               bindValue="Id"
                                               [(ngModel)]="inputsQuotation.P_NECONOMIC"
                                               class="border-ng"
                                               (click)="clearValidate(3)"
                                               [clearable]="true"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados"
                                               title="{{ subActivity }}">
                                        <ng-template ng-option-tmp
                                                     let-item="item">
                                            <div title="{{ item.Name }}">{{ item.Name }}</div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_tipoCuenta">
                                    <span>TIPO DE CUENTA</span>
                                    <select [(ngModel)]="inputsQuotation.P_SISCLIENT_GBD"
                                            [disabled]="true"
                                            class="minimal">
                                        <option value="2">PRIVADO</option>
                                        <option value="1">GOBIERNO</option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_departamento">
                                    <span class="mb-1">DEPARTAMENTO (*)</span>
                                    <ng-select [items]="departmentList"
                                               (change)="onSelectDepartment()"
                                               bindLabel="Name"
                                               bindValue="Id"
                                               [ngClass]="{ 'error-validate': inputsValidate[4] }"
                                               (click)="clearValidate(4)"
                                               class="border-ng"
                                               [(ngModel)]="inputsQuotation.P_NPROVINCE"
                                               [clearable]="true"
                                               [disabled]="!stateQuotation"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados">
                                    </ng-select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_provincia">
                                    <span class="mb-1">PROVINCIA (*)</span>
                                    <ng-select [items]="provinceList"
                                               (change)="onSelectProvince()"
                                               bindLabel="Name"
                                               bindValue="Id"
                                               [ngClass]="{ 'error-validate': inputsValidate[5] }"
                                               (click)="clearValidate(5)"
                                               class="border-ng"
                                               [(ngModel)]="inputsQuotation.P_NLOCAL"
                                               [clearable]="true"
                                               [disabled]="!stateQuotation"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados">
                                    </ng-select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_distrito">
                                    <span class="mb-1">DISTRITO (*)</span>
                                    <ng-select [items]="districtList"
                                               (change)="onSelectDistrict()"
                                               bindLabel="Name"
                                               bindValue="Id"
                                               [ngClass]="{ 'error-validate': inputsValidate[6] }"
                                               (click)="clearValidate(6)"
                                               class="border-ng"
                                               [(ngModel)]="inputsQuotation.P_NMUNICIPALITY"
                                               [clearable]="true"
                                               [disabled]="!stateQuotation"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados">
                                    </ng-select>
                                </div>
                                <div class="col-sm-3">
                                    <span class="mb-1">TIPO DE TASA</span>
                                    <ng-select [items]="rateTypeList"
                                               (change)="onSelectRateType()"
                                               bindLabel="sdescription_rate"
                                               bindValue="ncode_rate"
                                               class="border-ng"
                                               [(ngModel)]="inputsQuotation.P_NRATETYPE"
                                               [clearable]="true"
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados">
                                    </ng-select>
                                </div>
                            </div>
                        </ng-container>
                        <!-- <ng-container *ngIf="codProducto == 3">
                            <div class="row">
                                <div class="col-sm-3">
                                    <span>PRODUCTOS (*)</span>
                                    <select (change)="onSelectProducto($any($event.target).value)"
                                            [(ngModel)]="inputsQuotation.P_NPRODUCT"
                                            [disabled]="typeTran === 'Renovación' ||
                                                        typeTran === 'Declaración' ||
                                                        typeTran === 'Inclusión' ||
                                                        typeTran === 'Exclusión' ||
                                                        typeTran === 'Endoso'"
                                            (click)="clearValidate(11)"
                                            [ngClass]="{ 'error-validate': inputsValidate[11] }"
                                            class="minimal">
                                        <option disabled
                                                value="-1">SELECCIONE</option>
                                        <option value="0"
                                                *ngIf="productList.length > 1 || perfilActual == '305' || perfilActual == '304'">
                                            Ambos productos
                                        </option>
                                        <option *ngFor="let product of productList"
                                                value="{{ product.COD_PRODUCT }}">
                                            {{ product.DES_PRODUCT }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_tipRenovacion">
                                    <span>TIPO RENOVACIÓN (*)</span>
                                    <select [(ngModel)]="inputsQuotation.tipoRenovacion"
                                            name="tipoRenovacion"
                                            [disabled]="
                      typeTran === 'Declaración' ||
                      typeTran === 'Inclusión' ||
                      typeTran === 'Exclusión' ||
                      typeTran === 'Endoso'
                    "
                                            (ngModelChange)="habilitarFechas()"
                                            class="minimal"
                                            (click)="clearValidate(17)"
                                            [ngClass]="{ 'error-validate': inputsValidate[17] }">
                                        <option disabled
                                                value="">Seleccione</option>
                                        <option *ngFor="let renovacion of tipoRenovacion"
                                                [value]="renovacion.COD_TIPO_RENOVACION">
                                            {{ renovacion.DES_TIPO_RENOVACION }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_iniVigencia">
                                    <span>INICIO VIGENCIA DE PÓLIZA (*)</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           (ngModelChange)="validarTipoRenovacion($event)"
                                           [disabled]="
                      typeTran === 'Renovación' ||
                      typeTran === 'Declaración' ||
                      typeTran === 'Inclusión' ||
                      typeTran === 'Exclusión' ||
                      typeTran === 'Endoso'
                    "
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(bsValue)]="inputsQuotation.FDateIni"
                                           [(ngModel)]="inputsQuotation.FDateIni"
                                           [(minDate)]="inputsQuotation.FDateIniMin"
                                           [(maxDate)]="inputsQuotation.FDateIniFin"
                                           #desde
                                           readonly />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_finVigencia">
                                    <span>FIN VIGENCIA DE PÓLIZA</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(ngModel)]="inputsQuotation.FDateFin"
                                           [(bsValue)]="inputsQuotation.FDateFin"
                                           [(minDate)]="bsValueFinMin"
                                           [disabled]="
                      !tipoEspecial ||
                      typeTran === 'Renovación' ||
                      typeTran === 'Declaración'
                    "
                                           value="{{ inputsQuotation.FDateFin | date: 'dd/MM/yyyy' }}"
                                           #hasta
                                           readonly />
                                </div>
                                <div class="col-sm-3">
                                    <span>MONEDA</span>
                                    <select [(ngModel)]="inputsQuotation.P_NCURRENCY"
                                            [disabled]="true"
                                            class="minimal">
                                        <option *ngFor="let currency of currencyList"
                                                value="{{ currency.NCODIGINT }}">
                                            {{ currency.SDESCRIPT }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_frecPago">
                                    <span>FRECUENCIA PAGO</span>
                                    <select [(ngModel)]="inputsQuotation.frecuenciaPago"
                                            name="frecuenciaPago"
                                            class="minimal"
                                            [disabled]="
                      typeTran === 'Declaración' ||
                      typeTran === 'Inclusión' ||
                      typeTran === 'Exclusión' ||
                      typeTran === 'Endoso'
                    "
                                            (click)="clearValidate(18)"
                                            (ngModelChange)="ValidarFrecPago()"
                                            [ngClass]="{ 'error-validate': inputsValidate[18] }">
                                        <option value="">SELECCIONE</option>
                                        <option *ngFor="let frecuencia of frecuenciaPago"
                                                [value]="frecuencia.COD_TIPO_FRECUENCIA">
                                            {{ frecuencia.DES_TIPO_FRECUENCIA }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_iniVigenciaAseg">
                                    <span>INICIO VIGENCIA DE ASEGURADOS</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           (ngModelChange)="validarExcelAseg()"
                                           [(bsValue)]="inputsQuotation.FDateIniAseg"
                                           [(ngModel)]="inputsQuotation.FDateIniAseg"
                                           [(minDate)]="inputsQuotation.FDateIniMin"
                                           [(maxDate)]="inputsQuotation.FDateIniFin"
                                           [disabled]="
                      typeTran === 'Renovación' ||
                      (typeTran != 'Inclusión' && typeTran != 'Endoso')
                    "
                                           #desde
                                           readonly />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_finVigenciaAseg">
                                    <span>FIN VIGENCIA DE ASEGURADOS</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(ngModel)]="inputsQuotation.FDateFinAseg"
                                           [(bsValue)]="inputsQuotation.FDateFinAseg"
                                           [(minDate)]="bsValueFinMin"
                                           [disabled]="true"
                                           value="{{
                      inputsQuotation.FDateFinAseg | date: 'dd/MM/yyyy'
                    }}"
                                           #hasta
                                           readonly />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_tipoCuenta">
                                    <span>TIPO DE CUENTA</span>
                                    <select [(ngModel)]="inputsQuotation.P_SISCLIENT_GBD"
                                            [disabled]="true"
                                            class="minimal">
                                        <option value="2">PRIVADO</option>
                                        <option value="1">GOBIERNO</option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_actRealizar">
                                    <span class="mb-1">ACTIVIDAD ECONÓMICA (*)</span>
                                    <ng-select [items]="technicalList"
                                               (change)="onSelectTechnicalActivity($event)"
                                               bindLabel="Name"
                                               [ngClass]="{ 'error-validate': inputsValidate[12] }"
                                               bindValue="Id"
                                               [(ngModel)]="inputsQuotation.P_NTECHNICAL"
                                               class="border-ng"
                                               (click)="clearValidate(12)"
                                               [clearable]="true"
                                               [disabled]="
                      !stateQuotation ||
                      typeTran === 'Renovación' ||
                      typeTran === 'Declaración' ||
                      typeTran === 'Inclusión' ||
                      typeTran === 'Exclusión' ||
                      typeTran === 'Endoso'
                    "
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados"
                                               title="{{ activityMain }}">
                                        <ng-template ng-option-tmp
                                                     let-item="item">
                                            <div title="{{ item.Name }}">{{ item.Name }}</div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_subActividad">
                                    <span class="mb-1">CIIU (*)</span>
                                    <ng-select [items]="economicActivityList"
                                               (change)="onSelectEconomicActivity($event)"
                                               bindLabel="Name"
                                               [ngClass]="{ 'error-validate': inputsValidate[3] }"
                                               bindValue="Id"
                                               [(ngModel)]="inputsQuotation.P_NECONOMIC"
                                               class="border-ng"
                                               (click)="clearValidate(3)"
                                               [clearable]="true"
                                               [disabled]="
                      !stateQuotation ||
                      typeTran === 'Renovación' ||
                      typeTran === 'Declaración' ||
                      typeTran === 'Inclusión' ||
                      typeTran === 'Exclusión' ||
                      typeTran === 'Endoso'
                    "
                                               placeholder="Seleccionar"
                                               dropdownPosition="bottom"
                                               notFoundText="No hay resultados"
                                               title="{{ subActivity }}">
                                        <ng-template ng-option-tmp
                                                     let-item="item">
                                            <div title="{{ item.Name }}">{{ item.Name }}</div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="typeTran === 'Endoso'">
                                    <span>TIPO DE ENDOSO</span>
                                    <select [(ngModel)]="inputsQuotation.P_NTYPE_END"
                                            name="TYPE_ENDOSO"
                                            title="TIPO DE ENDOSO"
                                            class="minimal">
                                        <option value="">SELECCIONE</option>
                                        <option *ngFor="let endoso of tipoEndoso"
                                                [value]="endoso.TYPE_ENDOSO">
                                            {{ endoso.DES_TYPE_ENDOSO }}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="typeTran === 'Exclusión' && codProducto == 3">
                                    <span>FECHA DE EXCLUSIÓN</span>
                                    <input type="text"
                                           #dp="bsDatepicker"
                                           (ngModelChange)="validarExcelExclu()"
                                           [bsConfig]="bsConfig"
                                           bsDatepicker
                                           [(bsValue)]="inputsQuotation.FechaAnulacion"
                                           [(ngModel)]="inputsQuotation.FechaAnulacion"
                                           [(minDate)]="inputsQuotation.FDateIniAseg"
                                           [(maxDate)]="inputsQuotation.FDateFinAseg"
                                           value="{{
                      inputsQuotation.FechaAnulacion | date: 'dd/MM/yyyy'
                    }}"
                                           [disabled]="false"
                                           readonly
                                           #anulacion />
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="template.ins_mina">
                                    <span>&nbsp;</span>
                                    <label style="width: 100%; margin-bottom: 0"
                                           [hidden]="codProducto == 3"><span class="spn-delimiter">{{
                                            inputsQuotation.P_DELIMITER
                                            }}</span></label>
                                    <label style="width: 100%; margin-bottom: 0"><input type="checkbox"
                                               [disabled]="
                        typeTran === 'Declaración' ||
                        typeTran === 'Inclusión' ||
                        typeTran === 'Endoso'
                      "
                                               [(ngModel)]="inputsQuotation.P_MINA"
                                               class="checkbox" /><span class="schk chk-mina">¿Trabajos en
                                            mina?</span></label>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="perfilActual == 7 && flagGobiernoEstado == true">
                                    <span>&nbsp;</span>
                                    <small>&nbsp;</small>
                                    <label style="width: 100%; margin-bottom: 0">
                                        <input type="checkbox"
                                               [disabled]="
                        typeTran === 'Declaración' ||
                        typeTran === 'Inclusión' ||
                        typeTran === 'Endoso' ||
                        typeTran === 'Exclusión'
                      "
                                               [(ngModel)]="inputsQuotation.P_NPOLICY_MAT"
                                               (change)="polizaMatriz($event)"
                                               class="checkbox" />
                                        <span class="schk chk-mina">¿Póliza Matriz?</span>
                                    </label>
                                </div>
                                <div class="col-sm-3"
                                     *ngIf="perfil != perfilActual">
                                    <span>&nbsp;</span>
                                    <small>&nbsp;</small>
                                    <label style="width: 100%; margin-bottom: 0">
                                        <input type="checkbox"
                                               [disabled]="!flagExc"
                                               [(ngModel)]="inputsQuotation.P_NREM_EXC"
                                               (change)="validarExcel(null, 1)"
                                               class="checkbox" />
                                        <span class="schk chk-mina">¿Sin tope de ley?</span>
                                    </label>
                                </div>
                                <div class="col-sm-3">
                                    <div class="col"
                                         *ngIf="flagGobiernoEstado">
                                        <span>
                                            * SI REQUIERE ENVIAR EL TRÁMITE AL EJECUTIVO COMERCIAL,
                                            FAVOR DE ACTIVAR EL INDICADOR</span>
                                        <label style="width: 100%; margin-bottom: 0">
                                            <input type="checkbox"
                                                   [(ngModel)]="inputsQuotation.P_APROB_CLI"
                                                   (change)="aprobacionCliente($event)"
                                                   class="checkbox" />
                                            <span class="schk chk-mina">APROBACIÓN EJECUTIVO COMERCIAL</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </ng-container> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="collapse-list"
             *ngIf="codProducto == '3' && flagGobiernoEstado == true">
            <div>
                <input class="collapse-open"
                       type="checkbox"
                       id="planilla" />
                <label class="collapse-btn title"
                       for="planilla">Datos de correo de ejecutivo comercial<i class="fa fa-angle-down pull-right"
                       style="position: relative; top: 4px"></i></label>
                <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                        <div class="row">
                            <div class="col-md-4">
                                <span>Correo electrónico (*)</span>
                                <input type="text"
                                       [(ngModel)]="inputsQuotation.SMAIL_EJECCOM"
                                       [disabled]="!flagAprobCli"
                                       placeholder="Correo electrónico" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <span>EL CORREO INGRESADO EN ESTA SECCIÓN, SE CONSIDERARÁ PARA EL
                                    ENVÍO DEL TRAMITE A EVALUAR PARA LAS TRANSACCIONES.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->

        <!-- <div class="collapse-list"
             *ngIf="template.ins_trama">
            <div [hidden]="flagGobiernoEstado == true">
                <input class="collapse-open"
                       type="checkbox"
                       id="planilla" />
                <label class="collapse-btn title"
                       for="planilla">Datos de Trama 5
                    <i class="fa fa-angle-down pull-right"
                       style="position: relative; top: 4px"></i></label>
                <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                        <div class="row">
                            <div class="col-sm-3"
                                 *ngIf="template.ins_comision">
                                <label class="mb-0"><span>TARIFA (*)</span></label>
                                <select (change)="onSelectComision($any($event.target).value)"
                                        [(ngModel)]="inputsQuotation.P_COMISION"
                                        (click)="clearValidate(16)"
                                        [ngClass]="{ 'error-validate': inputsValidate[16] }"
                                        class="minimal"
                                        [disabled]="
                    canTasaVL ||
                    typeTran == 'Declaración' ||
                    typeTran === 'Inclusión' ||
                    typeTran === 'Endoso'
                  ">
                                    <option value="">SELECCIONE</option>
                                    <option *ngFor="let comision of comisionList"
                                            value="{{ comision.idComision }}">
                                        {{ comision.nroComision }} %
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="template.ins_trama && flagPolizaMat == false"
                                 [ngClass]="template.ins_comision ? 'col-sm-6' : 'col-sm-9'">
                                <span>TRAMA (*)</span>
                                <input [ngClass]="{ 'error-validate': errorExcel }"
                                       type="file"
                                       class="mt-10"
                                       onclick="this.value=null;"
                                       (change)="seleccionExcel($event.target.files[0])"
                                       [(ngModel)]="archivoExcel"
                                       accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                       style="
                    position: relative;
                    top: 8px;
                    margin: 5px 0px;
                    font-size: 16px !important;
                    width: 100%;
                  "
                                       (filesChange)="lastFileAt = getDate()" />
                            </div>
                            <div *ngIf="template.ins_trama && flagPolizaMat == false"
                                 class="col-sm-3">
                                <span>&nbsp;</span>
                                <button type="button"
                                        style="display: inline-block"
                                        (click)="validarExcel(null)">
                                    <span>Validar</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!--Validador de trama cliente Estado VL-->
        <!-- <div class="collapse-list"
             *ngIf="template.ins_trama && flagPolizaMat == false">
            <div *ngIf="flagGobiernoEstado == true">
                <input class="collapse-open"
                       type="checkbox"
                       id="planilla" />
                <label class="collapse-btn title"
                       for="planilla">Datos de Trama 4
                    <i class="fa fa-angle-down pull-right"
                       style="position: relative; top: 4px"></i></label>
                <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                        <div class="row">
                            <div class="col-sm-3"
                                 *ngIf="template.ins_comision">
                                <label class="mb-0"><span>TARIFA (*)</span></label>
                                <select (change)="onSelectComision($any($event.target).value)"
                                        [(ngModel)]="inputsQuotation.P_COMISION"
                                        (click)="clearValidate(16)"
                                        [ngClass]="{ 'error-validate': inputsValidate[16] }"
                                        class="minimal"
                                        [disabled]="
                    canTasaVL ||
                    typeTran == 'Declaración' ||
                    typeTran === 'Inclusión'
                  ">
                                    <option value="">SELECCIONE</option>
                                    <option *ngFor="let comision of comisionList"
                                            value="{{ comision.idComision }}">
                                        {{ comision.nroComision }} %
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="collapse-list">
            <div>
                <input class="collapse-open"
                       type="checkbox"
                       id="calculadora" />
                <label class="collapse-btn title"
                       for="calculadora">
                    Cotizador
                    <i class="fa fa-angle-down pull-right"
                       style="position: relative; top: 4px"></i>
                </label>
                <div class="collapse-panel">
                    <div class="collapse-inner collapse-border">
                        <div class="row"
                             *ngIf="flagGobiernoEstado == false">
                            <div [ngClass]="template.ins_tasasWith ? 'col-sm-9' : 'col-sm-6'">
                                <table class="table table-borderless riesgo"
                                       *ngIf="template.ins_mostrarTasas || template.ins_categoriaList">
                                    <thead>
                                        <tr class="d-flex"
                                            style="border-bottom: 1px solid #ddd">
                                            <th class="col-sm">
                                                <label style="font-weight: 100">
                                                    {{variable.var_tblTasasTitutoCol1}}
                                                </label>
                                            </th>
                                            <th class="col-sm text-center">
                                                <label style="font-weight: 100">
                                                    {{variable.var_tblTasasTitutoCol2}}
                                                </label>
                                            </th>
                                            <th class="col-sm text-center">
                                                <label style="font-weight: 100">
                                                    {{variable.var_tblTasasTitutoCol3Cot}}
                                                </label>
                                            </th>
                                            <th *ngIf="template.ins_categoriaList && typeTran != 'Endoso'"
                                                class="col-sm text-center">
                                                <label style="font-weight: 100">
                                                    {{variable.var_tblTasasTitutoCol4}}
                                                </label>
                                            </th>
                                            <th *ngIf="template.ins_categoriaList && typeTran != 'Endoso'"
                                                class="col-sm text-center">
                                                <label style="font-weight: 100">
                                                    Tasa Propuesta %
                                                </label>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="template.ins_categoriaList">
                                        <tr class="d-flex"
                                            *ngIf="categoryList.length == 0">
                                            <td class="col-sm text-center">No hay tasas</td>
                                        </tr>
                                        <tr class="d-flex"
                                            *ngFor="let item of categoryList; let i = index">
                                            <td class="col-sm"
                                                *ngIf="item.sactive == true">
                                                <span>{{ item.SCATEGORIA }}</span>
                                            </td>
                                            <td class="col-sm text-center"
                                                *ngIf="item.sactive == true">
                                                <span>{{ item.NCOUNT }}</span>
                                            </td>
                                            <td class="col-sm text-center"
                                                *ngIf="item.sactive == true">
                                                <span>{{item.NTOTAL_PLANILLA | prettyNumber: 2}}</span>
                                            </td>
                                            <td class="col-sm text-center"
                                                *ngIf="item.sactive == true && typeTran != 'Endoso'">
                                                <span>{{ item.NTASA | prettyNumber: 6 }} %</span>
                                            </td>
                                            <td class="col-sm text-center"
                                                *ngIf="item.sactive == true && typeTran != 'Exclusión' && typeTran != 'Endoso'">
                                                <input style="width: 70% !important; height: 120% !important"
                                                       type="text"
                                                       class="text-right"
                                                       [checked]="false"
                                                       placeholder="0"
                                                       FloatSixDirective
                                                       maxlength="12"
                                                       [(ngModel)]="item.ProposalRate"
                                                       (blur)="changeRateProposed()"
                                                       (keyup.enter)="changeRateProposed()"
                                                       [disabled]="disTasaProp" />
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tbody *ngIf="template.ins_tasasList">
                                        <tr class="d-flex"
                                            *ngIf="tasasList.length == 0">
                                            <td class="col-sm-12 text-center"
                                                style="padding: 0.5rem !important">
                                                <label>No hay tasas</label>
                                            </td>
                                        </tr>
                                        <tr class="d-flex"
                                            *ngFor="let tasa of tasasList; let row = index">
                                            <td *ngIf="tasa.status == 1"
                                                class="col-sm"
                                                style="padding: 0.5rem !important">
                                                <span>{{ tasa.description }}</span>
                                            </td>
                                            <td *ngIf="tasa.status == 1"
                                                class="col-sm text-center"
                                                style="padding: 0.5rem !important">
                                                <input type="text"
                                                       placeholder="0"
                                                       [(ngModel)]="tasa.totalWorkes"
                                                       maxlength="9"
                                                       (ngModelChange)="volverCotizar(tasa.totalWorkes, tasa.id, row, 1)"
                                                       (keypress)="onKey($event, 'number');"
                                                       (keydown)="onKeydown($event);"
                                                       [disabled]="disabledFlat[row].value" />
                                            </td>
                                            <td *ngIf="tasa.status == 1"
                                                class="col-sm"
                                                style="padding: 0.5rem !important">
                                                <input type="text"
                                                       placeholder="0"
                                                       [(ngModel)]="tasa.planilla"
                                                       maxlength="11"
                                                       (ngModelChange)="volverCotizar(tasa.planilla, tasa.id, row, 2)"
                                                       (keypress)="onKey($event, 'decimal');"
                                                       (keydown)="onKeydown($event);"
                                                       [disabled]="disabledFlat[row].value" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-sm-6"
                                 style="padding: 10px 0 15px"
                                 *ngIf="template.ins_calcTasas">
                                <button *ngIf="tasasList.length > 0"
                                        type="button"
                                        style="display: inline-block; position: absolute; bottom: 24px;"
                                        (click)="calcularTarifa()">
                                    <span>Calcular</span>
                                </button>
                            </div>
                            <div class="col-sm-3"
                                 *ngIf="template.ins_tasasPlanList">
                                <table class="table table-borderless riesgo"
                                       [hidden]="rateByPlanList?.length == 0">
                                    <thead>
                                        <tr class="d-flex"
                                            style="border-bottom: 1px solid #ddd">
                                            <th class="col-sm-12 text-center">
                                                <label style="font-weight: 100">Flat</label>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="d-flex"
                                            *ngIf="rateByPlanList.length == 0">
                                            <td class="col-sm text-center">No hay tasas</td>
                                        </tr>
                                        <tr class="d-flex"
                                            *ngFor="let item of rateByPlanList; let i = index">
                                            <td class="col-sm text-center"
                                                *ngIf="item.sactive == true">
                                                <span>{{ item.NTASA }} %</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div [hidden]="rateByPlanList.length == 0">
                                    <button [hidden]="btnCotiza"
                                            class="btnCotiza-VL"
                                            (click)="this.validarExcel(99)">
                                        Cotizar Flat
                                    </button>
                                    <button [hidden]="btnNormal"
                                            class="btnCotiza-VL"
                                            (click)="this.validarExcel(100)">
                                        Cotizar Normal
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div *ngIf="typeGobiernoMatriz == true">
                                    <table class="table table-borderless riesgo">
                                        <thead>
                                            <tr class="d-flex"
                                                style="border-bottom: 1px solid #ddd">
                                                <th class="col-sm">
                                                    <label style="font-weight: 100">Cátegoria</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label style="font-weight: 100">Total Trabajadores</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label style="font-weight: 100">Monto Planilla</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label style="font-weight: 100">Tasa</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label style="font-weight: 100">Monto por cobrar sin IGV</label>
                                                </th>
                                                <th class="col-sm text-center">
                                                    <label style="font-weight: 100">Monto por Frecuencia sin IGV</label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="d-flex">
                                                <td class="col-sm">
                                                    <span>EMPLEADO</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputEMP" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputEMP"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(1)"
                                                           (keyup.enter)="changeMontoSinIGV(1)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEMP)"
                                                           [(ngModel)]="tasainputEMP"
                                                           (blur)="changeMontoSinIGV(1)"
                                                           (keyup.enter)="changeMontoSinIGV(1)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVEMP"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVEMP"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex">
                                                <td class="col-sm">
                                                    <span>OBRERO</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputOBR" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputOBR"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(2)"
                                                           (keyup.enter)="changeMontoSinIGV(2)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOBR)"
                                                           [(ngModel)]="tasainputOBR"
                                                           (blur)="changeMontoSinIGV(2)"
                                                           (keyup.enter)="changeMontoSinIGV(2)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVOBR"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVOBR"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex">
                                                <td class="col-sm">
                                                    <span>OBRERO ALTO RIESGO</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputOAR" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important; height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputOAR"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(3)"
                                                           (keyup.enter)="changeMontoSinIGV(3)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputOAR)"
                                                           [(ngModel)]="tasainputOAR"
                                                           (blur)="changeMontoSinIGV(3)"
                                                           (keyup.enter)="changeMontoSinIGV(3)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVOAR"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVOAR"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex"
                                                *ngIf="flagActivateExc == 1">
                                                <td class="col-sm">
                                                    <span>EMPLEADO EXCEDENTE</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputEE" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputEE"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(4)"
                                                           (keyup.enter)="changeMontoSinIGV(4)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6',tasainputEE)"
                                                           [(ngModel)]="tasainputEE"
                                                           (blur)="changeMontoSinIGV(4)"
                                                           (keyup.enter)="changeMontoSinIGV(4)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVEE"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVEE"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex"
                                                *ngIf="flagActivateExc == 1">
                                                <td class="col-sm">
                                                    <span>OBRERO EXCEDENTE</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputOE" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputOE"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(5)"
                                                           (keyup.enter)="changeMontoSinIGV(5)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6', tasainputOE)"
                                                           [(ngModel)]="tasainputOE"
                                                           (blur)="changeMontoSinIGV(5)"
                                                           (keyup.enter)="changeMontoSinIGV(5)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVOE"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important; height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVOE"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex"
                                                *ngIf="flagActivateExc == 1">
                                                <td class="col-sm">
                                                    <span>OBRERO ALTO RIESGO EXCEDENTE </span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           OnlyNumberDirective
                                                           maxlength="20"
                                                           [(ngModel)]="countinputOARE" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="planillainputOARE"
                                                           decimal="1.0-6"
                                                           (blur)="changeMontoSinIGV(6)"
                                                           (keyup.enter)="changeMontoSinIGV(6)" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="10"
                                                           (keypress)="validarDecimalPorcentage('1,2','0,6', tasainputOARE)"
                                                           [(ngModel)]="tasainputOARE"
                                                           (blur)="changeMontoSinIGV(6)"
                                                           (keyup.enter)="changeMontoSinIGV(6)" />
                                                    &nbsp; %
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important; height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           [(ngModel)]="MontoSinIGVOARE"
                                                           decimal="1.0-6"
                                                           (blur)="changeFPMontoSinIGV()"
                                                           (keyup.enter)="changeFPMontoSinIGV()" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="20"
                                                           [(ngModel)]="MontoFPSinIGVOARE"
                                                           disabled />
                                                </td>
                                            </tr>
                                            <tr class="d-flex">
                                                <td class="col-sm"></td>
                                                <td class="col-sm text-center"></td>
                                                <td class="col-sm text-center"></td>
                                                <td class="col-sm text-center">
                                                    <span>TOTAL SIN IGV</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           disabled
                                                           [(ngModel)]="TotalSinIGV" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           disabled
                                                           [(ngModel)]="TotalFPSinIGV" />
                                                </td>
                                            </tr>
                                            <tr class="d-flex">
                                                <td class="col-sm"></td>
                                                <td class="col-sm text-center"></td>
                                                <td class="col-sm text-center"></td>
                                                <td class="col-sm text-center">
                                                    <span>TOTAL CON IGV</span>
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           disabled
                                                           [(ngModel)]="TotalConIGV" />
                                                </td>
                                                <td class="col-sm text-center">
                                                    <input style="width: 70% !important;height: 120% !important;"
                                                           type="text"
                                                           class="text-right"
                                                           [checked]="false"
                                                           placeholder="0"
                                                           FloatSixDirective
                                                           maxlength="21"
                                                           disabled
                                                           [(ngModel)]="TotalFPConIGV" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12"
                                 *ngIf="messageWorker != ''">
                                <p class="msg-error">{{ messageWorker }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6"
                                 *ngIf="listaTasasSalud?.length > 0 && template.ins_saludList">
                                <div class="row">
                                    <div class="col-sm-6"
                                         *ngIf="template.ins_primaSaludMin">
                                        <label class="mb-0"><span>{{ variable.var_primaMinimaSalud }}</span></label>
                                        <input type="text"
                                               placeholder="0"
                                               disabled
                                               [(ngModel)]="inputsQuotation.P_PRIMA_MIN_SALUD" />
                                    </div>
                                    <div class="col-sm-6"
                                         *ngIf="template.ins_primaSaludMinPro">
                                        <label class="mb-0">
                                            <span>
                                                <input *ngIf="template.ins_primaSaludMinProCheck"
                                                       type="checkbox"
                                                       style="top: 3px"
                                                       class="checkbox"
                                                       (change)="resetearPropuesto(1)"
                                                       [(ngModel)]="primMinimaSalud" />
                                                PRIMA MÍNIMA PROPUESTA
                                            </span>
                                        </label>
                                        <!-- <input type="text"
                                               placeholder="0"
                                               [disabled]="statePrimaSalud"
                                               disabled
                                               style="margin-top: 4px !important"
                                               (ngModelChange)="resetearPrimas($event, saludID.id)"
                                               maxlength="12"
                                               [(ngModel)]="inputsQuotation.P_PRIMA_MIN_SALUD_PRO"
                                               FloatDirective /> -->
                                        <input type="text"
                                               placeholder="0"
                                               [disabled]="statePrimaSalud"
                                               disabled
                                               style="margin-top: 4px !important"
                                               (change)="resetearPrimas($event, infoSalud)"
                                               maxlength="12"
                                               [(ngModel)]="inputsQuotation.P_PRIMA_MIN_SALUD_PRO"
                                               (keypress)="onKey($event, 'decimal');"
                                               (keydown)="onKeydown($event);"
                                               (paste)="onPaste($event, 'decimal')" />
                                    </div>
                                </div>
                                <!--INI - COTIZADOR DE SCTR-->
                                <div *ngIf="this.valMixSAPSA == 0; else sctrSAPSASALUD">
                                    <div class="card mt-3"
                                         style="background-color: #EDF6FF;border-color: #5790D3 !important;">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm">
                                                    <h5 style="color: #5790d3;">
                                                        <img src="assets/images/SCTR_SALUD.png"
                                                             alt="sctrSALUD"
                                                             style="width: 36px;" />
                                                        SCTR SALUD
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <table class="table table-borderless riesgo tblTasas"
                                                       style="border-collapse: separate;">
                                                    <thead>
                                                        <tr class="d-flex">
                                                            <th class="col-sm text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>{{ variable.var_tasaNeta }}</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Propuesta (%)</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                        </tr>
                                                        <hr style="border-color: #cfe3fc !important;" />
                                                    </thead>
                                                    <tbody>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length == 0">
                                                            <td class="col-sm text-center">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngFor="let tasa of listaTasasSalud;
                                                                    let row = index">
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.description }}</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.rate | prettyNumber: 6 }} %</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm"
                                                                style="border-color: #cfe3fc !important;">
                                                                <input type="text"
                                                                       class="text-center"
                                                                       placeholder="0"
                                                                       [(ngModel)]="tasa.planProp"
                                                                       [ngClass]="{ 'error-validate': tasa.valItem }"
                                                                       (change)="resetearPrimas($event, infoSalud, tasa)"
                                                                       [disabled]="tasa.disabled"
                                                                       (keypress)="onKey($event, 'rate');"
                                                                       (keydown)="onKeydown($event);"
                                                                       style="color: #5790d3;border-color: #cfe3fc !important;" />
                                                                <span class="porcentaje"
                                                                      style="color: #5790d3;">%</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{tasa.premiumMonth | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <hr style="margin-bottom: 0"
                                                            *ngIf="listaTasasSalud?.length > 0"
                                                            style="border-color: #cfe3fc !important;" />
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaNeta }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{totalNetoSaludSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaComercial }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{inputsQuotation.primaComSalud | prettyNumber:
                                                                    2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_igv }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{ igvSaludSave | prettyNumber: 2 }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{variable.var_primaComercialTotal}}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{brutaTotalSaludSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaSalud }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <ng-template #sctrSAPSASALUD>
                                    <div class="card mt-3"
                                         style="background-color: #EDF6FF;border-color: #5790D3 !important;">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm">
                                                    <h5 style="color: #5790d3;">
                                                        <img src="assets/images/SCTR_SALUD.png"
                                                             alt="sctrSALUD"
                                                             style="width: 36px;" />
                                                        SCTR SALUD
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <table class="table table-borderless riesgo tblTasas"
                                                       style="border-collapse: separate;">
                                                    <thead>
                                                        <tr class="d-flex">
                                                            <th class="col-sm text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>{{ variable.var_tasaNeta }}</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Propuesta (%)</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                        </tr>
                                                        <hr style="border-color: #cfe3fc !important;" />
                                                    </thead>
                                                    <tbody>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length == 0">
                                                            <td class="col-sm text-center">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngFor="let tasa of listaTasasSalud;
                                                                    let row = index">
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.description }}</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.rate | prettyNumber: 6 }} %</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm"
                                                                style="border-color: #cfe3fc !important;">
                                                                <input type="text"
                                                                       class="text-center"
                                                                       placeholder="0"
                                                                       [(ngModel)]="tasa.planProp"
                                                                       [ngClass]="{ 'error-validate': tasa.valItem }"
                                                                       (change)="resetearPrimas($event, infoSalud, tasa)"                                                                    
                                                                       [disabled]="tasa.disabled"
                                                                       (keypress)="onKey($event, 'rate');"
                                                                       (keydown)="onKeydown($event);"
                                                                       style="color: #5790d3;border-color: #cfe3fc !important;" />
                                                                <span class="porcentaje"
                                                                      style="color: #5790d3;">%</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{tasa.premiumMonth | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <hr style="margin-bottom: 0"
                                                            *ngIf="listaTasasSalud?.length > 0"
                                                            style="border-color: #cfe3fc !important;" />
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaNeta }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{totalNetoSaludSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaComercial }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{inputsQuotation.primaComSalud | prettyNumber:
                                                                    2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_igv }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{ igvSaludSave | prettyNumber: 2 }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasSalud?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{variable.var_primaComercialTotal}}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{brutaTotalSaludSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaSalud }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                                <!--FIN - COTIZADOR DE SCTR-->
                            </div>
                            <div [ngClass]="template.ins_pensionWith ? 'col-sm-12' : 'col-sm-6'"
                                 *ngIf="
                  categoryList?.length > 0 ||
                  listaTasasPension?.length > 0 ||
                  planesList?.length > 0
                ">
                                <div class="row">
                                    <div *ngIf="template.ins_primaPensionMin"
                                         [ngClass]="
                      template.ins_pensionWith ? 'col-sm-3' : 'col-sm-6'
                    ">
                                        <label class="mb-0"><span>{{
                                                inputsQuotation.primaMinimaPension
                                                }}</span></label>
                                        <input type="text"
                                               placeholder="0"
                                               disabled
                                               [(ngModel)]="inputsQuotation.P_PRIMA_MIN_PENSION" />
                                    </div>
                                    <div [ngClass]="
                      template.ins_pensionWith ? 'col-sm-3' : 'col-sm-6'
                    "
                                         *ngIf="template.ins_primaPensionMinPro">
                                        <label class="mb-0">
                                            <span>
                                                <input *ngIf="template.ins_primaPensionMinProCheck"
                                                       [disabled]="!canProposeMinimunPremium"
                                                       type="checkbox"
                                                       style="top: 3px"
                                                       class="checkbox"
                                                       (change)="resetearPropuesto(2)"
                                                       [(ngModel)]="primMinimaPension" />
                                                PRIMA MÍNIMA PROPUESTA
                                            </span>
                                        </label>
                                        <input type="text"
                                               placeholder="0"
                                               [disabled]="statePrimaPension"
                                               (change)="resetearPrimas($event, infoPension)"
                                               maxlength="12"
                                               style="margin-top: 4px !important"
                                               [(ngModel)]="inputsQuotation.P_PRIMA_MIN_PENSION_PRO"
                                               (keypress)="onKey($event, 'decimal');"
                                               (keydown)="onKeydown($event);"
                                               (paste)="onPaste($event, 'decimal')" />
                                    </div>
                                    <div *ngIf="template.ins_plan"
                                         class="col-sm-3">
                                        <label class="mb-0"><span>{{ variable.var_desPlan }}</span></label>
                                        <!-- <input type="text" placeholder="0" disabled [(ngModel)]="inputsQuotation.desTipoPlan" /> -->
                                        <!-- marcos silverio -->
                                        <select [(ngModel)]="inputsQuotation.desTipoPlan"
                                                class="minimal"
                                                [disabled]="this.typeTran == 'Declaración' || this.typeTran == 'Exclusión' || this.typeTran == 'Endoso' || this.typeTran == 'Inclusión'">
                                            <option *ngFor="let p of planList"
                                                    value="{{ p.SDESCRIPT | uppercase }}">
                                                {{ p.SDESCRIPT }}
                                            </option>
                                        </select>
                                    </div>
                                    <!-- ini - marcos silverio -->
                                    <div *ngIf="template.ins_plan && template.ins_recotizarCotizacion && nrocotizacion != undefined && inputsQuotation.desTipoPlan == 'Plan Maestro'"
                                         class="col-sm-1">
                                        <label class="mb-0"><span>Coberturas</span></label>
                                        <br />
                                        <a class="col-sm-12"
                                           (click)="seeCovers(nrocotizacion)">
                                            <img alt="Ver planes"
                                                 src="assets/icons/see.svg"
                                                 style="cursor: pointer; height: 24px; margin-left: 10px" />
                                        </a>
                                    </div>
                                    <!-- fin - marcos silverio -->
                                </div>
                                <!--COTIZADOR PENSION SCTR-->
                                <div *ngIf="this.valMixSAPSA == 0;else sctrVALPENSION">
                                    <div class="card mt-3"
                                         style="background-color: #fff6ed;border-color: #ff9a3b !important;">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm">
                                                    <h5 style="color: #ff9a3b;">
                                                        <img src="assets/images/SCTR_PENSION.png"
                                                             alt="sctrPENSION"
                                                             style="width: 34px;" />
                                                        {{ variable.var_nomSubProducto }}
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="template.ins_pensionList">
                                                <table class="table table-borderless riesgo tblTasas" style="border-collapse: separate;">
                                                    <thead>
                                                        <tr class="d-flex">
                                                            <th class="col-sm text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>{{ variable.var_tasaNeta }}</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Propuesta (%)</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                        </tr>
                                                        <hr style="border-color: #ffead7 !important;" />
                                                    </thead>
                                                    <tbody>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length == 0">
                                                            <td colspan="4"
                                                                class="col-sm text-center">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngFor="let tasa of listaTasasPension;let row = index">
                                                            <td *ngIf="tasa.status == 1" 
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.description }}</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.rate | prettyNumber: 6}} %</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm"
                                                                style="border-color: #ffdfc1 !important;">
                                                                <input type="text"
                                                                       class="text-center"
                                                                       placeholder="0"
                                                                       [(ngModel)]="tasa.planProp"
                                                                       [ngClass]="{ 'error-validate': tasa.valItem }"
                                                                       (change)="resetearPrimas($event, infoPension, tasa)"
                                                                       [disabled]="tasa.disabled"
                                                                       (keypress)="onKey($event, 'rate');"
                                                                       (keydown)="onKeydown($event);"
                                                                       style="color: #ff7b00;border-color: #ffdfc1 !important;" />
                                                                <span class="porcentaje"
                                                                      style="color: #ff7b00;">%</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{tasa.premiumMonth | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <hr style="margin-bottom: 0" *ngIf="listaTasasPension?.length > 0" style="border-color: #ffead7 !important;" />
                                                        <tr class="d-flex" *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaNeta }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{totalNetoPensionSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex" *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaComercial }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{inputsQuotation.primaComPension | prettyNumber:2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex" *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_igv }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{igvPensionSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex" *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{variable.var_primaComercialTotal}}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{brutaTotalPensionSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaPension }}</p>
                                                </div>
                                            </div>
                                            <!--VIDA LEY-->
                                            <!-- <div class="row"
                                                 *ngIf="template.ins_montoList">
                                                <table *ngIf="typeTran != 'Inclusión' && typeTran != 'Exclusión' && typeTran != 'Endoso' && flagPolizaMat == false"
                                                       [className]="typeTran == 'Declaración' ? 'table table-borderless riesgo tblTasas widthDeclareTasa' : 'table table-borderless riesgo tblTasas'">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="text-center prTasas">
                                                                <label>Tasa</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Bimestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Trimestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Semestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Anual</label>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngIf="amountPremiumList.length == 0">
                                                            <td class="text-center"
                                                                colspan="6">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr *ngFor="let item of amountPremiumList; let i = index">
                                                            <td class="text-center"
                                                                *ngIf="item.sactive == true">
                                                                <span>{{ item.SCATEGORIA }}</span>
                                                            </td>
                                                            <td class="text-center prTasas"
                                                                *ngIf="item.sactive == true">
                                                                <span>{{ item.NTASA }}%</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_MEN | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_BIM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu) ||(item.sactive == true &&typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_TRI | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_SEM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 &&template.ins_cuadroTipoFrecu) ||(item.sactive == true &&typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_ANU | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>

                                                        <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                            style="border-top: 1px solid #ddd">
                                                            <td colspan="2"
                                                                class="text-right">
                                                                <span class="prTasas">{{
                                                                    item.SDESCRIPCION
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 &&template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_MEN | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_BIM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_TRI | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_SEM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_ANU | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-md-6"
                                                     *ngIf="typeTran == 'Inclusión'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center">
                                                                    <label>Prima Total</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="6">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center prTasas"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.NTASA }}%</span>
                                                                </td>
                                                                <td class="text-center prTasas">
                                                                    <span>{{
                                                                        item.NPREMIUMN_ANU | prettyNumber: 2
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_ANU | prettyNumber: 2
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-md-6"
                                                     *ngIf="typeTran == 'Endoso'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center">
                                                                    <label>Monto a pagar</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="6">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center prTasas"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.NTASA | prettyNumber: 2 }}%</span>
                                                                </td>
                                                                <td class="text-center prTasas">
                                                                    <span>{{
                                                                        item.NPREMIUMN_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-sm-6"
                                                     *ngIf="typeTran == 'Exclusión'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-left">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Monto a devolver</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="3">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{ item.NTASA | prettyNumber: 6 }}%</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NPREMIUMN_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>

                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaPension }}</p>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                                <ng-template #sctrVALPENSION>
                                    <div class="card mt-3"
                                         style="background-color: #fff6ed;border-color: #ff9a3b !important;">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm">
                                                    <h5 style="color: #ff9a3b;">
                                                        <img src="assets/images/SCTR_PENSION.png"
                                                             alt="sctrPENSION"
                                                             style="width: 34px;" />
                                                        {{ variable.var_nomSubProducto }}
                                                    </h5>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 *ngIf="template.ins_pensionList">
                                                <table class="table table-borderless riesgo tblTasas"
                                                       style="border-collapse: separate;">
                                                    <thead>
                                                        <tr class="d-flex">
                                                            <th class="col-sm text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>{{ variable.var_tasaNeta }}</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Propuesta (%)</label>
                                                            </th>
                                                            <th class="col-sm text-center">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                        </tr>
                                                        <hr style="border-color: #ffead7 !important;" />
                                                    </thead>
                                                    <tbody>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length == 0">
                                                            <td colspan="4"
                                                                class="col-sm text-center">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngFor="let tasa of listaTasasPension;let row = index">
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.description }}</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{ tasa.rate | prettyNumber: 6}} %</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm"
                                                                style="border-color: #ffdfc1 !important;">
                                                                <input type="text"
                                                                       class="text-center"
                                                                       placeholder="0"
                                                                       [(ngModel)]="tasa.planProp"
                                                                       [ngClass]="{ 'error-validate': tasa.valItem }"
                                                                       (change)="resetearPrimas($event, infoPension, tasa)"
                                                                       [disabled]="tasa.disabled"
                                                                       (keypress)="onKey($event, 'rate');"
                                                                       (keydown)="onKeydown($event);"
                                                                       style="color: #ff7b00;border-color: #ffdfc1 !important;" />
                                                                <span class="porcentaje"
                                                                      style="color: #ff7b00;">%</span>
                                                            </td>
                                                            <td *ngIf="tasa.status == 1"
                                                                class="col-sm text-center">
                                                                <span>{{tasa.premiumMonth | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <hr style="margin-bottom: 0"
                                                            *ngIf="listaTasasPension?.length > 0"
                                                            style="border-color: #ffead7 !important;" />
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaNeta }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{totalNetoPensionSave | prettyNumber: 2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_primaComercial }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{inputsQuotation.primaComPension | prettyNumber:
                                                                    2}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{ variable.var_igv }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{
                                                                    igvPensionSave | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr class="d-flex"
                                                            *ngIf="listaTasasPension?.length > 0">
                                                            <td class="col-sm text-right colspan3">
                                                                <span>{{
                                                                    variable.var_primaComercialTotal
                                                                    }}</span>
                                                            </td>
                                                            <td class="col-sm text-center">
                                                                <span>{{
                                                                    brutaTotalPensionSave | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaPension }}</p>
                                                </div>
                                            </div>
                                            <!--VIDA LEY-->
                                            <!-- <div class="row"
                                                 *ngIf="template.ins_montoList">
                                                <table *ngIf="typeTran != 'Inclusión' && typeTran != 'Exclusión' && typeTran != 'Endoso' && flagPolizaMat == false"
                                                       [className]="typeTran == 'Declaración' ? 'table table-borderless riesgo tblTasas widthDeclareTasa' : 'table table-borderless riesgo tblTasas'">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">
                                                                <label>Categoría</label>
                                                            </th>
                                                            <th class="text-center prTasas">
                                                                <label>Tasa</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center' : 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Mensual</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Bimestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Trimestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Semestral</label>
                                                            </th>
                                                            <th [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSidesHeader text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu)">
                                                                <label>Prima Anual</label>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngIf="amountPremiumList.length == 0">
                                                            <td class="text-center"
                                                                colspan="6">
                                                                No hay tasas asociadas
                                                            </td>
                                                        </tr>
                                                        <tr *ngFor="let item of amountPremiumList; let i = index">
                                                            <td class="text-center"
                                                                *ngIf="item.sactive == true">
                                                                <span>{{ item.SCATEGORIA }}</span>
                                                            </td>
                                                            <td class="text-center prTasas"
                                                                *ngIf="item.sactive == true">
                                                                <span>{{ item.NTASA }}%</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_MEN | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_BIM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu) ||(item.sactive == true &&typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_TRI | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu) || (item.sactive == true && typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_SEM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 &&template.ins_cuadroTipoFrecu) ||(item.sactive == true &&typeTran != 'Declaración')">
                                                                <span>{{
                                                                    item.NPREMIUMN_ANU | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>

                                                        <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                            style="border-top: 1px solid #ddd">
                                                            <td colspan="2"
                                                                class="text-right">
                                                                <span class="prTasas">{{
                                                                    item.SDESCRIPCION
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 5 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 5 &&template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_MEN | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 4 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_BIM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 3 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_TRI | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' ||(typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 2 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_SEM | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                            <td [className]="this.inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu ? 'borderSides text-center': 'text-center'"
                                                                *ngIf="typeTran != 'Declaración' || (typeTran == 'Declaración' && inputsQuotation.frecuenciaPago == 1 && template.ins_cuadroTipoFrecu)">
                                                                <span>{{
                                                                    item.NAMOUNT_ANU | prettyNumber: 2
                                                                    }}</span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <div class="col-md-6"
                                                     *ngIf="typeTran == 'Inclusión'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center">
                                                                    <label>Prima Total</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="6">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center prTasas"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.NTASA }}%</span>
                                                                </td>
                                                                <td class="text-center prTasas">
                                                                    <span>{{
                                                                        item.NPREMIUMN_ANU | prettyNumber: 2
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_ANU | prettyNumber: 2
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-md-6"
                                                     *ngIf="typeTran == 'Endoso'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-center">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center">
                                                                    <label>Monto a pagar</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="6">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center prTasas"
                                                                    *ngIf="item.sactive == true">
                                                                    <span>{{ item.NTASA | prettyNumber: 2 }}%</span>
                                                                </td>
                                                                <td class="text-center prTasas">
                                                                    <span>{{
                                                                        item.NPREMIUMN_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-sm-6"
                                                     *ngIf="typeTran == 'Exclusión'">
                                                    <table class="table table-borderless riesgo tblTasas">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-left">
                                                                    <label>Categoría</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Tasa</label>
                                                                </th>
                                                                <th class="text-center prTasas">
                                                                    <label>Monto a devolver</label>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngIf="amountPremiumList.length == 0">
                                                                <td class="text-center"
                                                                    colspan="3">
                                                                    No hay tasas asociadas
                                                                </td>
                                                            </tr>
                                                            <tr *ngFor="let item of amountPremiumList;let i = index">
                                                                <td class="text-center">
                                                                    <span>{{ item.SCATEGORIA }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{ item.NTASA | prettyNumber: 6 }}%</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NPREMIUMN_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>

                                                            <tr *ngFor="let item of amountDetailTotalList;let i = index"
                                                                style="border-top: 1px solid #ddd">
                                                                <td colspan="2"
                                                                    class="text-right">
                                                                    <span class="prTasas">{{
                                                                        item.SDESCRIPCION
                                                                        }}</span>
                                                                </td>
                                                                <td class="text-center">
                                                                    <span>{{
                                                                        item.NAMOUNT_TOT | number: "1.2-2"
                                                                        }}</span>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="col-sm-12">
                                                    <p class="msg-error">{{ mensajePrimaPension }}</p>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </ng-template>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3"
                                 *ngIf="flagPolizaMat == true">
                                <span>PLAN</span>
                                <select [(ngModel)]="inputsQuotation.desTipoPlanPM"
                                        class="minimal">
                                    <option *ngFor="let p of planList"
                                            value="{{ p.SDESCRIPT | uppercase }}">
                                        {{ p.SDESCRIPT }}
                                    </option>
                                </select>
                            </div>
                            <div class="col-sm-3"
                                 *ngIf="flagPolizaMat == true">
                                <label class="mb-0"><span>TARIFA (*)</span></label>
                                <select (change)="onSelectComision($any($event.target).value)"
                                        [(ngModel)]="inputsQuotation.P_COMISION"
                                        (click)="clearValidate(16)"
                                        [ngClass]="{ 'error-validate': inputsValidate[16] }"
                                        class="minimal"
                                        [disabled]="
                    canTasaVL ||
                    typeTran == 'Declaración' ||
                    typeTran === 'Inclusión'
                  ">
                                    <option value="">SELECCIONE</option>
                                    <option *ngFor="let comision of comisionList"
                                            value="{{ comision.idComision }}">
                                        {{ comision.nroComision }} %
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12"
                                 *ngIf="flagPolizaMat == true">
                                <span>* LA PÓLIZA MATRIZ NO GENERA RECIBO Y FACTURA</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <span>COMENTARIO</span>
                                <textarea rows="4"
                                          placeholder="Comentario"
                                          [(ngModel)]="inputsQuotation.P_SCOMMENT"
                                          (keypress)="textValidate($event, 4)"
                                          maxlength="4000"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12"
                                 *ngIf="flagPolizaMat == true">
                                <span>DOCUMENTOS DE LOS ASEGURADOS</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <button type="button"
                                        (click)="fileInput.click()"
                                        style="margin: 15px 0">
                                    <span>Seleccionar Archivo</span>
                                </button>
                                <input hidden
                                       #fileInput
                                       ngfSelect
                                       multiple
                                       type="file"
                                       [(files)]="files"
                                       [maxSize]="maxSize"
                                       accept="application/pdf,image/png,image/jpeg,application/msword,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div *ngIf="files.length > 0">
                                    <div style="margin-bottom: 0px">
                                        <h6>Archivos Seleccionados ({{ files.length }})</h6>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Nombre</th>
                                                    <!-- <th>Tipo</th> -->
                                                    <th class="text-center">Tamaño</th>
                                                    <th class="text-center">Acción</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of files; let i = index">
                                                    <td>
                                                        <strong>{{ item.name }}</strong>
                                                    </td>
                                                    <!-- <td>
                                                        {{ item.type }}
                                                    </td> -->
                                                    <td class="text-center">
                                                        {{ item.size / 1024 / 1024 | number: ".2" }} MB
                                                    </td>
                                                    <td class="text-center">
                                                        <img src="assets/icons/anular.png"
                                                             (click)="files.splice(i, 1)"
                                                             title="Eliminar"
                                                             alt="Eliminar" />
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion mt-2">
            <div class="pull-right mt-2"
                 style="width: 100%">
                <button *ngIf="(codProducto == '2') && flagPolizaMat == false"
                        class="pull-right full-color"
                        (click)="grabarCotizacion()">
                    <span>Aceptar</span>
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Pantalla de carga -->
<div [hidden]="!isLoading"
     class="loadingScreen">
    <div style="display: flex; height: 100%; width: 100%">
        <i style="margin: auto; font-size: 50px"
           class="fa fa-spinner fa-spin"></i>
    </div>
</div>